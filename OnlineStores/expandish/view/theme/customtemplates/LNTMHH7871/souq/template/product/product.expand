{% set ALT_IMAGE = product_name %}

{% if attribute_groups|length > 0 %}
{% for attribute_group in attribute_groups %}
{% if attribute_group['name'] == 'NOSHOW' %}
{% for attribute in attribute_group['attribute'] %}
{% if attribute['name'] == 'ALT_IMAGE' %}
{% set ALT_IMAGE = attribute['text'] %}
{% endif %}
{% endfor %}
{% endif %}
{% endfor %}
{% endif %}

<div id="notification"></div>

{% if product_designer is defined and product_designer == 1 %}
<style>
    .modal-title {
            {
            % if pd_options['back_color'] is defined and pd_options['back_color'] !=''%
        }

        color: {
                {
                pd_options['back_color']
            }
        }

        ;

            {
            % endif %
        }

            {
            % if pd_options['cust_fw'] is defined and pd_options['cust_fw'] !=''%
        }

        font-style: italic;

            {
            % endif %
        }
    }
</style>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document" style="width:735px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
                <h4 class="modal-title" id="myModalLabel">{{ lang('cust_header_text') }}</h4>
            </div>
            <div class="modal-body" style="padding:0px !important;">
                <iframe id="design_pop_frame" src="" scrolling="no" width="730" height="520" frameborder="0"></iframe>
                <div style="clear:both;"></div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- if pop up modal is enabled -->
{% if curtain_seller is defined and curtain_seller['isEnabled'] == true and  curtain_seller['curtain_seller_in_form'] == 0 %}
{% include 'default/template/module/curtain_seller.expand' %}
{% endif %}

{% if pricePerMeters == 1 and price_meter_data['main_status'] == 1 %}
<div class="modal fade" id="myModalPrMeter" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
    style="z-index: 99999;">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
                <h4 class="modal-title" id="myModalLabel">{{ lang('text_estimate_amount') }}</h4>
            </div>
            <div class="modal-body" style="padding-top: 0">
                <div class="product-add-form">
                    <div class="option form-group">

                        <div class="control col-md-4" style="font-size: 12px;padding-left: 0;">
                            <input type="hidden" id='set_meter_on' value="0" />

                            <input type="hidden" name='pricePerMeter[main_status]'
                                value="{{ price_meter_data['main_status'] }}" />
                            <input type="hidden" name='pricePerMeter[metalprofile_status]'
                                value="{{ price_meter_data['metalprofile_status'] }}" />
                            <input type="hidden" name='pricePerMeter[skirtings_status]'
                                value="{{ price_meter_data['skirtings_status'] }}" />
                            <input type="hidden" name='pricePerMeter[main_package_size]'
                                value="{{ price_meter_data['main_package_size'] }}" />
                            <input type="hidden" name='pricePerMeter[skirtings_package_size]'
                                value="{{ price_meter_data['skirtings_package_size'] }}" />
                            <input type="hidden" name='pricePerMeter[main_unit]'
                                value="{{ price_meter_data['main_unit'] }}" />

                            <label class="col-md-6 col-form-label"
                                style="padding-left: 0;">{{ lang('text_room_width') }}</label>
                            <div class="col-md-6">
                                <span>
                                    <input type="text" name="pricePerMeter[width]" onkeyup="setMeterAction(false)"
                                        class="form-control" id="set_meter_w"
                                        style="width: 72%;height: 30px;color:#333;display: inherit;font-size: 11px;" />
                                </span>
                                <span>{{ lang("text_" ~ price_per_meter_settings['default_unit'] ) }}</span>
                            </div>
                            <div style="clear: both;"></div>
                            <label class="col-md-6 col-form-label"
                                style="padding-left: 0;">{{ lang('text_room_length') }}</label>
                            <div class="col-md-6">
                                <span>
                                    <input type="text" name="pricePerMeter[length]" onkeyup="setMeterAction(false)"
                                        class="form-control" id="set_meter_l"
                                        style="width: 72%;height:30px;color:#333;display: inherit;font-size: 11px;" />
                                    <span>{{ lang("text_" ~ price_per_meter_settings['default_unit'] ) }}</span>
                                </span>
                            </div>
                            <div style="clear: both;"></div>
                            <label class="col-md-6 col-form-label"
                                style="padding-left: 0;">{{ lang('text_dimention') }}</label>
                            <div class="col-md-6">
                                <span>
                                    <input type="text" class="form-control" id="set_meter_wl" value="0" disabled="true"
                                        style="width: 72%;height: 30px;color:#333;display: inherit;font-size: 11px;" />
                                    <span>{{ lang('text_meter') }}<span
                                            style="font-size: 10px;vertical-align: top;">2</span></span>
                                </span>
                            </div>
                            <div style="clear: both;padding-top: 20px"></div>
                            {% if price_meter_data['metalprofile_status'] == 1 %}
                            <label class="col-md-6 col-form-label"
                                style="padding-left: 0;">{{ lang('text_doors_number') }}</label>
                            <div class="col-md-6">
                                <input type="text" name="pricePerMeter[doors]" onkeyup="setMeterAction(false)"
                                    class="form-control" id="set_meter_d"
                                    style="width: 82%;height: 30px;color:#333;display: inherit;font-size: 11px;" />
                            </div>
                            <div style="clear: both;"></div>
                            <label class="col-md-6 col-form-label"
                                style="padding-left: 0;">{{ lang('text_door_width') }}</label>
                            <div class="col-md-6">
                                <input type="text" name="pricePerMeter[doorW]" onkeyup="setMeterAction(false)"
                                    class="form-control" id="set_meter_dw"
                                    style="width: 82%;height: 30px;color:#333;display: inherit;font-size: 11px;" />
                            </div>
                            {% endif %}
                        </div>
                        <div class="control col-md-4" style="font-size: 12px">
                            <label>{{ lang('text_perimeter') }}:</label> <span class='prMeterP'>--</span>
                            {{ lang('text_meter') }}<br />
                            <label>{{ lang('text_package_size') }}:</label>
                            <span>{{ price_meter_data['main_package_size'] }} {{ lang('text_meter') }}
                                {% if price_meter_data['main_unit'] == '2' %}
                                <span style="font-size: 10px;vertical-align: top;">2</span>
                                {% endif %}
                            </span><br />
                            {% if price_meter_data['main_price_percentage'] > 0 %}
                            <label>{{ lang('text_add_percentage') }}:</label>
                            <span>{{ price_meter_data['main_price_percentage'] }}</span> %<br />
                            {% endif %}

                            <label><strong>{{ lang('text_quantity') }}:</strong></label> <span
                                class='prMeterMainBoxs'>--</span> {{ lang('text_box') }}<br />
                        </div>
                        <div class="control col-md-4" style="font-size: 12px">
                            <label>{{ lang('text_accessories') }}</label>
                            <hr style="margin: 0;padding-bottom: 5px;">
                            {% if price_meter_data['skirtings_status'] %}
                            <label>{{ lang('text_skirtings') }}:</label> <span class="prMeterSki">--</span>
                            {{ lang('text_meter') }}<br />
                            {% endif %}
                            {% if price_meter_data['metalprofile_status'] %}
                            <label>{{ lang('text_metalprofiles') }}:</label> <span class="prMeterMetal">--</span>
                            {{ lang('text_meter') }}<br />({{ price_meter_data['metalprofile_package_size'] }}
                            {{ lang('text_meter') }})<br />
                            {% endif %}
                            <label><strong>{{ lang('text_quantity') }}:</strong></label> <span
                                class="prMeterMain">--</span> {{ lang('text_meter') }}
                            {% if price_meter_data['main_unit'] == '2' %}
                            <span style="font-size: 10px;vertical-align: top;">2</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div style="clear:both;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary"
                    onclick='setMeterAction(true)'>{{ lang('text_save') }}</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">{{ lang('text_close') }}</button>
            </div>
        </div>
    </div>
</div>
{% endif %}
{{ include('default/template/module/minimum_deposit/minimum_deposit_model.expand') }}
<div id="content">
    <!-- breadcrumb -->
    <div class="breadcrumb-page hide">
        <ol class="breadcrumb">
            {% for breadcrumb in breadcrumbs %}
            {% if loop.last %}
            <li class="active">{{ breadcrumb['text'] }}</li>
            {% else %}
            <li><a href="{{ breadcrumb['href'] }}">{{ breadcrumb['text'] }}</a></li>
            {% endif %}
            {% endfor %}
        </ol>
    </div> <!-- breadcrumb -->

    <div class="row">
        <div class="productholder">
            <!-- {% if config('show_brands') and manufacturerimg %}
                <a href="{{manufacturer_href}}" id="brandImage_inner" alt"{{ manufacturer }}">
                    <img src="{{image(manufacturerimg) }}" alt="{{ manufacturer }}">
                </a> 
            {% endif %} -->
            <div class="product-detail detail-with-sidebar border">
                <div class="row">
                    {% if image != '' or images|length > 0 %}
                    <div class="col-md-5 col-sm-12 col-xs-12 productsImages">
                        <h2 class="title-detail">{{ product_name }}</h2>
                        {% if review_status != '' and config('config_review_status') == '1' %}
                        <div class="product-reviews-summary">
                            <div class="rating-action">
                                <img src="{{ asset('image/stars-' ~ rating ~ '.png') }}"
                                    alt="{{ lang('text_reviews')|format(reviews_count) }}"/>&nbsp;&nbsp;<a
                                         href="#reviews" role="tab" data-toggle="tab" class="reviewTrigger">{{ lang('text_reviews')|format(reviews_count) }}</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a
                                         href="#reviews" role="tab" data-toggle="tab" class="reviewTrigger">{{ lang('text_write') }}</a>
                            </div>
                        </div>
                        {% endif %}
                        {% if(rotate360) %}
                            {{ include('abstract/template/product/rotate360/rotate360_section.expand') }}
                        {% endif %}
                        <div class="gallery-without-sidebar">
                            <div class="slider flexslider">
                                <ul class="slides">
                                    {% if image != '' %}
                                    <li>
                                            <img class="product-zoom productZoomData" src='{{ image(image, 600, auto) }}' data-src="{{ image(image, 600, auto) }}" data-zoom-image="{{ image(image, 1000, auto) }}"
                                            data-zoom-auto = "{{ image(image, 1000, auto) }}" alt="{{ ALT_IMAGE }}">
                                    </li>
                                    {% endif %}
                                    {% for image in images %}
                                    <li>
                                            <img class="product-zoom productZoomData" src="{{ image(image.image, 600, auto) }}" data-src="{{ image(image.image, 600, auto) }}" data-zoom-image="{{ image(image.image, 1000, auto) }}" data-zoom-auto = "{{ image(image.image, 1000, auto) }}"
                                                 alt="{{ ALT_IMAGE }}">
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="carousel flexslider">
                                <ul class="slides">
                                    {% if image != '' %}
                                    <li>
                                        <a href="#"  data-image="{{ image(image, 500, auto) }}" data-zoom-image="{{ image(image, 500, auto) }}">
                                            <img src="{{ image(image, 500, auto) }}" alt="{{ ALT_IMAGE }}">
                                        </a>
                                    </li>
                                    {% endif %}
                                    {% for image in images %}
                                    <li>
                                        <a href="#"  data-image="{{ image(image.image, 500, 300) }}" data-zoom-image="{{ image(image.image, 500, 300) }}">
                                            <img src="{{ image(image.image, 500, auto) }}" alt="{{ ALT_IMAGE }}">
                                        </a>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- End Gallery -->
                    {% endif %}
                    <div class="product-content {{ image != '' or images|length > 0 ? 'col-md-7' : 'col-md-12' }}
                    col-sm-12" style="padding-right: 0;padding-left: 0">
                        <div
                            class="{{ image != '' or images|length > 0 ? 'col-md-7' : 'col-md-6' }} col-sm-12 col-xs-12 centerMob">
                            <div class="detail-info">
                                {% if not seller.disable_price %}
                                {% if ('-1' not in price) and ('-1' not in special)  %}
                                <div class="product-price priceProduct">
                                    <input type="hidden" id="currency_symbols_left"
                                        value='{{currency_symbols["left"]}}'>
                                    <input type="hidden" id="currency_symbols_right"
                                        value='{{currency_symbols["right"]}}'>
                                    {% if pricePerMeters == 1 %}
                                    {% if price_meter_data['main_status'] == 1 %}
                                    {% if special %}
                                    <ins><span>{{ special }}</span></ins>
                                    {% endif %}
                                    <span>{{currency_symbols["left"]}}{{ price_meter_data['main_meter_price'] }}{{currency_symbols["right"]}}/Meter</span>
                                    <input type="hidden" id="price_value"
                                        value="{{ price_meter_data['main_meter_price'] }}">
                                    {% else %}
                                    {% if special %}
                                    <input type="hidden" id="price_value" value="{{ special_value }}">

                                    {# This input added to reflect on original price when change a select option #}
                                    <input type="hidden" id="original_value" value="{{ price }}">

                                    <ins><span class="price_display">{{ special }}</span></ins>
                                    <del><span class="original_display">{{ price }}</span></del>
                                    {% else %}
                                    <input type="hidden" id="price_value" value="{{ price_value }}">
                                    <ins><span class="price_display">{{ price }}</span></ins>
                                    {% endif %}
                                    {% endif %}
                                    {% else %}
                                    {% if not special %}
                                    <input type="hidden" id="price_value" value="{{ price_value }}">
                                    <span>{{ lang('text_price') }} </span>
                                    <ins><span class="price_display">

                                            {{ price }}</span></ins>
                                    {% else %}
                                    <input type="hidden" id="price_value" value="{{ special_value }}">

                                    {# This input added to reflect on original price when change a select option #}
                                    <input type="hidden" id="original_value" value="{{ price }}">

                                    <span>{{ lang('text_price') }} </span>
                                    <ins><span class="price_display">{{ special }}</span></ins>
                                    <del><span class="original_display">{{ price }}</span></del>
                                    {% endif %}
                                    {% endif %}
                                    {% if tax != "0" %}
                                    <span class="price-tax">
                                        {% if tax_included_val is defined and tax_included_val %}
                                        {{ lang('text_included_tax') }}
                                        {% else %}
                                        {% if not price_without_tax  %}
                                        {{ lang('text_tax') }} <span id="tax_value_display">{{ tax }}</span>
                                        <input type="hidden" id="tax_value" value="{{ tax_value }}" />
                                        {% endif %}
                                        {% endif %}
                                    </span><br />
                                    {% else %}
                                    <br />
                                    {% endif %}

                                    {% if curtain_seller is defined and curtain_seller['isEnabled'] == true and curtain_seller['curtain_seller_in_form'] == 0 %}
                                    <br>
                                    <button class="btn btn-info"
                                        onclick='showCurtainSellerModal()'>{{ lang('text_click_edit_dimention') }}</button>
                                    {% endif %}

                                    {{ include('default/template/module/minimum_deposit/display_price.expand') }}

                                    {% if points > 0 %}
                                    <span class="reward"><small>{{ lang('text_points') }}
                                            {{ points }}</small></span><br />
                                    {% endif %}

                                    {% if discounts|length > 0 %}
                                    <br />
                                    <div class="discount">
                                        {% for discount in discounts %}
                                        {{ lang('text_discount')|format(discount.quantity, discount.price) }}<br />
                                        {% endfor %}
                                    </div>
                                    {% endif %}
                                </div>
                                {% endif %}
                                {% endif %}
                                {% if pricePerMeters == 1 %}
                                {% if price_meter_data['main_status'] == 1 %}
                                {% if price_meter_data['skirtings_status'] %}
                                - <span><strong>{{ lang('text_skirtings') }}:</strong></span> <span
                                    class="prMeterSki">--</span> {{ lang('text_meter') }}<br />
                                {% endif %}
                                {% if price_meter_data['metalprofile_status'] %}
                                - <span><strong>{{ lang('text_metalprofiles') }}:</strong></span> <span
                                    class="prMeterMetal">--</span>
                                {{ lang('text_meter') }}<br />({{ price_meter_data['metalprofile_package_size'] }}
                                {{ lang('text_meter') }})<br />

                                {% endif %}
                                - <span><strong>{{ lang('text_quantity') }}:</strong></span> <span
                                    class="prMeterMain">--</span> {{ lang('text_box') }}

                                <br />

                                - <span style='font-weight:bold'>{{ lang('text_total_price') }}</span>:<span
                                    class='prMeterPrice'>0</span> -
                                <span>
                                    <a style='text-decoration:underline' href='javascript://'
                                        onclick='showSetMeterModal()'>[{{ lang('text_click_edit_dimention') }}]</a>
                                </span>
                                <br />
                                {% endif %}
                                {% endif %}

                                <div class="product-info-stock-sku">
                                    {% if is_custom_stock_status_colors == 1 %}
                                    <div class="stock available {{quantity ? 'available-ST' : 'unavailable-ST'}}    "
                                        style="background-color: {{stock_status_color}}">
                                        <span class="badge">{{ lang('text_stock') }} </span>
                                        &nbsp;&nbsp;{{ stock ? stock : lang('text_instock') }}
                                    </div>
                                    {% else %}
                                    <div class="stock available {{quantity ? 'available-ST' : 'unavailable-ST'}}">
                                        <span class="badge">{{ lang('text_stock') }} </span>
                                        &nbsp;&nbsp;{{ stock ? stock : lang('text_instock') }}
                                    </div>
                                    {% endif %}
                                </div>
                                <!-- if pop up modal is not enabled -->
                                {% if curtain_seller is defined and curtain_seller['isEnabled'] == true and  curtain_seller['curtain_seller_in_form'] == 1 %}
                                {% include 'default/template/module/curtain_seller_form.expand' %}
                                {% endif %}

                                {% if rentalProducts == 1 %}
                                {% if transaction_type == 2 %}
                                <div class="product-add-form">
                                    <div class="option form-group">
                                        <label>{{ lang('label_rental_range') }}</label>
                                        <div class="control">
                                            {{ lang('text_range_from') }} <input class="dateRangeFrom form-control"
                                                type="text" readonly="true" name="dateRange[from]" />
                                            {{ lang('text_range_to') }} <input class="dateRangeTo form-control"
                                                type="text" readonly="true" name="dateRange[to]" />
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                {% endif %}

                                <div class="product-add-form">
                                    <form>
                                        {% if options %}
                                        <div class="product-options-wrapper">
                                            <!-- =====================================================================================-->
                                            <!-- =================================== Options Area  ===================================-->
                                            <!-- =====================================================================================-->
                                            {% if options %}
                                            <div class="options">
                                                {% for option in options %}

                                                <!-- ######################### Select -->

                                                {% if option.type == 'select' %}
                                                <div id="option-{{ option.product_option_id }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option.product_option_id }}]">{{ option.name }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} <span
                                                            id="relational_option_loading-{{ option.option_id }}"
                                                            style="display: none">&nbsp;&nbsp;<img
                                                                src="/expandish/view/theme/default/image/spinners/spinner_1.gif"></span></label>
                                                    <div class="control">
                                                        <select name="option[{{ option.product_option_id }}]"
                                                            id="option[{{ option.product_option_id }}]"
                                                            class="opt-select-variation form-control relational_option_{{ option.option_id }}"
                                                            onchange="{% if not is_knawat_product %} getSelectPrice(this.value,'{{ option.product_option_id }}', {{ option.option_id }}, {{ opt_relational_status }}) {% else %} getVariationPrice('{{product_id}}') {% endif %}" {% if ( (opt_relational_status and option.option_id in opt_relational_parents)
                                                                                or
                                                                                (opt_relational_status and opt_elements_parents[option.option_id])
                                                                                )
                                                                            %}
                                                            {{ 'data-relations="' ~ option.option_id ~ '"' }}
                                                            {{ 'data-relationalparents="' ~ opt_elements_parents[option.option_id] ~ '"' }}
                                                            {{ 'data-relationalchild="' ~ opt_relational_relations[option.option_id] ~ '"' }}
                                                            {{ 'data-option_id="' ~ option.option_id ~ '"' }}
                                                            {% endif %}>
                                                            <option value="">{{ lang('text_select') }}</option>
                                                            {% if (not opt_relational_status) or (opt_relational_status and option.option_id not in opt_relational_childs) %}
                                                            {% for option_value in option.option_value %}
                                                            <option value="{{ option_value.product_option_value_id }}"
                                                                {% if option_value.quantity <= 0 and not is_knawat_product %}disabled="disabled"
                                                                {% endif %}
                                                                data-option-value-id="{{option_value.option_value_id}}"
                                                                {% if option.product_option_id in selectedOptions|keys %}
                                                                {% if option_value.product_option_value_id == selectedOptions[option.product_option_id] %}
                                                                selected="selected" {% endif %} {% endif %}>
                                                                {{ option_value.name }}

                                                                <!-- Option Quantity Check -->
                                                                {% if option_value.quantity <= 0 and not is_knawat_product %}
                                                                ({{ lang('text_notavailable') }})
                                                                {% endif %}
                                                                <!-- End Option Quantity Check   -->

                                                                {# OPTION PRICE #}
                                                                {% if config('config_show_option_prices') == '1' and not is_knawat_product %}
                                                                {% if option_value.price %}
                                                                ({{ option_value.price_prefix }}{{ option_value.price }})
                                                                {% endif %}
                                                                {% endif %}
                                                                {# /OPTION PRICE #}
                                                            </option>
                                                            {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                        <div id="relational_option_hidden_{{ option.option_id }}">
                                                            {% if (not opt_relational_status) or (opt_relational_status and option.option_id not in opt_relational_childs) %}
                                                            {% for option_value in option.option_value %}
                                                            <input type="hidden"
                                                                id="select-price-{{ option_value.product_option_value_id }}"
                                                                value="{{ option_value.price_value }}">
                                                            <input type="hidden"
                                                                id="select-prifex-{{ option_value.product_option_value_id }}"
                                                                value="{{ option_value.price_prefix }}">
                                                            {% endfor %}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                    <input type="hidden"
                                                        id="old_select_price-{{ option.product_option_id }}" value="">
                                                    <input type="hidden"
                                                        id="old_select_prefix-{{ option.product_option_id }}" value="">
                                                </div>
                                                {% endif %}

                                                <!-- ######################### Radio -->

                                                {% if option.type == 'radio' %}
                                                <fieldset id="option-{{ option.product_option_id }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option.product_option_id }}]">{{ option.name }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} </label>
                                                    <div class='row'>
                                                        {% for option_value in option.option_value %}
                                                        <div class="form-check">
                                                            <label class="form-check-label">
                                                                <input type="radio" class="form-check-input"
                                                                    name="option[{{ option['product_option_id'] }}]"
                                                                    id="option-value-{{ option_value['product_option_value_id'] }}"
                                                                    value="{{ option_value['product_option_value_id'] }}"
                                                                    onclick="getRadioPrice('{{ option_value['price_value'] }}', '{{ option_value['price_prefix'] }}','{{ option.product_option_id }}', 'radio')"
                                                                    {% if option_value.quantity <= 0 %}disabled="disabled"
                                                                    {% endif %}
                                                                    {% if option.product_option_id in selectedOptions|keys %}
                                                                    {% if option_value.product_option_value_id == selectedOptions[option.product_option_id] %}
                                                                    checked="checked" {% endif %} {% endif %}>
                                                                <span
                                                                    {% if option_value.quantity <= 0 %}class="over_line"
                                                                    {% endif %}>
                                                                    {{ option_value['name'] }}
                                                                </span>

                                                                {% if option_value.price %}
                                                                ({{ option_value.price_prefix }}{{ option_value.price }})&#x200E;
                                                                {% endif %}
                                                            </label>
                                                        </div>
                                                        {% endfor %}
                                                        <input type="hidden"
                                                            id="old_radio_price-{{ option.product_option_id }}"
                                                            value="">
                                                        <input type="hidden"
                                                            id="old_radio_prefix-{{ option.product_option_id }}"
                                                            value="">
                                                    </div>
                                                </fieldset>
                                                {% endif %}

                                                <!-- ######################### Checkbox -->

                                                {% if option.type == 'checkbox' %}
                                                <fieldset id="option-{{ option['product_option_id'] }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option['product_option_id'] }}]">{{ option['name'] }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} </label>
                                                    <div class="row">
                                                        {% for option_value in option.option_value %}

                                                        <div class="form-check">
                                                            <label class="form-check-label">
                                                                <input type="checkbox" class="form-check-input"
                                                                    name="option[{{ option['product_option_id'] }}][]"
                                                                    id="option-value-{{ option_value['product_option_value_id'] }}"
                                                                    value="{{ option_value['product_option_value_id'] }}"
                                                                    onclick="getCheckboxPrice('{{ option_value['price_value'] }}', '{{ option_value['price_prefix'] }}',this.checked)"
                                                                    {% if option_value.quantity <= 0 %}disabled="disabled"
                                                                    {% endif %}>

                                                                <span
                                                                    {% if option_value.quantity <= 0 %}class="over_line"
                                                                    {% endif %}>
                                                                    {{ option_value['name'] }}
                                                                </span>

                                                                {% if option_value.price %}
                                                                ({{ option_value.price_prefix }}{{ option_value.price }})&#x200E;
                                                                {% endif %}
                                                            </label>
                                                        </div>

                                                        {% endfor %}
                                                    </div>
                                                </fieldset>
                                                {% endif %}

                                                <!-- ######################### Image -->

                                                {% if option.type == 'image' %}
                                                <fieldset id="option-{{ option['product_option_id'] }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option['product_option_id'] }}]">{{ option['name'] }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} </label>
                                                    <div class="row">
                                                        {% for option_value in option.option_value %}

                                                        <div class="form-check">
                                                            <label class="form-check-label">
                                                                <input type="radio" class="form-check-input"
                                                                    name="option[{{ option['product_option_id'] }}]"
                                                                    value="{{ option_value['product_option_value_id'] }}"
                                                                    id="option-value-{{ option_value['product_option_value_id'] }}"
                                                                    onclick="getRadioPrice('{{ option_value['price_value'] }}', '{{ option_value['price_prefix'] }}','{{ option.product_option_id }}', 'radio')"
                                                                    {% if option_value.quantity <= 0 %}disabled="disabled"
                                                                    {% endif %} />
                                                                <img src="{{ option_value['image'] }}"
                                                                    alt="{{ option_value['name'] }}{{ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : ''}}" />

                                                                <span
                                                                    {% if option_value.quantity <= 0 %}class="over_line"
                                                                    {% endif %}>
                                                                    {{ option_value['name'] }}
                                                                </span>

                                                                {% if option_value.price %}
                                                                ({{ option_value.price_prefix }}{{ option_value.price }})&#x200E;
                                                                {% endif %}
                                                            </label>
                                                        </div>
                                                        {% endfor %}
                                                        <input type="hidden"
                                                            id="old_radio_price-{{ option.product_option_id }}"
                                                            value="">
                                                        <input type="hidden"
                                                            id="old_radio_prefix-{{ option.product_option_id }}"
                                                            value="">
                                                    </div>
                                                </fieldset>
                                                {% endif %}

                                                <!-- ######################### Text -->

                                                {% if option.type == 'text' %}
                                                <div id="option-{{ option['product_option_id'] }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option['product_option_id'] }}]">{{ option['name'] }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} </label>

                                                    <div class="control">
                                                        <input type="text" class="form-control"
                                                            name="option[{{ option['product_option_id'] }}]"
                                                            value="{{ option['option_value'] }}" />
                                                    </div>
                                                </div>
                                                {% endif %}

                                                <!-- ######################### Textarea -->

                                                {% if option.type == 'textarea' %}
                                                <div id="option-{{ option['product_option_id'] }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option['product_option_id'] }}]">{{ option['name'] }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} </label>

                                                    <div class="control">
                                                        <textarea class="form-control"
                                                            name="option[{{ option['product_option_id'] }}]" cols="40"
                                                            rows="5">{{ option['option_value'] }}</textarea>
                                                    </div>
                                                </div>
                                                {% endif %}

                                                <!-- ######################### File -->

                                                {% if option.type == 'file' %}
                                                <div id="option-{{ option['product_option_id'] }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option['product_option_id'] }}]">{{ option['name'] }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} </label>

                                                    <div class="control">
                                                        <input class="form-control button" type="button"
                                                            value="{{ lang('button_upload') }}"
                                                            id="button-option-{{ option['product_option_id'] }}">
                                                        <input type="hidden"
                                                            name="option[{{ option['product_option_id'] }}]" value="" />
                                                    </div>
                                                </div>
                                                {% endif %}

                                                <!-- ######################### Date -->

                                                {% if option.type == 'date' %}
                                                <div id="option-{{ option['product_option_id'] }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option['product_option_id'] }}]">{{ option['name'] }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} </label>

                                                    <div class="control">
                                                        <input class="form-control date" type="text"
                                                            name="option[{{ option['product_option_id'] }}]"
                                                            value="{{ option['option_value'] }}" />
                                                    </div>
                                                </div>
                                                {% endif %}

                                                <!-- ######################### Datetime -->

                                                {% if option.type == 'datetime' %}
                                                <div id="option-{{ option['product_option_id'] }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option['product_option_id'] }}]">{{ option['name'] }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} </label>

                                                    <div class="control">
                                                        <input class="form-control datetime" type="text"
                                                            name="option[{{ option['product_option_id'] }}]"
                                                            value="{{ option['option_value'] }}" />
                                                    </div>
                                                </div>
                                                {% endif %}

                                                <!-- ######################### Time -->

                                                {% if option.type == 'time' %}
                                                <div id="option-{{ option['product_option_id'] }}"
                                                    class="option form-group">
                                                    <label
                                                        for="option[{{ option['product_option_id'] }}]">{{ option['name'] }}
                                                        {{ option.required ? '<sup>*</sup>' : '' }} </label>

                                                    <div class="control">
                                                        <input class="form-control time" type="text"
                                                            name="option[{{ option['product_option_id'] }}]"
                                                            value="{{ option['option_value'] }}" />
                                                    </div>
                                                </div>
                                                {% endif %}

                                                {% endfor %}
                                            </div>
                                            {% endif %}

                                        </div>
                                        {% endif %}
                                        {#<div class="sub_description" style="display: none" >{{ sub_description }} <a href="#" class="sub_description_link">...</a></div>#}

                                        <!-- =====================================================================================-->
                                        <!-- ===================================/ Options Area  ===================================-->
                                        <!-- =====================================================================================-->
                                        {% if short_description != '' and show_meta_desc %}
                                        <p class="desc">{{short_description}}</p>
                                        {% endif %}

                                    </form>
                                </div>


                            </div>
                            <!-- Detail Info -->

                        </div>
                        <div
                            class="{{ image != '' or images|length > 0 ? 'col-md-5' : 'col-md-6' }} col-sm-12 col-xs-12 centerMob">


                            <p class="desc">
                                {% if minimum_limit > 1 %}
                                {{ lang('text_minimum')|format(minimum_limit) }} <br>
                                {% endif %}
                                {% if manufacturer and (config('show_brands') or config('config_show_manfacture_image')) %}
                                <span class="brand-name">{{ lang('text_manufacturer') }}</span>
                                <a class="brand-link" href="{{ manufacturers }}">
                                    {% if config('show_brands') %}
                                    {{ manufacturer }}
                                    {% endif %}
                                    {% if config('config_show_manfacture_image') %}
                                    <img class="brand-image" src="{{image(manufacturerimg) }}" alt="{{ manufacturer }}">
                                    {% endif %}
                                </a>
                                {% endif %}
                                <span class="model-name">{{ text_product_model }} {{ model }}</span>
                                {% if reward %}
                                <span class="reward-text">{{ lang('text_reward') }} {{ reward }}</span>
                                {% endif %}
                            </p>

                            <div class="product-add-form">
                                <div class="product-options-bottom clearfix">
                                    {% if ('-1' in price) or ('-1' in special) or seller.messaging %}
                                    <div class="detail-extralink">
                                        <input type="hidden" id="product_id" name="product_id" size="2"
                                            value="{{ product_id }}" />
                                        <div class="product-extra-link2">
                                            <!--####### Messaging Seller -->
                                            {% if seller.messaging %}
                                            <button type="button" title="{{ lang('button_req_quote') }}"
                                                onclick="window.location.href='index.php?route=account/messagingseller&seller_id={{ seller['seller_id'] }}&product_id={{product_id}}'"
                                                id="button_req_quote" class="action btn-cart addcart-link">
                                                {% set msMessage =  lang_printf('ms_seller_messaging_x', config('msconf_seller_title')[language_id]['single'] ?: lang('ms_seller_solo')) %}
                                                <span>{{ msMessage }}</span>
                                            </button>
                                            {% else %}
                                            {% if viewAddToCart %}
                                            <button type="button" title="{{ lang('button_req_quote') }}"
                                                onclick="contact_us('{{ product_id }}');" id="button_req_quote"
                                                class="action btn-cart addcart-link">
                                                <span>{{ lang('button_req_quote') }}</span>
                                            </button>
                                            {% endif %}
                                            {% endif %}
                                            <!--#######END Messaging Seller -->

                                            <div id="enquiry-{{ product_id }}" style="display:none">{{ product_name }}:
                                            </div>
                                            <a onclick="addToWishList('{{ product_id }}'); return false;"
                                                class="action wishlist-link" href="#"
                                                title="{{ lang('button_wishlist') }}"><i aria-hidden="true"
                                                    class="fa fa-heart"></i></a>
                                            <a onclick="addToCompare('{{ product_id }}'); return false;"
                                                class="iconFix actioncompare-link" href="#"
                                                title="{{ lang('button_compare') }}"><img style="width:24px;height:24px"
                                                    src="expandish/view/theme/souq/image/compare.png" alt="compare"></a>
                                            {# Product notify me when available App#}
                                            {% if product_notify_me is defined and product_notify_me %}
                                            <a onclick="addToNotifyMe('{{ product_id }}', 'direct'); return false;"
                                                class="action wishlist-link" href="javascript://"
                                                title="{{ lang('button_notifyme') }}">
                                                <i aria-hidden="true" class="fa fa-bell"></i>
                                            </a>
                                            {% endif  %}
                                            {# End Product notify me when available App#}
                                        </div>
                                    </div>
                                    {% else %}
                                    <div class="detail-extralink">
                                        <div class="product-extra-link2 addToCartBlock">
                                         {% if viewAddToCart %}
                                            <button type="submit" title="{{ localize('button_cart','button_cart') }}"
                                                onclick="return false;" id="button-cart"
                                                class="action btn-cart addcart-link btn-block">
                                                <span>{{ localize('button_cart','button_cart') }}</span>
                                            </button>
                                             {% endif  %}
                                            {% if product_designer is defined and product_designer == 1 %}

                                            <button type="button" title="{{ lang('pd_btn_text') }}"
                                                onclick="showpopup({{ product_id }},'FFFFFF');"
                                                class="action btn-cart addcart-link">
                                                <span>{{ lang('pd_btn_text') }}</span>
                                            </button>

                                            <script>
                                                function showpopup(pid, ccode) {
                                                    var frameSrc =
                                                        'index.php?route=module/product_designer&product_id=' + pid +
                                                        '&procolor=' + ccode;
                                                    $('#design_pop_frame').attr("src", frameSrc);
                                                    $('#myModal').modal({
                                                        show: true,
                                                        backdrop: false
                                                    });
                                                }

                                                function closeModel() {
                                                    $('#myModal').modal('hide');
                                                }

                                                function addcart(proId, qty, cust_id) {
                                                    addToCartCustom(proId, qty, cust_id);
                                                }
                                            </script>

                                            <style>
                                                .modal {
                                                    text-align: center;
                                                    padding: 0 !important;
                                                }

                                                .modal:before {
                                                    content: '';
                                                    display: inline-block;
                                                    height: 100%;
                                                    vertical-align: middle;
                                                    margin-right: -4px;
                                                }

                                                .modal-dialog {
                                                    display: inline-block;
                                                    text-align: left;
                                                    vertical-align: middle;
                                                }
                                            </style>
                                            {% endif %}
                                        </div>

                                        {% if product_notify_me is defined and product_notify_me %}
                                        <div class="detail-qty border radius form-qty" style="width: 48%">
                                            {% else  %}
                                            <div class="detail-qty border radius form-qty">
                                                {% endif  %}
                                                <input type="text" name="quantity" class="form-control input-qty"
                                                    value='{{ minimum_limit }}' id="qty1" name="qty1" maxlength="12"
                                                    minlength="1"
                                                    style=" border: none;     box-shadow: none;    position: relative;    left: -10px;">

                                                <button class="btn-number qty-down qtyminus"><i class="fa fa-caret-down"
                                                        aria-hidden="true"></i></button>
                                                <button class="btn-number qty-up qtyplus"><i class="fa fa-caret-up"
                                                        aria-hidden="true"></i></button>

                                            </div>

                                            <div class="product-extra-link2" id="wishcompare">
                                                <a onclick="addToWishList('{{ product_id }}'); return false;"
                                                    class="action wishlist-link" href="#"
                                                    title="{{ lang('button_wishlist') }}"><i aria-hidden="true"
                                                        class="fa fa-heart"></i></a>
                                                <a onclick="addToCompare('{{ product_id }}'); return false;"
                                                    class="iconFix actioncompare-link" href="#"
                                                    title="{{ lang('button_compare') }}"><img
                                                        style="width:24px;height:24px"
                                                        src="expandish/view/theme/souq/image/compare.png"
                                                        alt="compare"></a>
                                                {# Product notify me when available App#}
                                                {% if product_notify_me is defined and product_notify_me %}
                                                <a onclick="addToNotifyMe('{{ product_id }}', 'direct'); return false;"
                                                    class="action wishlist-link" href="javascript://"
                                                    title="{{ lang('button_notifyme') }}">
                                                    <i aria-hidden="true" class="fa fa-bell"></i>
                                                </a>
                                                {% endif  %}
                                                {# End Product notify me when available App#}
                                            </div>

                                            <input type="hidden" id="product_id" name="product_id" size="2"
                                                value="{{ product_id }}" />

                                        </div>
                                        {% endif %}
                                    </div>
                                </div>

                                {% if seller.nickname != '' %}
                                <hr style="margin-top:-15px; margin-bottom:10px;" />
                                <p>{{ seller_title }}</p>
                                {% if seller.nickname != '' %}
                                <h6 class="title-detail"><a href="{{seller.href}}">{{seller.nickname}}</a></h6>
                                {% endif %}
                                {% if seller.country != '' %}
                                <p>{{seller.country}} {{seller.zone}}</p>
                                {% endif %}
                                {% if seller.website != '' %}
                                <p><b>{{ lang('Seller_Website') }} :</b> {{seller.website}}</p>
                                {% endif %}
                                {% if seller.company != '' %}
                                <p><b> {{ lang('Seller_Company') }} :</b> {{seller.company}}</p>
                                {% endif %}
                                {% if seller.total_sales != 0 %}
                                <p><b>{{ lang('Seller_Sales') }}</b> {{seller.total_sales}}
                                    {% endif %}

                                    {% if seller.is_custom_fields %}
                                    {% for field in seller.custom_fields %}
                                    <p><b>{{ field['label'] }}:</b> {{ field['value'] }}</p>
                                    {% endfor %}
                                    {% endif %}

                                    {% if config('msconf_sellers_totals') == 'yes_show' %}
                                    <b>{{ lang('Seller_Products') }}:</b> {{seller.total_products}}</p>
                                {% elseif config('msconf_sellers_totals') == 'yes_show_if_value' and seller.total_products != 0 %}
                                <b>{{ lang('Seller_Products') }}:</b> {{seller.total_products}}</p>
                                {% endif %}
                                {% if(config('msconf_enable_private_messaging') and config('msconf_enable_contact_seller') in [1, 3]) %}
                                <p><a href="index.php?route=seller/catalog-seller/jxRenderContactDialog&seller_id={{ seller['seller_id'] }}"
                                        style="color: black; text-decoration: none;"
                                        class="ms-sellercontact btn btn-inline"
                                        title="Contact">{{ config('msconf_seller_title')[language_id]['single'] ? lang('ms_sellercontact') ~' '~ config('msconf_seller_title')[language_id]['single'] : lang('ms_sellercontact') }}</a>
                                </p>
                                {% endif %}
                                {% endif %}

                                <div class="share">
                                    {# Start ::  Share Butons #}
                                    <script type="text/javascript"
                                        src="//s7.addthis.com/js/300/addthis_widget.js#pubid={{ product_addthis_id }}">
                                    </script>
                                    <div class="addthis_sharing_toolbox"></div>
                                    {# End ::  Share Butons #}
                                </div>

                            </div>
                            <!-- sales booster -->
                            {% if salesBooster %}
                            {{ include('manymore/template/product/sales_booster.expand') }}
                            {% endif %}
                            <!-- end sales booster -->
                        </div>
                    </div>
                    <div class="tab-detal hoz-tab-detail">
                        <div class="hoz-tab-title">
                            <ul>
                                <li class="active">
                                    <a href="#description" data-toggle="tab">{{ lang('tab_description') }}</a>
                                </li>

                                {% if attribute_groups %}
                                <li role="presentation"><a href="#attributes" role="tab"
                                        data-toggle="tab">{{ lang('tab_attribute') }}</a></li>
                                {% endif %}

                                {% if review_status %}
                                <li role="presentation" id="reviewTab"><a href="#reviews" role="tab"
                                        data-toggle="tab">{{ lang('tab_review')|format(reviews_count) }}</a>
                                </li>
                                {% endif %}

                                {% if show_meta_tags %}
                                <li role="presentation"><a href="#tags" role="tab"
                                        data-toggle="tab">{{ lang('text_tags') }}</a></li>
                                {% endif %}
                            </ul>
                        </div>
                        <div class="tab-content">
                            <div id="description" class="tab-pane active">
                                <div class="hoz-tab-content">
                                    <div class="content-detail-tab">
                                        <div class="detail-tab-info show_bullets">
                                            <!-- sales booster header -->
                                            {% if salesBooster and sales_booster['hLayout']['description'] %}
                                            {{ sales_booster['hLayout']['description'] }}
                                            {% endif %}
                                            <!-- end sales booster header -->

                                            <p class="desc">{{ description }}</p>

                                            <!-- sales booster footer -->
                                            {% if salesBooster and sales_booster['fLayout']['description'] %}
                                            {{ sales_booster['fLayout']['description'] }}
                                            {% endif %}
                                            <!-- end sales booster footer -->

                                            {{ include('default/template/product/seller_notes.expand') }}

                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% if attribute_groups %}
                            <div id="attributes" class="tab-pane">
                                <div class="hoz-tab-content">
                                    <div class="content-detail-tab">
                                        <div class="detail-tab-info">
                                            <table class="attribute table">
                                                {% for attribute_group in attribute_groups %}
                                                {% if attribute_group['name'] != 'NOSHOW' %}
                                                <thead>
                                                    <tr>
                                                        <th colspan="2">{{ attribute_group['name'] }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for attribute in attribute_group['attribute'] %}
                                                    <tr>
                                                        <td>{{ attribute['name'] }}</td>
                                                        <td>{{ attribute['text'] }}</td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                                {% endif %}
                                                {% endfor %}
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            {% if review_status %}
                            <div id="reviews" class="tab-pane ">
                                <div class="hoz-tab-content">
                                    <div class="content-detail-tab">
                                        <div class="detail-tab-info">
                                            <div id="review"></div>

                                            <div class="page-title-base">
                                                <h2 class="title-base" id="review-title">{{ text_your_payment }}</h2>
                                            </div>

                                            <div class="review-form">

                                                <div class="form-group">
                                                    <b>{{ lang('entry_rating') }}</b>&nbsp;&nbsp;&nbsp;&nbsp;<span>{{ lang('entry_bad') }}</span>&nbsp;
                                                    <input type="radio" name="rating" value="1" />
                                                    &nbsp;
                                                    <input type="radio" name="rating" value="2" />
                                                    &nbsp;
                                                    <input type="radio" name="rating" value="3" />
                                                    &nbsp;
                                                    <input type="radio" name="rating" value="4" />
                                                    &nbsp;
                                                    <input type="radio" name="rating" value="5" />
                                                    &nbsp;<span>{{ lang('entry_good') }}</span>
                                                </div>

                                                {% if customer_name is not defined %}
                                                <div class="form-group">
                                                    <label for="name">{{ lang('entry_name') }}</label>
                                                    <input type="text" name="name" class="form-control" id="name"
                                                        value="{{customer_name}}" />
                                                </div>
                                                {% else %}
                                                <input type="hidden" name="name" class="form-control"
                                                    value="{{customer_name}}" />
                                                {% endif %}
                                                <div class="form-group">
                                                    <label for="text">{{ lang('entry_review') }}</label>
                                                    <textarea name="text" rows="8" class="form-control"
                                                        id="text"></textarea>
                                                    <div class="text-muted">{{ lang('text_note') }}</div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="form-group">
                                                        <label for="captcha">{{ lang('entry_captcha') }}</label>
                                                        <input type="text" name="captcha" style="width: 150px"
                                                            class="form-control" id="captcha" value="" />
                                                        <br />
                                                        <img src="index.php?route=common/captcha" alt="" id="captcha" />
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="buttons">
                                                <div class="pull-right">
                                                    <a id="button-review" value="{{ lang('button_continue') }}"
                                                        class="btn btn-inline">{{ lang('button_continue') }}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            {% if tags %}
                            <div id="tags" class="tab-pane ">
                                <div class="hoz-tab-content">
                                    <div class="content-detail-tab">
                                        <div class="detail-tab-info">
                                            <p class="desc">
                                                {% for tag in tags %}
                                                <a
                                                    href="{{ tag.href }}">{{ tag.tag }}{{ loop.last == false ? ', ' : '' }}</a>
                                                {% endfor %}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <!-- End Main Detail -->

                {% set items_products = related_products %}
                {% set items_count = items_products|length %}
                {% if related_products %}
                <div class="product-related border radius">
                    <h2 class="title18">{{ localize('text_tab_related','tab_related') }} ({{ related_products|length}})
                    </h2>
                    <div class="product-related-slider">
                        <div class="wrap-item" data-itemscustom="[[0,1],[480,2],[980,3],[1200,5]]"
                            data-pagination="false" data-navigation="true">
                            {% for product in items_products %}
                            <div class="item-pro-color">
                                <div class="product-thumb">
                                    <a href="{{ product['href'] }}" class="product-thumb-link">
                                        <img data-color="black" class="active"
                                            src="{{ image(product['image'], 270, 270) }}" alt="{{ product['name'] }}">
                                    </a>
                                </div>
                                <div class="product-info">
                                    <h3 class="product-title">
                                        <a href="{{ product['href'] }}">{{ product['name']}}</a>
                                    </h3>
                                    <div class="product-price">
                                        {% if not seller.disable_price %}
                                        {% if ('-1' not in  product['price']) and ('-1' not in product['special'])  %}
                                        {% if product['special'] %}
                                        <ins><span>{{ product['special']}}</span></ins>
                                        <del><span>{{ product['price']}}</span></del><br>
                                        {% else %}
                                        <ins><span>{{ product['price']}}</span></ins><br>
                                        {% endif %}
                                        {% else %}

                                        <ins>
                                            <span class="clickable"
                                                onclick="contact_us('{{ product['product_id'] }}');">
                                                {{ lang('button_req_quote') }}
                                            </span>
                                        </ins><br>
                                        {% endif %}
                                        {% endif %}
                                        {% if product['relatedProductsmessaging'] %}
                                        <ins>
                                            <span class="clickable"
                                                onclick="window.location.href='index.php?route=account/messagingseller&seller_id={{ product['relatedProductsseller_id'] }}&product_id={{product['product_id'] }}'">
                                                {{ lang('ms_seller_messaging') }}
                                            </span>
                                        </ins>
                                        {% else %}
                                         {% if viewAddToCart %}
                                        <ins>
                                            <span class="clickable"
                                                onclick="addToCart({{ product.product_id }}, 1); return false;">
                                                {{ lang('button_cart') }}
                                            </span>
                                        </ins>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}
                <!-- End Product Related -->


            </div>

        </div>

    </div>
    <!-- End Content -->

    {# Product notify me when available App#}
    {% if product_notify_me is defined and product_notify_me %}
    {{ include('default/template/product/product_notify_me.expand') }}
    {% endif %}
    {# Product notify me when available App#}

    <script type="text/javascript" src="{{ jslink('js/libs/TimeCircles.js') }}"></script>

    <script type="text/javascript">
        var text_select = "{{ lang('text_select') }}";

        $(document).ready(function () {
            $('.sellerBox').hide();
            $('.sellerTrigger').click(function () {
                $('.sellerBox').slideToggle();
                event.preventDefault();
            });
        });
    </script>

    {% if options %}
    <script type="text/javascript" src="{{ jslink('js/ajaxupload.js') }}"></script>
    {% for option in options %}
    {% if option.type == 'file' %}
    <script type="text/javascript">
        new AjaxUpload("#button-option-{{ option['product_option_id'] }}", {
            action: 'index.php?route=product/product/upload',
            name: 'file',
            autoSubmit: true,
            responseType: 'json',
            onSubmit: function (file, extension) {
                $("#button-option-{{ option['product_option_id'] }}").after(
                    '<img src="catalog/view/theme/default/image/loading.gif" class="loading" style="padding-left: 5px;" />'
                );
                $("#button-option-{{ option['product_option_id'] }}").attr('disabled', true);
            },
            onComplete: function (file, json) {
                $("#button-option-{{ option['product_option_id'] }}").attr('disabled', false);

                $('.error').remove();

                if (json['success']) {
                    alert(json['success']);

                    $('input[name=\'option[{{ option["product_option_id"] }}]\']').attr('value', json[
                        'file']);
                }

                if (json['error']) {
                    $('#option-{{ option["product_option_id"] }}').after('<span class="error">' + json[
                            'error'] +
                        '</span>');
                }

                $('.loading').remove();
            }
        });
    </script>
    {% endif %}
    {% endfor %}
    {% endif %}



    <script type="text/javascript">
        $(document).on('click', '#review .pagination a', function () {
            $('#review').fadeOut('slow');

            $('#review').load(this.href);

            $('#review').fadeIn('slow');

            return false;
        });

        $('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');

        $('#button-review').bind('click', function () {
            $.ajax({
                url: 'index.php?route=product/product/write&product_id={{ product_id }}',
                type: 'post',
                dataType: 'json',
                data: 'name=' + encodeURIComponent($('input[name=\'name\']').val()) + '&text=' +
                    encodeURIComponent($('textarea[name=\'text\']').val()) + '&rating=' +
                    encodeURIComponent($('input[name=\'rating\']:checked').val() ? $(
                        'input[name=\'rating\']:checked').val() : '') + '&captcha=' +
                    encodeURIComponent($('input[name=\'captcha\']').val()),
                beforeSend: function () {
                    $('.page-title-base')[0].style.setProperty('display', 'block', 'important');
                    $('.success, .warning').remove();
                    $('#button-review').attr('disabled', true);
                    $('#review-title').after('<div class="attention alert alert-warning"><img src="{{ asset('image/loading.gif') }}" alt="" /> {{ lang('text_wait') }}</div>');
                },
                complete: function () {
                    $('#button-review').attr('disabled', false);
                    $('.attention').remove();
                },
                success: function (data) {
                    if (data['error']) {
                        $('#review-title').after('<div class="warning alert alert-danger">' + data[
                            'error'] + '</div>');
                    }

                    if (data['success']) {
                        $('#review-title').after('<div class="success alert alert-success">' + data[
                            'success'] + '</div>');

                        {% if customer_name is not defined %}
                        $('input[name=\'name\']').val(''); 
                        {% endif %}
                        $('textarea[name=\'text\']').val('');
                        $('input[name=\'rating\']:checked').attr('checked', '');
                        $('input[name=\'captcha\']').val('');
                    }
                }
            });
        });
    </script>
    <!-- current currency decimal places to be used in option update price calculation -->
    <input id="currency_decimal_places" type="hidden" value="{{ currency_decimal_places }}">
    <input id="thousand_point" type="hidden" value="{{ lang('thousand_point') }}">
    <script type="text/javascript" src="expandish/view/javascript/product/options_update_price.js?v=1.4"></script>
    <script type="text/javascript">
        // Price per meter
        function showSetMeterModal() {
            $('#myModalPrMeter').modal({
                show: true
            });
        }

        function showCurtainSellerModal() {
            $('#curtainSellerModal').modal({
                show: true
            });
        }

        function setMeterAction(closeAction) {
            var wd = $('#set_meter_w').val();
            var ln = $('#set_meter_l').val();
            let dr = $('#set_meter_d').val();
            let drw = $('#set_meter_dw').val();
            var is_m_default_unit = true;

            {% if price_per_meter_settings['default_unit'] != 'm' %}
                var is_m_default_unit = false;
            {% endif %}

            if (!is_m_default_unit) {
                wd = wd / 100;
                ln = ln / 100;
            }

            let dimention = wd * ln;
            let permiter = (wd * 2) + (ln * 2);

            let prcMain = parseFloat('{{ price_meter_data['main_meter_price '] }}');
            let prc_perc_main = '{{ price_meter_data['main_price_percentage '] }}';

            if (prc_perc_main != '')
                prc_perc_main = parseFloat(prc_perc_main);
            else
                prc_perc_main = 0;

            let mainPKsize = parseFloat('{{ price_meter_data['main_package_size '] }}');
            let mainBoxs = parseFloat(Math.ceil(dimention / mainPKsize));

            /* Main unit*/
            let Underlaymen = (mainBoxs * mainPKsize);
            let addingPercentageMain = ((prc_perc_main / 100) * Underlaymen);
            //Underlaymen = Underlaymen + addingPercentageMain;
            let totalPriceMain = ((Underlaymen + addingPercentageMain) * prcMain);

            /* metal profiles*/
            let metalPKsize = parseFloat('{{ price_meter_data['metalprofile_package_size '] }}');
            let allDoorWidth = drw * dr;
            let metalProfiles = 0;
            if (allDoorWidth) {
                metalProfiles = Math.ceil(allDoorWidth / metalPKsize);
            }

            /* skirtings */
            let skiPKsize = parseFloat('{{ price_meter_data['skirtings_package_size '] }}');
            let skiBoxs = Math.ceil(permiter / skiPKsize);
            let skirtings = skiBoxs * skiPKsize;
            if (!skirtings)
                skirtings = 0;

            let currL = '{{ currency_symbols["left"] }}';
            let currR = '{{ currency_symbols["right"] }}';



            let totalPriceSki = 0; 
            {% if price_meter_data['skirtings_status'] == 1 %}
            let prcSki = '{{ price_meter_data['skirtings_meter_price '] }}';
            if (prcSki != '')
                prcSki = parseFloat(prcSki);
            else
                prcSki = 0;
            let prc_perc_ski = '{{ price_meter_data['skirtings_price_percentage '] }}';
            if (prc_perc_ski != '')
                prc_perc_ski = parseFloat(prc_perc_ski);
            else
                prc_perc_ski = 0;

            if (prcSki > 0) {
                let addingPercentageSki = ((prc_perc_ski / 100) * skirtings);
                totalPriceSki = ((skirtings + addingPercentageSki) * prcSki);
            } 
            {% endif %}

            let totalPriceMetal = 0; 
            {% if price_meter_data['metalprofile_status'] == 1 %}
            let prcMetal = '{{ price_meter_data['metalprofile_meter_price '] }}';
            if (prcMetal != '')
                prcMetal = parseFloat(prcMetal);
            else
                prcMetal = 0;
            let prc_perc_metal = '{{ price_meter_data['metalprofile_price_percentage '] }}';
            if (prc_perc_metal != '')
                prc_perc_metal = parseFloat(prc_perc_metal);
            else
                prc_perc_metal = 0;


            if (prcMetal > 0) {
                let addingPercentageMetal = ((prc_perc_metal / 100) * metalProfiles);
                totalPriceMetal = ((metalProfiles + addingPercentageMetal) * prcMetal);
            } 
            {% endif %}

            let totalPrice = parseFloat(totalPriceMain) + parseFloat(totalPriceSki) + parseFloat(totalPriceMetal);
            if (wd > 0 && ln > 0) {
                $('#set_meter_wl').val(dimention.toFixed(2));
                $('.prMeterMain').text(Underlaymen.toFixed(2));
                $('.prMeterP').text(permiter);
                $('.prMeterMainBoxs').text(mainBoxs);
                $('.prMeterSki').text(skirtings.toFixed(2));
                $('.prMeterMetal').text(metalProfiles);

                $('.prMeterPrice').text(currL + totalPrice.toLocaleString(2) + currR);
                if (closeAction) {
                    $('#myModalPrMeter').modal('hide');
                }
                $('#set_meter_on').val(1);
            }
        }
        //////////////////////////////

        $('#button-cart, #button-cart-sb').bind('click', function () {

            {% if pricePerMeters == 1 and price_meter_data['main_status'] == 1 %}
            if ($('#set_meter_on').val() == 0) {
                $('#myModalPrMeter').modal({
                    show: true
                });
                return;
            } 
            {% endif %}

            {% if curtain_seller is defined and curtain_seller['isEnabled'] == true %}
            if ($('#curtain_seller_permission_to_add_to_cart').val() != 'goodtogo') {
                showCurtainSellerModal();
                return;
            } {% endif %}
            $.ajax({
                url: 'index.php?route=checkout/cart/add',
                type: 'post',
                data: $(
                    '.product-add-form input[type=\'text\'], .product-add-form input[type=\'hidden\'], .product-add-form input[type=\'radio\']:checked, .product-add-form input[type=\'checkbox\']:checked, .product-add-form select, .product-add-form textarea, #minimum_deposit_customer_price,#minimum_deposit_price'
                ),
                dataType: 'json',
                success: function (json) {
                    if (json['fb_data_track']) {
                        fbq('track', json['fb_data_track']['event'], {
                            "Product Name": json['fb_data_track']['product_name'],
                            "content_type": json['fb_data_track']['content_type'],
                            "content_ids": json['fb_data_track']['content_ids'],
                            "value": json['fb_data_track']['value'],
                            "currency": json['fb_data_track']['currency'],
                            "product_catalog_id": json['fb_data_track'][
                                'product_catalog_id'
                            ],
                        });
                    }
                    if (json['redirect']) {
                        window.location.href = json['redirect'];
                    }
                    if (json['success'] == 'affiliate_link') {
                        document.location = json['affiliate_link'];
                        return;
                    }

                    $('.alert-success, .alert-warning, .alert-attention, .alert-information, .alert-error')
                        .remove();

                    if (json['error']) {
                        /*
                        if (json['error']['option']) {
                            for (i in json['error']['option']) {
                                $('#option-' + i).after('<span class="error">' + json['error']['option'][i] + '</span>');
                            }
                        }
                        */
                        if (json['error']['profile']) {
                            $('select[name="profile_id"]').after('<span class="error">' + json[
                                'error']['profile'] + '</span>');
                        }

                        if (json['error']['minimum_deposit']) {
                            $('#DepositAlert').html('<div class="alert alert-danger">' + json[
                                    'error']['minimum_deposit'] +
                                '<button type="button" class="close" data-dismiss="alert">&times;</button></div>'
                            );
                        }
                    }
                    if (json['limit_order_from_one_Seller'] == '1') {
                        limitOrderFromOneSeller(json);
                    }

                    if (json['success']) {
                        $('#notification').html(
                            '<br><div class="alert alert-success alert-dismissible" style="display: none;" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                            json['success'] + '</div>');

                        $('#counterLabel').html(json['product_count']);

                        $.get('index.php?route=common/cart', function (html) {
                            $('#cartDropList').html(html);
                        });

                        if (json['enable_order_popup'] != '1') {
                            $('html, body').animate({
                                scrollTop: 0
                            }, 'slow');
                            $('.alert-success').fadeIn('slow');
                        }

                        if (json['enable_order_popup'] == '1') {
                            $('head').append(
                                "<style type='text/css'>.customAddtoCart .ui-dialog-titlebar.ui-widget-header.ui-corner-all.ui-helper-clearfix {display: none;} .customAddtoCart div#add-to-cart-dialog {min-height: 1px !important;} [dir=rtl] .ui-widget {font-family: 'Droid Arabic Kufi', 'droid_serifregular' !important;}</style>"
                            );

                            $('body').append(
                                '<div id="add-to-cart-dialog" style="display:none;"><div class="add-cart-icon"><i class="fa fa-check"></i></div><div class="add-cart-content">' +
                                json['text_cart_dialog'] + '</div></div>');

                            $("#add-to-cart-dialog").dialog({
                                modal: true,
                                draggable: false,
                                resizable: false,
                                position: ['top', 'center'],
                                show: 'blind',
                                hide: 'blind',
                                width: 450,
                                dialogClass: 'ui-dialog-osx customAddtoCart addToCartDialog',
                                buttons: [{
                                        text: json['text_cart_dialog_continue'],
                                        click: function () {
                                            $(this).dialog("close");
                                        }
                                    },
                                    {
                                        text: json['text_cart_dialog_cart'],
                                        click: function () {
                                            window.location.href = json[
                                                'cart_link'];
                                        }
                                    }
                                ]
                            });
                        }
                    }

                    if (typeof (json['error']) != "undefined") {
                        if (typeof (json['error']['option']) != "undefined") {
                            $.each(json['error']['option'], function (index, error) {
                                $('#notification').html(
                                    '<br><div class="alert alert-warning alert-dismissible" style="display: none;" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                                    error + '</div>');

                                $('.alert-warning').fadeIn('slow');

                                $('html, body').animate({
                                    scrollTop: 0
                                }, 'slow');
                            });
                        } else {
                            $.each(json['error'], function (index, error) {
                                $('#notification').html(
                                    '<br><div class="alert alert-warning alert-dismissible" style="display: none;" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                                    error + '</div>');

                                $('.alert-warning').fadeIn('slow');

                                $('html, body').animate({
                                    scrollTop: 0
                                }, 'slow');
                            });
                        }
                    }
                }
            });
        });


        function addToWishList(product_id) {
            $.ajax({
                url: 'index.php?route=account/wishlist/add',
                type: 'post',
                data: $(
                    '.product-add-form input[type=\'text\'], .product-add-form input[type=\'hidden\'], .product-add-form input[type=\'radio\']:checked, .product-add-form input[type=\'checkbox\']:checked, .product-add-form select, .product-add-form textarea'
                ),
                dataType: 'json',
                success: function (json) {
                    $('.alert-success, .alert-warning, .alert-attention, .alert-information').remove();

                    if (json['success']) {
                        $('#notification').html(
                            '<br><div class="alert alert-success alert-dismissible" style="display: none;" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
                            json['success'] + '</div>');

                        $('.alert-success').fadeIn('slow');

                        $('#wishlist-total').html(json['total']);

                        $('html, body').animate({
                            scrollTop: 0
                        }, 'slow');
                    }
                }
            });
        }
    </script>

    <script type="text/javascript" src="expandish/view/javascript/jquery/ui/jquery-ui-timepicker-addon.js"></script>

    <script type="text/javascript">
        var oldJqVersion = $;

        $(document).ready(function () {
            $('.sub_description_link').click(function (e) {
                    e.preventDefault();
                    $('html, body').animate({
                        scrollTop: $("p.desc").offset().top
                    }, 500)
                }),

                {#
                    $('.slider .slides li:not(.clone) a ').fancybox({
                        hash: false,
                        thumbs: {
                            autoStart: true
                        }
                    });
                #}

            $('.reviewTrigger').click(function () {
                $('.hoz-tab-detail  li').removeClass('active');
                $('#reviewTab').addClass('active');
                $('html,body').animate({
                    scrollTop: $(".hoz-tab-detail").offset().top - 150
                }, 'slow');
            });

            $('.date').datepicker({
                dateFormat: 'yy-mm-dd'
            });
            $('.datetime').datetimepicker({
                dateFormat: 'yy-mm-dd',
                timeFormat: 'h:m'
            });
            $('.time').timepicker({
                timeFormat: 'h:m'
            });

            $('.gallery-control ul li:first-child').addClass("active");
            $('.gallery-control ul li:first-child a').addClass("active");
        });
    </script>

    {% if rentalProducts == 1 %}
    <script type="text/javascript">
        var specialNumber = '{{ rental_special ? rental_special : rental_price }}';
        var priceNumber = '{{ rental_price  }}';
        var maxRentDays = '{{ max_rental_days }}';
        var disabledDates = '{{ disabled_days }}';
        var currencySymbols = JSON.parse('{{ currency_symbols|json_encode }}');
    </script>
    <script type="text/javascript" src="{{ commonLink('js/products/rentalProducts.js') }}"></script>
    {% endif %}

    {% include 'default/template/structured_data/product.expand' %}

    {% if option_images.enabled %}
    <script type="text/javascript">
        var console = console || {
            "log": function () {},
            "debug": function () {}
        };
        var poip_options_settings = {{ option_images.product_settings | json_encode() }};
        var poip_settings = {{ option_images.settings | json_encode() }};
        var poip_images = {{ option_images.images | json_encode() }};
        var poip_images_by_options = {{ option_images.images_by_options | json_encode() }};
        var poip_product_option_ids = {{ option_images.product_option_ids | json_encode() }};
    </script>


    <script type="text/javascript" src="expandish/view/theme/{83854355ddd7201bd7c365d7b9038514ca5ffae0{ Template_Name }}/js/imagepro.js"></script>
    {% endif %}

    {% if(rotate360) %}
    {{ include('abstract/template/product/rotate360/rotate360_script.expand') }}
    {% endif %}

    {% if integration_settings['mn_criteo_status'] %}
    {{ include('manymore/template/module/criteo/criteo_product.expand') }}
    {% endif %}
    {{ include('default/template/module/minimum_deposit/script.expand') }}