<style>
    .paypal__container .paypal-payment-container{
        margin: 30px;
        background-color: unset;
    }
    .paypal__container .paypal-payment-admin  .panel-heading , .paypal-payment-admin{
        background-color: unset;
        box-shadow: unset;
    }
    .paypal__container .paypal-payment-admin  .panel-heading .panel-title .text-bold{
        font-size: 14px;
        font-weight: bold;
        color: #2c2c35;
    }
    .paypal__container .paypal-payment-admin .panel-body .collapse .text-bold{
        color: #089b61 !important;
    }
    .paypal__container .paypal-payment-admin .panel-body .collapse .panel-title.text-bold{
        font-size: 12px;
        color: #2c2c35 !important;
        font-weight: normal !important;
    }
    .paypal__container .panel-fields .panel{
        box-shadow: 0 0 3px 0 rgba(21, 94, 188, 0.16);
    }
    .paypal__container .control-label{
        margin: 10px 0;
    }
    .paypal__container .paypal-payment-container .activate-controls .bottom-cancel-button{
        color: #2c2c35;
        font-size: 13px;
        font-weight: 600;
    }
    .paypal__container .paypal-payment-container .activate-controls .bottom-cancel-button.md-trigger{
        background-color: unset;
        border: none;
        color: #b4afd3;
        font-weight: 600;
        font-size: 13px;
        padding: 0;
    }
    .paypal__container .paypal-payment-container .activate-controls .bottom-cancel-button.md-trigger:hover{
        background-color: unset !important;
        box-shadow: unset;
    }
    .paypal__container .btn-ladda-spinner .ladda-label{
        display: flex !important;
        align-items: center;
        justify-content: center;
        padding: 0 18px;
    }
    .paypal__container .btn-ladda-spinner .ladda-label svg {
        margin: 0 10px;
    }
    .paypal__container .pr-0{
        padding-right: 0;
    }
    html[dir="rtl"] .paypal__container .btn-ladda-spinner .ladda-label svg{
        transform: rotateY(180deg);
    }
    html[dir="rtl"] .paypal__container .pr-0{
        padding-left: 0;
    }
    .paypal__container .row + .activate-controls{
        margin-top: 30px;
    }
    .paypal__container .paypal-payment-container  .row + .activate-controls{
        margin-top: 0;
    }
    .paypal__container .agree-btn{
        display: flex;
        align-items: center;
        justify-content: flex-end;
    }
    .paypal__container .agreeBtn{
        border-radius: 4px;
        background-color: #03a9f4;
        font-size: 13px;
        font-weight: 600;
        margin-top: 20px;
    }
    /* start bread cramp */
    .paypal__container .page-header--paypal{
        margin: 0 60px;
        background-color: unset;
    }
    .paypal__container .page-header--paypal .breadcrumb{
        display: none;
    }
    .paypal__container .page-header--paypal .page-header-content + .breadcrumb-line{
        border-bottom: 1px solid #e0ddef;
        margin: 0 32px;
        border-top: 0;
    }
    .paypal__container .page-header--paypal .page-title h5{
        display: flex;
        align-items: center;
    }
    .paypal__container .page-header--paypal .page-title h5 span{
        margin: 0 10px;
    }
    html[dir="rtl"] .paypal__container .page-title h5 a svg{
        transform: rotateY(180deg);
    }
    /* end breadcramp */
    .paypal__container .paypal-fields--admin .step{
        background-color: unset;
        margin: 0 40px;
    }
    .paypal__container .label-paypal h3{
        font-size: 14px;
        color: #2c2c35;
        font-weight: bold;
        text-transform: capitalize;
    }
    .paypal__container .paypal__info__description{
        color: #2c2c35;
        font-size: 12px;
    }
    .paypal__container .label-paypal__info__success{
        font-size: 12px;
        color: #089b61;
        font-weight: 600;
    }
    .paypal__container .label-paypal-container{
        background: #fff;
        padding: 25px;
        border-radius: 2px;
        box-shadow: 0 0 3px 0 rgba(21, 94, 188, 0.16);
        margin-bottom: 20px;
    }
    .paypal__container .label-paypal-container .checkbox-switchery{
        display: flex;
        justify-content: flex-end;
    }
    .paypal__container .label-paypal-container .row{
        display: flex;
        align-items: center;
    }
    .paypal__container .view-as{
        color: #2c2c35;
        font-weight: 600;
        font-size: 13px;
        text-transform: capitalize;
    }
    .paypal__container .label-paypal-container.label-status{
        padding: 14px 25px;
    }
    .paypal__container .pm-0{
        padding-bottom: 0;
    }
    .paypal__container .agree-description{
        font-size: 16px;
        font-weight: 500;
        color: #2c2c35;
        margin-bottom: 27px;
    }
    .paypal__container .agree-description span{
        margin: 0 10px;
    }
    .paypal__container .agree-role{
        line-height: 1.38;
        color: #2c2c35;
        font-size: 16px;
    }
    .paypal__container .disclaimerCheckBox{
        padding: 25px;
    }
    .paypal__container .p0{
        padding: 0;
    }
    .paypal__container .switchery-status{
        color: #2c2c35;
        font-size: 13px;
        font-weight: 600;
        margin: 0 10px;
    }
    .required-label{
        color: red;
    }
    .paypal-admin__loader{
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: #fff;
        z-index: 23;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .paypal-admin__loader .server-loading{
        display: flex;
        border-top: 2px solid #2196F3;
        border-radius: 50%;
        border-right: 2px solid #2196F3;
        border-bottom: 2px solid #2196f3;
        border-left: 2px solid #2196f300;
        width: 100px;
        height: 100px;
    }
    @media (max-width: 768px) {
        .paypal__container .paypal-fields--admin .step{
            margin: 0;
            padding: 0;
        }
        .paypal__container .disclaimerCheckBox{
            padding: 0;
        }
        .paypal__container .page-header--paypal{
            margin: 0;
        }
        .paypal__container .label-paypal-container .row{
            display: block;
        }
        .paypal__container .panel-body{
            padding: 0;
        }
        .paypal__container .header_text{
            font-size: 13px;
        }
        .paypal__container .paypal-box{
            margin: 15px 0;
        }
        .paypal__container .paypal-box .box-btn{
            font-size: 12px;
        }
    }
    .disabled--agree-btn{
        opacity: .5;
        pointer-events: none;
    }
</style>
{% if isApprovedStatus %}
    <!-- Start Form -->
    <form id="setting-payment" class="form" action="{{ link('payment/paypal/storePayPalData') }}">
        <div class="row">
            <!-- Status -->
             <!-- <div class="col-md-3">
                <div class="panel panel-white paypal-payment-admin">
                    <div class="panel-heading">
                        <h6 class="panel-title"><span class="text-bold">{{ lang('entry_status')|trim(':') }}</span></h6>
                        <div class="heading-elements not-collapsible">
                            <ul class="icons-list">
                                <li><a data-action="collapse" class=""></a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="collapse in" id="panel1">
                            <div class="form-group" id="paypal-group">
                                <div class="checkbox checkbox-switchery">
                                    <label>
                                        <input type="checkbox" onchange="changeStatus(this);" name="paypal_status" class="switchery" {{ paypal_status not in ['0', 0, 'off'] or paypal_status is null ? 'checked' }}>
                                        <span class="switchery-status">{{ paypal_status not in ['0', 0, 'off'] or paypal_status is null ? lang('text_enabled') : lang('text_disabled') }}</span>
                                    </label>
                                </div>
                                <span class="help-block"></span>
                                <span class="panel-title text-bold"> {{ lang("paypal_account_status") }}</span>
                                <span class="text-bold" style="color: green;">{{lang("paypal_account_connected")}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>  -->
           
            <!-- End of Status -->

            <!-- Fields -->
            <div class="panel-fields paypal-admin">
                <div class="paypal-admin__loader">
                    <div class="server-loading"></div>
                </div>
            <div class="">
                <div class="">
                    <!-- <div class="panel-heading">
                        <h6 class="panel-title"><span class="text-bold">{{ lang('paypal_button_settings') }}</span></h6>
                    </div> -->
                    <div class="panel-body pm-0">
                        <div class="collapse in" id="fields-panel">
                            <!-- color -->
                            <div class="form-group" id="input-button-color-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="label-paypal">
                                            <h3>{{ lang('paypal_accountInfo') }} </h3>
                                            <p class="label-paypal__info">
                                                <span class="paypal__info__description">{{lang('paypal_yourAccount')}}</span>
                                                <span class="text-bold label-paypal__info__success">  {{ paypal_status == "" ? lang('paypal_account_pending')  : lang("paypal_account_connected")}}</span>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="col-md-9">
                                        <div class="label-paypal-container">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label class="control-label" for="input-email">{{lang('paypal_email')}}</label>
                                                    <input type="text" class="form-control" id="input-email" value="{{ paypal_email }}" disabled>
                                                </div>  
                                                <div class="col-md-6">
                                                    <label class="control-label" for="input-payer-id">{{lang('paypal_payer_id')}}</label>
                                                    <input type="text" class="form-control" id="input-payer-id" value="{{ paypal_payer_id }}" disabled>
                                                </div>             
                                            </div>
                                         </div>
                                    </div>

                                    <!-- status -->
                                    <div class="col-md-3">
                                        <div class="label-paypal">
                                            <!-- <h3>Account info </h3> -->
                                            <p class="label-paypal__info">
                                                <h3 class="paypal__info__description">{{ lang("paypal_account_status") }}</h3>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="col-md-9">
                                        <div class="label-paypal-container label-status">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <p class="view-as">{{ lang('paypal_smartButtonsDesc') }}</p>
                                                </div>  
                                                <div class="col-md-6">
                                                    <div class="checkbox checkbox-switchery">
                                                        <span class="switchery-status">{{ paypal_view_checkout not in ['0', 0, 'off'] or paypal_status == "" ? lang('enabled_check') : lang('disabled_check') }}</span>
                                                        <label>
                                                            <input type="checkbox"  name="paypal_view_checkout" class="switchery" {{ paypal_status not in ['0', 0, 'off'] or paypal_status == "" ? 'checked' }}>
                                                        </label>
                                                    </div>
                                                    <span class="help-block"></span>
                                                </div>             
                                            </div>
                                         </div>
                                    </div>
                               
                                    <div class="col-md-3">
                                        <div class="label-paypal">
                                            <h3>{{ lang('paypal_smartButtons') }} </h3>
                                        </div>
                                    </div>
                                    <div class="col-md-9">
                                        <div class="label-paypal-container">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label class="control-label" for="input-button-color">{{lang('paypal_button_color')}}</label>
                                                    <select name="paypal_button_color" id="input-button-color" class="form-control">
                                                        {% for color in buttons_color %}
                                                            <option value="{{ color }}" {{ color == selected_color ? 'selected' : '' }}>{{lang('paypal_button_color_' ~ color)}}</option>
                                                        {% endfor %}                                    
                                                    </select>
                                                </div>  
                                                <div class="col-md-6">
                                                    <label class="control-label">{{ lang('paypal_product_page') }}</label>

                                                    <select name="paypal_addOnProduct" class="form-control addOnProduct">
                                                        <option value="-1" {{ paypal_addOnProduct == -1 or paypal_view_checkout  in ['0', 0, 'off'] ? 'selected' : '' }}>{{ lang('paypal_no_option') }}</option>
                                                        <option value="1" {{ paypal_addOnProduct == 1 ? 'selected' : '' }}>{{ lang('paypal_yes_option') }}</option>
                                                    </select>
                                                </div>             
                                                <span class="help-block"></span>
                                            </div>
                                         </div>
                                    </div>


                                    <div class="col-md-3">
                                        <div class="label-paypal">
                                            <h3> {{ lang('order_statuses') }} </h3>
                                        </div>
                                    </div>
                                    <div class="col-md-9">
                                        <div class="label-paypal-container required-paypal p0">
                                            <div class="panel-body">
                                                <div class="collapse in" id="order-statuses-panel">
                                                    <!-- Order Status -->
                                                    <div class="row"></div>

                                                    <div class="form-group col-md-6" id="gate2play-group">
                                                        <label for="paypal_order_status_pending" class="control-label">{{ lang('entry_pending_status') }} </label>
                                                        <select name="paypal_order_status_pending"  id="paypal_order_status_pending" class="form-control">
                                                           <option value="-1">{{ lang('select_status') }}</option>
                                                           {% for order_status in order_statuses %}
                                                                <option value="{{ order_status['order_status_id'] }}" {% if paypal_order_status_pending == order_status['order_status_id'] %} selected {% endif %}> 
                                                                    {{ order_status['name'] }} 
                                                                </option>
                                                            {% endfor %}
                                                        </select>
                                                        <span class="help-block"></span>
                                                    </div>

                                                    <!-- Failed Order Status -->
                                                    <div class="form-group col-md-6" id="gate2play-group">
                                                        <label for="entry_order_status_failed" class="control-label">{{ lang('entry_order_status_failed') }}<span class="required-label">*</span></label>
                                                        <select name="paypal_order_status_failed" id="entry_order_status_failed" class="form-control">
                                                        <option value="-1">{{ lang('select_status') }}</option>
                                                            {% for order_status in order_statuses %}
                                                                <option value="{{ order_status['order_status_id'] }}" {% if paypal_order_status_failed == order_status['order_status_id'] %} selected {% endif %}>
                                                                    {{ order_status['name'] }}
                                                                </option>
                                                            {% endfor %}
                                                        </select>
                                                        <span class="help-block"></span>
                                                    </div>
                                                    <!-- /Failed Order Status -->

                                                    <div class="form-group col-md-6" id="gate2play-group">
                                                        <label for="paypal_order_status_shipping" class="control-label">{{ lang('entry_shipped_status') }}</label>
                                                        <select name="paypal_order_status_shipping" id="paypal_order_status_shipping" class="form-control">
                                                            <option value="-1">{{ lang('select_status') }}</option>
                                                            {% for order_status in order_statuses %}
                                                                <option value="{{ order_status['order_status_id'] }}" {% if paypal_order_status_shipping == order_status['order_status_id'] %} selected {% endif %}>
                                                                    {{ order_status['name'] }}
                                                                </option>
                                                            {% endfor %}
                                                        </select>
                                                        <span class="help-block"></span>
                                                    </div>

                                                    <div class="form-group col-md-6" id="gate2play-group">
                                                        <label for="paypal_order_status_id" class="control-label">{{ lang('entry_order_status') }}<span class="required-label">*</span></label>
                                                        <select name="paypal_order_status_id" id="paypal_order_status_id" class="form-control">
                                                            <option value="-1">{{ lang('select_status') }}</option>
                                                            {% for order_status in order_statuses %}
                                                                <option value="{{ order_status['order_status_id'] }}" {% if paypal_order_status_id == order_status['order_status_id'] %} selected {% endif %}>
                                                                    {{ order_status['name'] }}
                                                                </option>
                                                            {% endfor %}
                                                        </select>
                                                        <span class="help-block"></span>
                                                    </div>

                                                    <input type="hidden" id="paypal_status" name="paypal_status" value="1">

                                                    <!-- /Order Status -->

                                                </div>
                                            </div>
                                         </div>
                                    </div>
                                </div>



{#                                {% if paypal_no_shipping is defined %}#}
{#                                <span>{{ paypal_no_shipping }} <a target="_blank" href="{{ shipping_link }}">link</a></span>#}
{#                                {% endif %}#}
                            </div>
                            <!-- /color -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- End of Fields -->
            <!-- Order Statuses -->
            <div class="">
                <div class="">
                    <!-- <div class="panel-heading">
                        <h6 class="panel-title"><span class="text-bold">{{ lang('order_statuses') }}</span></h6>
                        <div class="heading-elements not-collapsible">
                            <ul class="icons-list">
                                <li><a data-action="collapse" class=""></a></li>
                            </ul>
                        </div>
                    </div> -->
                  
                </div>
            </div>
            <!-- /Order Statuses -->
        </div>
        </div>

    </form>
    <!-- End Form -->
<input type="hidden" value="{{ lang('enabled_check') }}" class="enabled">
<input type="hidden" value="{{ lang('disabled_check') }}" class="disabled">

    <script>
        $(document).ready(function () {
            $('select').select2();


            // console.log($('#entry_order_status_failed').select2('val'));
            var requierdVar =  $('.required-paypal select').select2('val');
            // $('.required-paypal select').each(function (){
            //     console.log('pla')
            //     $(this).val();
            // });


            function checkSelectedStatusMap(){
            //     $('.required-paypal select').each(function (){
            //     var selectedValue;
            //      selectedValue =  $(this).find(':selected').val();
            //     if(selectedValue == -1){
            //         $('.activate-controls .bottom-save-button').addClass('disabled--agree-btn');
            //         return false
            //     } else{
            //         $('.activate-controls .bottom-save-button').removeClass('disabled--agree-btn');
            //     }
            // });
            }
            checkSelectedStatusMap();
            var selectedValue;
            $('.required-paypal select').on("change", function (e) { 
                checkSelectedStatusMap();
            });
            
            var enable = $('.enabled').val();
            var disabled = $('.disabled').val();
            if($('.switchery').prop("checked") == true){
                $('.switchery-status').text(enable);
                $("#paypal_status").val("1");
                $(".addOnProduct").removeAttr("disabled");

            }
            else if($(this).prop("checked") != true ){
                $('.switchery-status').text(disabled);
                $("#paypal_status").val("0");
                $(".addOnProduct").attr("disabled", "disabled");
            }
            $('.switchery').click(function(){
            if($(this).prop("checked") == true){
                $('.switchery-status').text(enable);
                $("#paypal_status").val("1");
                $(".addOnProduct").removeAttr("disabled");
            }
            else if($(this).prop("checked") != true){

                $('.switchery-status').text(disabled);
                $("#paypal_status").val("0");
                $(".addOnProduct").attr("disabled", "disabled");


            }
        });
        // var select = $('.required-paypal .select2-selection span').text().trim();
        // $('.required-paypal select').change(function (){
        //    var pla =  $('.required-paypal .select2-selection span').text().trim();
           
        //     console.log(pla);
        // });
        // console.log('select');
        // console.log(select);
        });

        function changeStatus(checkbox)
        {
            var self = $(checkbox);
            var switch_status = self.siblings('.switchery-status');

            if (self.is(':checked'))
            {
                switch_status.html("{{ lang('text_enabled') }}");
            } else
            {
                switch_status.html("{{ lang('text_disabled') }}");
            }
        }

    </script>
    {% elseif isPaypalZero %}
        <div class="row disclaimerCheckBox">
              <p id="check-agree" class="agree-description"> <input type="checkbox" class="agreeCheckbox" checked>
                <span for="check-agree">
                    {{ lang('agree_description') }}
                </span>
            </p>
             <p class="agree-role">{{ lang('entry_disclaimer_checkbox') }}</p>
        </div>
            <div class=" row textwt0V)FS6
-center agree-btn">
        <a class="btn btn-primary agreeBtn" href="{{ paypalZeroLink }}">{{ lang('continue_btn') }}</a>
            </div>

{#        {% elseif isPaypalSendOnly %}#}

{#            <div class="row">#}
{#                <span> {{ lang('entry_paypal_sendOnly') }}</span>#}
{#            </div>#}

{% else %}
    {% if paypalErrorMessage %}

        <div class="alert alert-danger">

            {% for errorMessage in paypalErrorMessage %}
                {{ errorMessage }} <br>
            {% endfor %}
        </div>
    {% endif%}

    <div class="text-center">
	
	
	{% if config("paypal_payment_before_onboarding") == '1' %}
		<div class="alert alert-info">
			<i class="fa fa-info-circle fa-fw fa-lg"></i>
			<!-- payment before onbaording allowed -->
			<strong>{{ lang('text_allowed') }}</strong> 
			<span> {{lang_printf('text_onboard_after_payment_enabled',constant("BILLING_DETAILS_EMAIL"))}}</span>
		</div>
		<span> {{ lang('text_need_to_connect_another_account') }}  </span> <br>
	<!-- payment before onbaording allowed -->
	{% endif %} 
        <a data-paypal-button="true" target="PPFrame" href='{{ addSallerUrl }}&displayMode=minibrowser'>
            <button type="button" class="paypal-btn">
                <i class="fa fa-paypal"></i>  {{ lang('entry_connect_paypal') }}
            </button>
        </a>
        <div trbidi="on">
            <script>
                (function (d, s, id) {
                    var js, ref = d.getElementsByTagName(s)[0];
                    if (!d.getElementById(id)) {
                        js = d.createElement(s);
                        js.id = id;
                        js.async = true;
                        js.src = "https://www.paypal.com/webapps/merchantboarding/js/lib/lightbox/partner.js";
                        ref.parentNode.insertBefore(js, ref);
                    }
                }(document, "script", "paypal-js"));

            </script>
        </div>

    </div>

{#        {% endif %}#}

{% endif %}

<script>

    $(".agreeCheckbox").change(function(e) {

        if(this.checked) {

            $(".agreeBtn").removeClass('disabled--agree-btn');

        } else {
            $(".agreeBtn").addClass('disabled--agree-btn');

        }
    });
    $(document).ready(function (){

        // if (window.location.href.indexOf("paypal") > -1) {
        //     $('body').addClass('paypal__container');
    
        // }

            // start breadcramp paypal
            $('.page-header').addClass('page-header--paypal');
            $('.page-header--paypal .page-title h5 a').html(`<svg xmlns="http://www.w3.org/2000/svg" width="15.178" height="10.502" viewBox="0 0 15.178 10.502">
                <g>
                    <g>
                        <path d="M14.33 136.4H2.9l2.971-2.957a.847.847 0 0 0-1.195-1.2l-4.426 4.4a.848.848 0 0 0 0 1.2l4.426 4.4a.847.847 0 0 0 1.195-1.2L2.9 138.1h11.43a.847.847 0 0 0 0-1.694z" transform="translate(0 -132)"/>
                    </g>
                </g>
            </svg>
            `);
            // end breadcramp paypal
            $('.paypal-admin').closest('.ship-steps-content').addClass('paypal-fields--admin');
            $('.paypal-fields--admin .step').addClass('paypal-payment-container');
            $('.paypal-fields--admin .activate-controls').addClass('col-md-9 col-md-offset-3');

        var status = '{{ paypal_account_connected }}';

        var isPaypalZero = '{{ isPaypalZero }}';

        if(  status == '1' && isPaypalZero != '1' ) {

            $(".step").not(".active").remove();
            $(".header-paypal-btn").remove();
            $(".discription-paypal-btn").remove();
        } else {
            if(isPaypalZero == '1') {
                $(".header-paypal-btn").remove();
                $(".discription-paypal-btn").remove();
            }
            $(".gray-color.mb-30").nextAll().remove();
        }
        $('.paypal-admin__loader').hide();
    });
</script>