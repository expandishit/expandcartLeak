{% extends "base.expand" %}
{% from "controls/breadcrumb.expand" import breadcrumb as breadcrumb %}
{% import "controls/forms.expand" as forms %}
{% set dualMenuEnabled = false %}


{% block title %}
{{ lang('heading_title') }}
{% endblock title %}

{% block breadcrumb %}
{{ breadcrumb(breadcrumbs) }}
{% endblock breadcrumb %}



{% block content %}

<form id="country_update" class="form" action="">


    <!-- from here -->

    <div class="row">
     {{ include('loghistory/logInfo.expand') }}
        <div class="col-md-6">
                    <div class="panel panel-flat">
                        <div class="panel-body">
                            <div class="tabbable nav-tabs-vertical nav-tabs-right">
                                <div class="tab-content">
                                    {% for lng in languages %}
                                        <div class="tab-pane has-padding {{ loop.first ? 'active' : '' }}"
                                             id="prouctDetailslangTab{{ lng['language_id'] }}">
                                            <div class="form-group"
                                                 id="name_{{ lng['language_id'] }}-group">
                                                <label class="control-label">
                                                    {{ lang('entry_name') }} <span class="text-danger">*</span>
                                                </label>
                                                <input disabled type="text" class="form-control"
                                                       id="name_{{ lng['language_id'] }}"
                                                       name="product_description[{{ lng['language_id'] }}][name]"
                                                       value="{{ old_value['product_description'][lng['language_id']]['name']|escape}}"
                                                >
                                                <span class="help-block"></span>
                                                <span class="text-muted">{{ langempty('entry_name_help') }}</span>
                                            </div>
                                            <div class="form-group"
                                                 id="description_{{ lng['language_id'] }}-group">
                                                <label class="control-label">
                                                    {{ lang('entry_description') }} <span class="text-danger">*</span>
                                                </label>
                                                <textarea
                                                        name="product_description[{{ lng['language_id'] }}][description]"
                                                        id="description_{{ lng['language_id'] }}"
                                                        class="summernote-fixed-height"
                                                >{{ old_value['product_description'][lng['language_id']]['description'] }}</textarea>
                                                <span class="help-block"></span>
                                                <span class="text-muted">
                                                    {{ langempty('entry_description_help') }}
                                                </span>
                                            </div>

                                        </div>
                                    {% endfor %}
                                </div>

                                <ul class="nav nav-tabs nav-tabs-highlight nav-tabs-lang">
                                    {% for language in languages %}
                                        <li class="{{ loop.first ? 'active' : '' }}">
                                            <a href="#prouctDetailslangTab{{ language['language_id'] }}" data-toggle="tab"
                                               aria-expanded="false">
                                                <img src="view/image/flags/{{ language['image'] }}"
                                                     title="{{ language['name'] }}" class="pull-right">
                                                <div> {{ language['name'] }}</div>
                                            </a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-flat">
                        <div class="panel-heading">
                            <h6 class="panel-title"><span class="text-bold">{{ lang('panel_availability') }}</span><a
                                        class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                            <div class="heading-elements not-collapsible">
                                <ul class="icons-list">
                                    <li><a data-action="collapse" class=""></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="form-group" id="status-group">
                                <label class="control-label">{{ lang('entry_status') }}</label>
                                <div class="checkbox checkbox-switchery">
                                    <label>
                                        <input disabled type="checkbox" onchange="changeStatus(this);" id="status" value="{{ old_value['product_info']['status'] }}" name="status"
                                               class="switchery" {{ old_value['product_info']['status'] in ['1', 1, 'on'] ? 'checked' }}>
                                        <span class="switchery-status">{{ old_value['product_info']['status'] in [1, '1', 'on'] ? lang('text_enabled') : lang('text_disabled') }}</span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group" id="date_available-group">
                                <label for="date_available" class="control-label">
                                    {{ lang('entry_date_available') }}
                                </label>
                                <input disabled type="text" class="form-control datepicker"
                                       id="date_available" name="date_available"
                                       value="{{ old_value['product_info']['date_available'] }}">
                                <span class="help-block"></span>
                                <span class="text-muted">{{ langempty('entry_date_available_help') }}</span>
                            </div>
                            <div class="form-group" id="model-group">
                                <label for="model" class="control-label">
                                    {{ lang('entry_model') }}
                                </label>
                                <input disabled type="text" class="form-control" id="model" name="model"
                                       value="{{ old_value['product_info']['model'] }}">
                                <span class="help-block"></span>
                                <span class="text-muted">{{ langempty('entry_model_help') }}</span>
                            </div>

                            <div class="form-group" id="barcode_image-group">
                                <img id="barcode_image" src="data:image/png;base64,{{ barcode_image }}"
                                        {{ barcode_image is not defined ? 'style="display: none;"' : '' }}>
                            </div>
                            <div class="form-group" id="barcode-group">
                                <label for="barcode" class="control-label">
                                    {{ lang('entry_barcode') }}
                                </label>
                                <input disabled type="text" class="form-control" id="barcode" name="barcode"
                                       value="{{ old_value['product_info']['barcode'] }}">
                                <span class="help-block"></span>
                                <span class="text-muted">{{ langempty('entry_barcode_help') }}</span>
                            </div>
                        </div>
                    </div>

            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_links') }}</span><a
                                class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group" id="manufacturer-group">
                        <label class="control-label">{{ lang('entry_manufacturer') }}</label>
                        <input disabled type="text" name="manufacturer_id" id="manufacturer_id" value="{{ old_value['manufacturer']['name']  }}" class="form-control">

                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_category_help') }}</span>
                    </div>

                    <div class="form-group" id="category-group">
                        <label class="control-label">{{ lang('entry_category') }}</label>
                        <select disabled class=" form-control" multiple="multiple"
                                name="product_category[]"
                                id="product_category">
                            {% for el in old_value['categoriesData'] %}
                                <option value="{{ el['category_id'] }}" selected >{{ el['name'] }}</option>
                            {% endfor %}
                        </select>
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_category_help') }}</span>
                    </div>
                </div>
            </div>

            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_reward') }}</span><a
                                class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group" id="points-group">
                        <label class="control-label">{{ lang('entry_points') }}</label>
                        <input disabled class="form-control" type="text" name="points" id="points" value="{{ old_value['product_info']['points'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_points_help') }}</span>
                    </div>
                </div>
            </div>


                    <!-- Images panel : Start -->
                    <!-- Images panel : Start -->
            <!-- Images panel : Start -->
            <div class="panel panel-flat panel-collapsed">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_image') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    {% for image in old_value['product_images'] %}
                        <div id="template-preview">
                            <div class="dz-preview dz-file-preview form-inline">

                                <div class="dz-image">
                                    <img src="{{ image['image'] }}" />
                                </div>

                            </div>
                        </div>

                    {% endfor %}
                    <div id="dropzone-inputs"></div>
                </div>
            </div>

            <!-- Images panel : End -->
                    <!-- Images panel : End -->


                    <!-- Pricing panel : Start -->
            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_pricing') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group col-md-6" id="price-group">
                        <label for="price" class="control-label">
                            {{ lang('entry_price') }}
                        </label>
                        <input disabled type="text" class="form-control touchspin-money" id="price" name="price"
                               value="{{ old_value['product_info']['price'] }}" maxlength="20"> <!--field length in DB(15,4) + include decimal point-->
                        <span class="help-block"></span>
                        <span class="text-muted">{{ lang('entry_price_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="cost_price-group">
                        <label for="cost_price" class="control-label">
                            {{ lang('entry_cost_price') }}
                        </label>
                        <input disabled type="text" class="form-control touchspin-money" id="cost_price" name="cost_price"
                               value="{{ old_value['product_info']['cost_price'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_cost_price_help') }}</span>
                    </div>

                    <div class="clearfix"></div>

                    <div class="form-group col-md-6" id="tax_class-group">
                        <label for="tax_class" class="control-label">
                            {{ lang('entry_tax_class') }}
                        </label>
                        <input disabled type="text"  class="form-control" id="tax_class_id" name="tax_class_id" value="{{ old_value['tax_class']['title'] }}">
                        
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_tax_class_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="minimum-group">
                        <label for="minimum" class="control-label">
                            {{ lang('entry_minimum') }}
                        </label>
                        <input disabled type="text" class="form-control touchspin-quantity" id="minimum" name="minimum"
                               value="{{ old_value['product_info']['minimum'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_minimum_help') }}</span>
                    </div>

                    {% if config("enable_order_maximum_quantity") %}
                        <div class="form-group col-md-6" id="maximum-group">
                            <label for="maximum" class="control-label">
                                {{ lang('entry_maximum') }}
                            </label>
                            <input disabled type="text" class="form-control touchspin-quantity" id="maximum" name="maximum"
                                   value="{{ old_value['product_info']['maximum'] }}">
                            <span class="help-block"></span>
                            <span class="text-muted">{{ langempty('entry_maximum_help') }}</span>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Pricing panel : End -->

            <!-- Inventory panel : Start -->
            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_inventory') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group col-md-6" id="sku-group">
                        <label for="sku" class="control-label">
                            {{ lang('entry_sku') }}
                        </label>
                        <input disabled type="text" class="form-control" id="sku" name="sku"
                               value="{{ old_value['product_info']['sku'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_sku_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="stock_status-group">
                        <label for="stock_status" class="control-label">
                            {{ lang('entry_stock_status') }}
                        </label>
                        <input disabled type="text" id="stock_status_id" name="stock_status_id" value="{{ old_value['stock_status']['name'] }}"  class="form-control">

                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_minimum_help') }}</span>
                    </div>

                    <div class="clearfix"></div>

                    <div class="form-group col-md-6" id="subtract-group">
                        <label for="subtract" class="control-label">
                            {{ lang('entry_subtract') }}
                        </label>
                        <select disabled type="text" class="form-control" id="subtract" name="subtract">
                            <option value="1" {{old_value['product_info']['subtract']  == 1 ? 'selected' : '' }}>
                                {{ lang('text_yes') }}
                            </option>
                            <option value="0" {{ old_value['product_info']['subtract'] == 0 ? 'selected' : '' }}>
                                {{ lang('text_no') }}
                            </option>
                        </select>
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_subtract_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="quantity-group">
                        <label for="quantity" class="control-label">
                            {{ lang('entry_quantity') }}
                        </label>
                        <input disabled type="text" class="form-control touchspin-quantity" id="quantity" name="quantity"
                               value="{{ old_value['product_info']['quantity'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_quantity_help') }}</span>
                    </div>
                </div>
            </div>

            <!-- Inventory panel : End -->

                    <!-- Data panel : Start -->
            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_shipping') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group col-md-6" id="shipping-group">
                        <label for="shipping" class="control-label">
                            {{ lang('entry_shipping') }}
                        </label>
                        <select disabled type="text" class="form-control" id="shipping" name="shipping">
                            <option value="1" {{ old_value['product_info']['shipping']  == 1 ? 'selected' : '' }}>
                                {{ lang('text_yes') }}
                            </option>
                            <option value="0" {{ old_value['product_info']['shipping'] != 1 ? 'selected' : '' }}>
                                {{ lang('text_no') }}
                            </option>
                        </select>
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_shipping_help') }}</span>
                    </div>

                    <div class="clearfix"></div>

                    <div class="form-group col-md-6" id="length-group">
                        <label for="length" class="control-label">
                            {{ lang('entry_weight_class') }}
                        </label>
                        <input disabled type="text" class="form-control" id="weight_class_id" value="{{ old_value['weight_class']['title'] }}" name="weight_class_id">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_length_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="length-group">
                        <label for="length" class="control-label">
                            {{ lang('entry_length') }}
                        </label>
                        <input disabled type="text" id="length_class_id" name="length_class_id"class="form-control" value="{{ old_value['length_class']['title'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_length_help') }}</span>
                    </div>

                    <div class="clearfix"></div>

                    <div class="form-group col-md-6" id="weight-group">
                        <label for="weight" class="control-label">
                            {{ lang('entry_weight') }}
                        </label>
                        <input disabled type="text" class="form-control" id="weight" name="weight"
                               value="{{ old_value['product_info']['weight'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_weight_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="dimension-group">
                        <label for="length" class="control-label">
                            {{ lang('entry_dimension') }}
                        </label>
                        <div class="form-group row">
                            <div class="col-md-4">
                                <input disabled type="text" class="form-control" id="length" name="length"
                                       value="{{ old_value['product_info']['length'] }}">
                            </div>
                            <div class="col-md-4">
                                <input disabled type="text" class="form-control" id="width" name="width"
                                       value="{{ old_value['product_info']['width'] }}">
                            </div>
                            <div class="col-md-4">
                                <input disabled type="text" class="form-control" id="height" name="height"
                                       value="{{ old_value['product_info']['height'] }}">
                            </div>
                        </div>
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_quantity_help') }}</span>
                    </div>

                    <div class="clearfix"></div>
                </div>
            </div>

            <!-- Data panel : End -->

            <!-- Options panel : Start -->
            <div class="panel panel-flat panel-collapsed">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_option') }}</span><a
                                class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">

                    <div class="optionsRows panel-group accordion-sortable content-group-lg ui-sortable" id="accordion-controls">

                        {% set optionKey = 0 %}
                        {% for po in old_value['product_options'] %}

                            {% set key = po['option_id'] %}

                            <div class="panel panel-white option-row" data-option-id="{{ po['option_id'] }}"
                                 id="option-row-{{ po['option_id'] }}">

                                <div class="panel-heading">
                                    <h6 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion-controls"
                                           href="#accordion-controls-group-{{ key }}" aria-expanded="true">{{ po['name'] }}</a>
                                        <a class="heading-elements-toggle"><i class="icon-more"></i></a>
                                    </h6>

                                    <div class="heading-elements">
                                        <div class="heading-form">
                                            <div class="form-group">
                                                <div class="checkbox checkbox-switchery">
                                                    <label>
                                                        <input disabled type="checkbox"
                                                               onchange="changeStatusRequired(this)"
                                                               name="product_option[{{ key }}][required]"
                                                               class="switchery" {{ po['required'] == 1 ? 'checked' : '' }}>
                                                        <span class="switchery-status">
                                                    {{ po['required'] == 1 ? lang('lbl_switch_required') : lang('lbl_switch_optional') }}
                                                </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div id="accordion-controls-group-{{ key }}"
                                     class="panel-collapse collapse {{ loop.first ? 'in' : '' }}">
                                    {% if po['type'] == 'select' or po['type'] == 'checkbox' or po['type'] == 'radio' or po['type'] == 'image' or po['type'] == 'product' %}
                                        <div class="panel-body">

                                        </div>
                                    {% endif %}

                                    {% if po['type'] == 'text' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}" class="form-control"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'textarea' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <textarea name="product_option[{{ key }}][option_value]"
                                                          class="form-control">{{ pd['option_value'] }}</textarea>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'file' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}" class="form-control"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'date' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}"
                                                       class="form-control datepicker"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'datetime' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}"
                                                       class="form-control" id="datetimepicker"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'time' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}"
                                                       class="form-control timepicker"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'select' or po['type'] == 'checkbox' or po['type'] == 'radio' or po['type'] == 'image' or po['type'] == 'product' %}
                                        <div class="table-responsive">
                                            <table class="table table-hover datatable-highlight optionValuesTable"
                                                   id="optionValuesTable">
                                                <thead>
                                                <tr>
                                                    <th>{{ lang('entry_option_value') }}</th>
                                                    <th>{{ lang('entry_quantity') }}</th>
                                                    <th>{{ lang('entry_subtract') }}</th>
                                                    <th>{{ lang('entry_price_diff') }}</th>
                                                    <th>{{ lang('entry_weight_diff') }}</th>
                                                </tr>
                                                </thead>
                                                <tbody>

                                                {% for pov in po['product_option_value'] %}

                                                    {% set vKey = pov['option_value_id'] %}
                                                        <tr id="option-value-row-{{ pov['option_value_id'] }}">
                                                            <td>
                                                                <span>{{ pov['name'] }}</span>
                                                            </td>
                                                            <td>
                                                                <input disabled type="text" class="form-control touchspin-quantity-control"
                                                                       name="product_option[{{ key }}][product_option_value][{{ vKey }}][quantity]"
                                                                       value="{{ pov['quantity'] }}" size="3"/>
                                                            </td>
                                                            <td>
                                                                <div class="checkbox checkbox-switchery">
                                                                    <label>
                                                                        <input disabled type="checkbox"
                                                                               onchange="changeStatusYesNo(this)"
                                                                               name="product_option[{{ key }}][product_option_value][{{ vKey }}][subtract]"
                                                                               class="switchery" {{ pov['subtract'] == 1 ? 'checked' : '' }}>
                                                                        <span class="switchery-status">
                                                                    {{ pov['subtract'] == 1 ? lang('lbl_switch_yes') : lang('lbl_switch_no') }}
                                                                </span>
                                                                    </label>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <input disabled type="text" class="form-control touchspin-money-minus"
                                                                       name="product_option[{{ key }}][product_option_value][{{ vKey }}][price]"
                                                                       value="{{ pov['price_prefix'] ~ pov['price'] }}" size="5"/>
                                                            </td>
                                                            <td>
                                                                <input disabled type="text" class="form-control touchspin-minus-control"
                                                                       name="product_option[{{ key }}][product_option_value][{{ vKey }}][weight]"
                                                                       value="{{ pov['weight_prefix'] ~ pov['weight'] }}" size="5"/>
                                                            </td>
                                                        </tr>
                                                {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    {% endif %}

                                </div>
                            </div>

                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Options panel : End -->

            <!-- Attributes panel : Start -->
            <div class="panel panel-flat panel-collapsed">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_attribute') }}</span><a
                                class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">


                    <table class="table table-hover table-framed  datatable-highlight attributeTable {{ old_value['product_attributes']|length < 1 ? 'hidden' : ''}}" id="attributeTable">
                        <thead>
                        <tr>
                            <th>{{ lang('entry_attribute') }}</th>
                            <th>{{ lang('entry_attribute_group') }}</th>
                            <th>{{ lang('entry_text') }}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for key, attribute in old_value['product_attributes'] %}

                            {% set key = attribute['attribute_id'] %}

                            <tr id="attribute-row-{{ key }}">
                                <td class="col-md-4">
                                    {{ attribute['name'] }}
                                    <input disabled type="hidden" name="product_attribute[{{ key }}][attribute_id]"
                                           value="{{ attribute['attribute_id'] }}"/>
                                </td>
                                <td class="col-md-2">
                                    {{ attribute['GroupName'] }}
                                </td>
                                <td class="col-md-6">
                                    <div class="tabbable nav-tabs-vertical nav-tabs-right">
                                        <div class="tab-content">
                                            {% for lng in languages %}
                                                <div class="tab-pane has-padding {{ loop.first ? 'active' : '' }}"
                                                     id="attributeLangTab-{{ key }}-{{ lng['language_id'] }}">
                                                    <div class="form-group"
                                                         id="opt-name-group_{{ lng['language_id'] }}">
                                                        <label class="control-label"></label>
                                                        <input disabled type="text" class="form-control"
                                                               name="product_attribute[{{ key }}][product_attribute_description][{{ lng['language_id'] }}][text]"
                                                               value="{{ attribute['product_attribute_description'][lng['language_id']]['text'] }}"/>
                                                        <span class="help-block"></span>
                                                        <span class="text-muted"></span>
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        </div>

                                        <ul class="nav nav-tabs nav-tabs-highlight nav-tabs-lang">
                                            {% for language in languages %}
                                                <li class="{{ loop.first ? 'active' : '' }}">
                                                    <a href="#attributeLangTab-{{ key }}-{{ language['language_id'] }}"
                                                       data-toggle="tab"
                                                       aria-expanded="false">
                                                        <img src="view/image/flags/{{ language['image'] }}"
                                                             title="{{ language['name'] }}" class="pull-right">
                                                        <div> {{ language['name'] }}</div>
                                                    </a>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </td>

                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Attributes panel : End -->

            <!-- Attributes panel : End -->

            <!-- Specials & Discount panel : Start -->
            <div class="panel panel-flat panel-collapsed">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_discount') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <table class="table table-hover datatable-highlight {{old_value['product_discounts']|length < 1 ? 'hidden' : '' }}" id="discountsTable">
                        <thead>
                        <tr>
                            <th>{{ lang('entry_customer_group') }}</th>
                            <th>{{ lang('entry_quantity') }}</th>
                            <th>{{ lang('entry_priority') }}</th>
                            <th>{{ lang('entry_price') }}</th>
                            <th>{{ lang('entry_date_start') }}</th>
                            <th>{{ lang('entry_date_end') }}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for key, discount in old_value['product_discounts'] %}
                            <tr id="discount-row{{ key }}">
                                <td>
                                    <span>{{ discount['name'] }}</span>
                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][quantity]"
                                           value="{{ discount['quantity'] }}"
                                           size="2"/>
                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][priority]"
                                           value="{{ discount['priority'] }}" size="2"/>
                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][price]"
                                           value="{{ discount['price'] }}" size="6">
                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][date_start]"
                                           value="{{ discount['date_start'] }}" class="datepicker" size="7">
                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][date_end]"
                                           value="{{ discount['date_end'] }}" class="datepicker" size="7">
                                </td>
                                {% if dedicatedDomains['status'] == true %}
                                    <td>
                                        {{ discount['domain_name'] }}
                                        <input disabled type="hidden" value="{{ discount['dedicated_domains'] }}"
                                               name="product_discount[{{ key }}][dedicated_domains]">
                                    </td>
                                {% endif %}
                            </tr>
                            {% set discountKey = key %}
                        {% endfor %}
                        </tbody>

                    </table>
                </div>
            </div>

            <!-- Specials & Discount panel : End -->

        </div>
        <div class="col-md-6">
                    <div class="panel panel-flat">
                        <div class="panel-body">
                            <div class="tabbable nav-tabs-vertical nav-tabs-right">
                                <div class="tab-content">
                                    {% for lng in languages %}
                                        <div class="tab-pane has-padding {{ loop.first ? 'active' : '' }}"
                                             id="prouctDetailslangTabNew{{ lng['language_id'] }}">
                                            <div class="form-group"
                                                 id="name_{{ lng['language_id'] }}-group">
                                                <label class="control-label">
                                                    {{ lang('entry_name') }} <span class="text-danger">*</span>
                                                </label>
                                                <input disabled type="text" class="form-control new_vaules"
                                                       data-match="name_{{ lng['language_id'] }}"
                                                       name="product_description[{{ lng['language_id'] }}][name]"
                                                       value="{{ new_value['product_description'][lng['language_id']]['name']|escape}}"
                                                >
                                                <span class="help-block"></span>
                                                <span class="text-muted">{{ langempty('entry_name_help') }}</span>
                                            </div>
                                            <div class="form-group"
                                                 id="description_{{ lng['language_id'] }}-group">
                                                <label class="control-label">
                                                    {{ lang('entry_description') }} <span class="text-danger">*</span>
                                                </label>
                                                <textarea
                                                        name="product_description[{{ lng['language_id'] }}][description]"
                                                        data-match="description_{{ lng['language_id'] }}"
                                                        class="summernote-fixed-height new_vaules"
                                                >{{ new_value['product_description'][lng['language_id']]['description'] }}</textarea>
                                                <span class="help-block"></span>
                                                <span class="text-muted">
                                                    {{ langempty('entry_description_help') }}
                                                </span>
                                            </div>

                                        </div>
                                    {% endfor %}
                                </div>

                                <ul class="nav nav-tabs nav-tabs-highlight nav-tabs-lang">
                                    {% for language in languages %}
                                        <li class="{{ loop.first ? 'active' : '' }}">
                                            <a href="#prouctDetailslangTabNew{{ language['language_id'] }}" data-toggle="tab"
                                               aria-expanded="false">
                                                <img src="view/image/flags/{{ language['image'] }}"
                                                     title="{{ language['name'] }}" class="pull-right">
                                                <div> {{ language['name'] }}</div>
                                            </a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-flat">
                        <div class="panel-heading">
                            <h6 class="panel-title"><span class="text-bold">{{ lang('panel_availability') }}</span><a
                                        class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                            <div class="heading-elements not-collapsible">
                                <ul class="icons-list">
                                    <li><a data-action="collapse" class=""></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="form-group" id="status-group">
                                <label class="control-label">{{ lang('entry_status') }}</label>
                                <div class="checkbox checkbox-switchery">
                                    <label>
                                        <input disabled type="checkbox" onchange="changeStatus(this);" data-match="status" value="new_value['status']" name="status"
                                               class="switchery new_vaules" {{ new_value['status'] in ['1', 1, 'on'] ? 'checked' }}>
                                        <span class="switchery-status">{{ new_value['status'] in [1, '1', 'on'] ? lang('text_enabled') : lang('text_disabled') }}</span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group" id="date_available-group">
                                <label for="date_available" class="control-label">
                                    {{ lang('entry_date_available') }}
                                </label>
                                <input disabled type="text" class="form-control datepicker new_vaules"
                                       data-match="date_available" name="date_available"
                                       value="{{ new_value['date_available'] }}">
                                <span class="help-block"></span>
                                <span class="text-muted">{{ langempty('entry_date_available_help') }}</span>
                            </div>
                            <div class="form-group" id="model-group">
                                <label for="model" class="control-label">
                                    {{ lang('entry_model') }}
                                </label>
                                <input disabled type="text" class="form-control new_vaules" data-match="model" name="model"
                                       value="{{ new_value['model'] }}">
                                <span class="help-block"></span>
                                <span class="text-muted">{{ langempty('entry_model_help') }}</span>
                            </div>

                            <div class="form-group" data-match="barcode_image-group">
                                <img id="barcode_image" src="data:image/png;base64,{{ barcode_image }}"
                                        {{ barcode_image is not defined ? 'style="display: none;"' : '' }}>
                            </div>
                            <div class="form-group" id="barcode-group">
                                <label for="barcode" class="control-label">
                                    {{ lang('entry_barcode') }}
                                </label>
                                <input disabled type="text" class="form-control new_vaules" data-match="barcode" name="barcode"
                                       value="{{ new_value['barcode'] }}">
                                <span class="help-block"></span>
                                <span class="text-muted">{{ langempty('entry_barcode_help') }}</span>
                            </div>
                        </div>
                    </div>

            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_links') }}</span><a
                                class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group" id="manufacturer-group">
                        <label class="control-label">{{ lang('entry_manufacturer') }}</label>
                        <input disabled type="text" data-match="manufacturer_id" name="manufacturer_id" value="{{ new_value['manufacturer']['name']  }}" class="form-control new_vaules">

                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_category_help') }}</span>
                    </div>

                    <div class="form-group" id="category-group">
                        <label class="control-label">{{ lang('entry_category') }}</label>
                        <select disabled class=" form-control  new_vaules" multiple="multiple"
                                name="product_category[]"
                                data-match="product_category">
                            {% for el in new_value['categoriesData'] %}
                                <option value="{{ el['category_id'] }}" selected >{{ el['name'] }}</option>
                            {% endfor %}
                        </select>
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_category_help') }}</span>
                    </div>
                </div>
            </div>

            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_reward') }}</span><a
                                class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group" id="points-group">
                        <label class="control-label">{{ lang('entry_points') }}</label>
                        <input disabled class="form-control  new_vaules" type="text" name="points" data-match="points" value="{{ new_value['points'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_points_help') }}</span>
                    </div>
                </div>
            </div>


            <!-- Images panel : Start -->
            <div class="panel panel-flat panel-collapsed ">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_image') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    {% for image in new_value['product_image'] %}
                    <div id="template-preview">
                        <div class="dz-preview dz-file-preview form-inline">

                            <div class="dz-image">
                                <img src="{{ image['image'] }}" />
                            </div>

                        </div>
                    </div>

                    {% endfor %}
                    <div id="dropzone-inputs"></div>
                </div>
            </div>

            <!-- Images panel : End -->


                    <!-- Pricing panel : Start -->
            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_pricing') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group col-md-6" id="price-group">
                        <label for="price" class="control-label">
                            {{ lang('entry_price') }}
                        </label>
                        <input disabled type="text" class="form-control touchspin-money  new_vaules" data-match="price" name="price"
                               value="{{ new_value['price'] }}" maxlength="20"> <!--field length in DB(15,4) + include decimal point-->
                        <span class="help-block"></span>
                        <span class="text-muted">{{ lang('entry_price_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="cost_price-group">
                        <label for="cost_price" class="control-label">
                            {{ lang('entry_cost_price') }}
                        </label>
                        <input disabled type="text" class="form-control touchspin-money  new_vaules" data-match="cost_price" name="cost_price"
                               value="{{ new_value['cost_price'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_cost_price_help') }}</span>
                    </div>

                    <div class="clearfix"></div>

                    <div class="form-group col-md-6" id="tax_class-group">
                        <label for="tax_class" class="control-label">
                            {{ lang('entry_tax_class') }}
                        </label>
                        <input disabled type="text"  class="form-control  new_vaules" data-match="tax_class_id" name="tax_class_id" value="{{ new_value['tax_class']['title'] }}">

                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_tax_class_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="minimum-group">
                        <label for="minimum" class="control-label">
                            {{ lang('entry_minimum') }}
                        </label>
                        <input disabled type="text" class="form-control touchspin-quantity  new_vaules" data-match="minimum" name="minimum"
                               value="{{ new_value['minimum'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_minimum_help') }}</span>
                    </div>

                    {% if config("enable_order_maximum_quantity") %}
                        <div class="form-group col-md-6" id="maximum-group">
                            <label for="maximum" class="control-label">
                                {{ lang('entry_maximum') }}
                            </label>
                            <input disabled type="text" class="form-control touchspin-quantity  new_vaules" data-match="maximum" name="maximum"
                                   value="{{ new_value['maximum'] }}">
                            <span class="help-block"></span>
                            <span class="text-muted">{{ langempty('entry_maximum_help') }}</span>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Pricing panel : End -->

            <!-- Inventory panel : Start -->
            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_inventory') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group col-md-6" id="sku-group">
                        <label for="sku" class="control-label">
                            {{ lang('entry_sku') }}
                        </label>
                        <input disabled type="text" class="form-control  new_vaules" data-match="sku" name="sku"
                               value="{{ new_value['sku'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_sku_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="stock_status-group">
                        <label for="stock_status" class="control-label">
                            {{ lang('entry_stock_status') }}
                        </label>
                        <input disabled type="text" data-match="stock_status_id"  name="stock_status_id" value="{{ new_value['stock_status']['name'] }}"  class="form-control  new_vaules">

                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_minimum_help') }}</span>
                    </div>

                    <div class="clearfix"></div>

                    <div class="form-group col-md-6" id="subtract-group">
                        <label for="subtract" class="control-label">
                            {{ lang('entry_subtract') }}
                        </label>
                        <select disabled type="text" class="form-control  new_vaules" data-match="subtract" name="subtract">
                            <option value="1" {{new_value['subtract']  == 1 ? 'selected' : '' }}>
                                {{ lang('text_yes') }}
                            </option>
                            <option value="0" {{ new_value['subtract'] == 0 ? 'selected' : '' }}>
                                {{ lang('text_no') }}
                            </option>
                        </select>
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_subtract_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="quantity-group">
                        <label for="quantity" class="control-label">
                            {{ lang('entry_quantity') }}
                        </label>
                        <input disabled type="text" class="form-control touchspin-quantity  new_vaules" data-match="quantity" name="quantity"
                               value="{{ new_value['quantity'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_quantity_help') }}</span>
                    </div>
                </div>
            </div>

            <!-- Inventory panel : End -->

                    <!-- Data panel : Start -->
            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_shipping') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="form-group col-md-6" id="shipping-group">
                        <label for="shipping" class="control-label">
                            {{ lang('entry_shipping') }}
                        </label>
                        <select disabled type="text" class="form-control new_vaules" data-match="shipping" name="shipping">
                            <option value="1" {{ new_value['shipping']  == 1 ? 'selected' : '' }}>
                                {{ lang('text_yes') }}
                            </option>
                            <option value="0" {{ new_value['shipping'] != 1 ? 'selected' : '' }}>
                                {{ lang('text_no') }}
                            </option>
                        </select>
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_shipping_help') }}</span>
                    </div>

                    <div class="clearfix"></div>

                    <div class="form-group col-md-6" id="length-group">
                        <label for="length" class="control-label">
                            {{ lang('entry_weight_class') }}
                        </label>
                        <input disabled type="text" class="form-control new_vaules" data-match="weight_class_id" value="{{ new_value['weight_class']['title'] }}" name="weight_class_id">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_length_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="length-group">
                        <label for="length" class="control-label">
                            {{ lang('entry_length') }}
                        </label>
                        <input disabled type="text" data-match="length_class_id" name="length_class_id"class="form-control new_vaules" value="{{ new_value['length_class']['title'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_length_help') }}</span>
                    </div>

                    <div class="clearfix"></div>

                    <div class="form-group col-md-6" id="weight-group">
                        <label for="weight" class="control-label">
                            {{ lang('entry_weight') }}
                        </label>
                        <input disabled type="text" class="form-control" data-match="weight" name="weight"
                               value="{{ new_value['weight'] }}">
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_weight_help') }}</span>
                    </div>

                    <div class="form-group col-md-6" id="dimension-group">
                        <label for="length" class="control-label">
                            {{ lang('entry_dimension') }}
                        </label>
                        <div class="form-group row">
                            <div class="col-md-4">
                                <input disabled type="text" class="form-control new_vaules" data-match="length" name="length"
                                       value="{{ new_value['length'] }}">
                            </div>
                            <div class="col-md-4">
                                <input disabled type="text" class="form-control new_vaules" data-match="width" name="width"
                                       value="{{ new_value['width'] }}">
                            </div>
                            <div class="col-md-4">
                                <input disabled type="text" class="form-control new_vaules" data-match="height" name="height"
                                       value="{{ new_value['height'] }}">
                            </div>
                        </div>
                        <span class="help-block"></span>
                        <span class="text-muted">{{ langempty('entry_quantity_help') }}</span>
                    </div>

                    <div class="clearfix"></div>
                </div>
            </div>

            <!-- Data panel : End -->

            <!-- Options panel : Start -->
            <div class="panel panel-flat panel-collapsed">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_option') }}</span><a
                                class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">

                    <div class="optionsRows panel-group accordion-sortable content-group-lg ui-sortable" id="accordion-controls">

                        {% set optionKey = 0 %}
                        {% for po in new_value['product_option'] %}

                            {% set key = po['option_id'] %}

                            <div class="panel panel-white option-row" data-option-id="{{ po['option_id'] }}"
                                 id="option-row-{{ po['option_id'] }}">

                                <div class="panel-heading">
                                    <h6 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion-controls"
                                           href="#accordion-controls-group-{{ key }}" aria-expanded="true">{{ po['name'] }}</a>
                                        <a class="heading-elements-toggle"><i class="icon-more"></i></a>
                                    </h6>

                                    <div class="heading-elements">
                                        <div class="heading-form">
                                            <div class="form-group">
                                                <div class="checkbox checkbox-switchery">
                                                    <label>
                                                        <input disabled type="checkbox"
                                                               onchange="changeStatusRequired(this)"
                                                               name="product_option[{{ key }}][required]"
                                                               class="switchery" {{ po['required'] == 1 ? 'checked' : '' }}>
                                                        <span class="switchery-status">
                                                    {{ po['required'] == 1 ? lang('lbl_switch_required') : lang('lbl_switch_optional') }}
                                                </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div id="accordion-controls-group-{{ key }}"
                                     class="panel-collapse collapse {{ loop.first ? 'in' : '' }}">
                                    {% if po['type'] == 'select' or po['type'] == 'checkbox' or po['type'] == 'radio' or po['type'] == 'image' or po['type'] == 'product' %}
                                        <div class="panel-body">

                                        </div>
                                    {% endif %}

                                    {% if po['type'] == 'text' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}" class="form-control"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'textarea' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <textarea name="product_option[{{ key }}][option_value]"
                                                          class="form-control">{{ pd['option_value'] }}</textarea>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'file' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}" class="form-control"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'date' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}"
                                                       class="form-control datepicker"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'datetime' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}"
                                                       class="form-control" id="datetimepicker"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'time' %}
                                        <div class="panel-body">
                                            <div class="form-group col-md-12" id="model-group">
                                                <label for="model" class="control-label">
                                                    {{ lang('entry_option_value') }}
                                                </label>
                                                <input disabled name="product_option[{{ key }}][option_value]"
                                                       value="{{ pd['option_value'] }}"
                                                       class="form-control timepicker"/>
                                            </div>
                                        </div>
                                    {% elseif po['type'] == 'select' or po['type'] == 'checkbox' or po['type'] == 'radio' or po['type'] == 'image' or po['type'] == 'product' %}
                                        <div class="table-responsive">
                                            <table class="table table-hover datatable-highlight optionValuesTable"
                                                   id="optionValuesTable">
                                                <thead>
                                                <tr>
                                                    <th>{{ lang('entry_option_value') }}</th>
                                                    <th>{{ lang('entry_quantity') }}</th>
                                                    <th>{{ lang('entry_subtract') }}</th>
                                                    <th>{{ lang('entry_price_diff') }}</th>
                                                    <th>{{ lang('entry_weight_diff') }}</th>
                                                </tr>
                                                </thead>
                                                <tbody>

                                                {% for pov in po['product_option_value'] %}

                                                    {% set vKey = pov['option_value_id'] %}
                                                        <tr id="option-value-row-{{ pov['option_value_id'] }}">
                                                            <td>
                                                                <span>{{ pov['name'] }}</span>
                                                            </td>
                                                            <td>
                                                                <input disabled type="text" class="form-control touchspin-quantity-control"
                                                                       name="product_option[{{ key }}][product_option_value][{{ vKey }}][quantity]"
                                                                       value="{{ pov['quantity'] }}" size="3"/>
                                                            </td>
                                                            <td>
                                                                <div class="checkbox checkbox-switchery">
                                                                    <label>
                                                                        <input disabled type="checkbox"
                                                                               onchange="changeStatusYesNo(this)"
                                                                               name="product_option[{{ key }}][product_option_value][{{ vKey }}][subtract]"
                                                                               class="switchery" {{ pov['subtract'] == 1 ? 'checked' : '' }}>
                                                                        <span class="switchery-status">
                                                                    {{ pov['subtract'] == 1 ? lang('lbl_switch_yes') : lang('lbl_switch_no') }}
                                                                </span>
                                                                    </label>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <input disabled type="text" class="form-control touchspin-money-minus"
                                                                       name="product_option[{{ key }}][product_option_value][{{ vKey }}][price]"
                                                                       value="{{ pov['price_prefix'] ~ pov['price'] }}" size="5"/>
                                                            </td>
                                                            <td>
                                                                <input disabled type="text" class="form-control touchspin-minus-control"
                                                                       name="product_option[{{ key }}][product_option_value][{{ vKey }}][weight]"
                                                                       value="{{ pov['weight_prefix'] ~ pov['weight'] }}" size="5"/>
                                                            </td>
                                                        </tr>
                                                {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    {% endif %}

                                </div>
                            </div>

                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Options panel : End -->

            <!-- Attributes panel : Start -->
            <div class="panel panel-flat panel-collapsed">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_attribute') }}</span><a
                                class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">


                    <table class="table table-hover table-framed  datatable-highlight attributeTable {{ new_value['product_attribute']|length < 1 ? 'hidden' : ''}}" id="attributeTable">
                        <thead>
                        <tr>
                            <th>{{ lang('entry_attribute') }}</th>
                            <th>{{ lang('entry_attribute_group') }}</th>
                            <th>{{ lang('entry_text') }}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for key, attribute in new_value['product_attribute'] %}

                            {% set key = attribute['attribute_id'] %}

                            <tr id="attribute-row-{{ key }}">
                                <td class="col-md-4">
                                    {{ attribute['name'] }}

                                </td>
                                <td class="col-md-2">
                                    {{ attribute['GroupName'] }}
                                </td>
                                <td class="col-md-6">
                                    <div class="tabbable nav-tabs-vertical nav-tabs-right">
                                        <div class="tab-content">
                                            {% for lng in languages %}
                                                <div class="tab-pane has-padding {{ loop.first ? 'active' : '' }}"
                                                     id="attributeLangTab-{{ key }}-{{ lng['language_id'] }}">
                                                    <div class="form-group"
                                                         id="opt-name-group_{{ lng['language_id'] }}">
                                                        <label class="control-label"></label>
                                                        <input disabled type="text" class="form-control"
                                                               name="product_attribute[{{ key }}][product_attribute_description][{{ lng['language_id'] }}][text]"
                                                               value="{{ attribute['product_attribute_description'][lng['language_id']]['text'] }}"/>
                                                        <span class="help-block"></span>
                                                        <span class="text-muted"></span>
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        </div>

                                        <ul class="nav nav-tabs nav-tabs-highlight nav-tabs-lang">
                                            {% for language in languages %}
                                                <li class="{{ loop.first ? 'active' : '' }}">
                                                    <a href="#attributeLangTab-{{ key }}-{{ language['language_id'] }}"
                                                       data-toggle="tab"
                                                       aria-expanded="false">
                                                        <img src="view/image/flags/{{ language['image'] }}"
                                                             title="{{ language['name'] }}" class="pull-right">
                                                        <div> {{ language['name'] }}</div>
                                                    </a>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </td>

                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Attributes panel : End -->

            <!-- Attributes panel : End -->

            <!-- Specials & Discount panel : Start -->
            <div class="panel panel-flat panel-collapsed">
                <div class="panel-heading">
                    <h6 class="panel-title"><span class="text-bold">{{ lang('tab_discount') }}</span><a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                    <div class="heading-elements not-collapsible">
                        <ul class="icons-list">
                            <li><a data-action="collapse" class=""></a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <table class="table table-hover datatable-highlight {{new_value['product_special_discount']|length < 1 ? 'hidden' : '' }}" id="discountsTable">
                        <thead>
                        <tr>
                            <th>{{ lang('entry_customer_group') }}</th>
                            <th>{{ lang('entry_quantity') }}</th>
                            <th>{{ lang('entry_priority') }}</th>
                            <th>{{ lang('entry_price') }}</th>
                            <th>{{ lang('entry_date_start') }}</th>
                            <th>{{ lang('entry_date_end') }}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for key, discount in new_value['product_special_discount'] %}
                            <tr id="discount-row{{ key }}">
                                <td>
                                    <span>{{ discount['name'] }}</span>

                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][quantity]"
                                           value="{{ discount['quantity'] }}"
                                           size="2"/>
                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][priority]"
                                           value="{{ discount['priority'] }}" size="2"/>
                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][price]"
                                           value="{{ discount['price'] }}" size="6">
                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][date_start]"
                                           value="{{ discount['date_start'] }}" class="datepicker" size="7">
                                </td>
                                <td>
                                    <input disabled type="text" name="product_discount[{{ key }}][date_end]"
                                           value="{{ discount['date_end'] }}" class="datepicker" size="7">
                                </td>

                            </tr>
                            {% set discountKey = key %}
                        {% endfor %}
                        </tbody>

                    </table>
                </div>
            </div>

            <!-- Specials & Discount panel : End -->

        </div>

    </div>

</form>


{% endblock content %}


{% block scripts %}


    <script>
        $(document).ready(function(){
            $(".new_vaules").each((key, element) => {

                let value = $(element).val();
                let matchData = $(element).attr('data-match');
                let matchValue = $("#"+matchData).val();
                if(value != matchValue){
                    $(element).addClass("new_value_update");
                    if($(element).hasClass("switchery")){
                        $(element).parent().find("span.switchery").addClass("new_value_update");
                    }

                    if($(element).hasClass("select2-hidden-accessible")){
                        $(element).parent().find("span.select2-selection").addClass("new_value_update");
                    }
                }
            });
        });
    </script>

    {{ parent() }}

    <style>
        #panel-options .optionsResults, #panel-options .select2 {
            width: 80% !important;
        }

        #panel-options .select2 .select2-selection__choice {
            display: none !important;
        }

        #panel-options .optionsResults .selection {
            width: 100% !important;
            display: block !important;
            background-color: #455A64;
            color: #fff;
            border-radius: 3px;
            cursor: default;
            float: right;
            margin-left: 2px;
            margin-top: 2px;
            padding: 7px 12px;
        }

        #panel-options .optionsResults .selection .selection-remove {
            cursor: pointer;
            float: left;
            font-size: 14px;
            margin-top: 3px;
            line-height: 1;
            margin-right: 7px;
            opacity: 0.75;
            filter: alpha(opacity=75);
        }

        #barcode_image {
            width: 170px;
            height: 120px;
        }
    </style>
    <script src="view/javascript/pages/catalog/product/summernote-video-plugin/summernote-video-plugin.js"></script>
    <script>

        locales['options'] = {
            'entry_required': '{{ lang('entry_required') }}',
            'text_yes': '{{ lang('text_yes') }}',
            'text_no': '{{ lang('text_no') }}',
            'entry_option_value': '{{ lang('entry_option_value') }}',
            'entry_quantity': '{{ lang('entry_quantity') }}',
            'entry_subtract': '{{ lang('entry_subtract') }}',
            'entry_price': '{{ lang('entry_price') }}',
            'entry_price_diff': '{{ lang('entry_price_diff') }}',
            'entry_option_points': '{{ lang('entry_option_points') }}',
            'entry_weight': '{{ lang('entry_weight') }}',
            'entry_weight_diff': '{{ lang('entry_weight_diff') }}',
            'button_add_option_value': '{{ lang('button_add_option_value') }}',
            'entry_image': '{{ lang('entry_image') }}',
            'button_remove': '{{ lang('button_remove') }}',
        };
        locales['attributes'] = {};
        locales['button_remove'] = '{{ lang('button_remove') }}';
        locales['all_domains'] = '{{ lang('all_domains') }}';
        locales['button_add_option_value'] = '{{ lang('button_add_option_value') }}';
        locales['select_brand'] = '{{ lang('entry_select_brand') }}';
        locales['select_model'] = '{{ lang('entry_select_model') }}';

        var poip_installed = '{{ poip_installed }}';

        var images = JSON.parse('{{ product_images|json_encode }}');

        var rotate360Images = JSON.parse('{{ rotate360_images|json_encode }}');

        /**
         * check the type of the image which uploading.
         *  VALUES : 'product_image' (default) |  'rotate360_image' (rotate360_module)
         */
        var imageType = "product_image";

        var uploadedFiles = [];

        var imagesCount = 0;

        var languages = JSON.parse('{{ languages|json_encode|e('js') }}');

        var dedicatedDomains = JSON.parse('{{ dedicatedDomains|json_encode|e('js') }}');

        var dedicatedDomains = JSON.parse('{{ dedicatedDomains|json_encode|e('js') }}');

        var customerGroups = JSON.parse('{{ customer_groups|json_encode|e('js') }}');

        var pc_brands = JSON.parse('{{ pc_brands|json_encode|e('js') }}');

        var optionValues = JSON.parse('{{ option_values|json_encode|e('js') }}');

        var allOptions = JSON.parse('{{ all_options|json_encode|e('js') }}');

        var languagesFlags = JSON.parse('{{ languageFlags|json_encode|e('js') }}');

        var defaultCurrency = '{{ defaultCurrency }}';

        var optionKey = '{{ optionKey }}';
        var optionKey = parseInt(optionKey) + 1;

        var selectedOptionValues = {};
        var unSelectedOptionValues = {};

        var links = {};

        links['autocomplete'] = '{{ link('catalog/product/lookup') }}';
        links['categories_autocomplete'] = '{{ link('catalog/category/autocomplete') }}';
        links['downloads_autocomplete'] = '{{ link('catalog/download/autocomplete') }}';
        links['products_autocomplete'] = '{{ link('catalog/product/autocomplete') }}';
        links['manufacturers_autocomplete'] = '{{ link('catalog/manufacturer/autocomplete') }}';
        links['options_autocomplete'] = '{{ link('catalog/option/autocomplete') }}';
        links['attributes_autocomplete'] = '{{ link('catalog/attribute/groupedAutocomplete') }}';

        links['advanced_attributes_autocomplete'] = "{{ link('module/advanced_product_attributes/groupedAutocomplete') }}";
        links['get_advanced_attribute_values'] = "{{ link('module/advanced_product_attributes/getAttributeValues') }}";

        links['get_brand_models'] = '{{ link('product_classification/brand/get_models_by_brand') }}';
        links['get_model_years'] = '{{ link('product_classification/model/get_years_by_model') }}';

        links['newOption'] = '{{ link('catalog/option/insert') }}';

        locales['text_disabled'] = '{{ lang('text_disabled') }}';
        locales['lbl_switch_yes'] = '{{ lang('lbl_switch_yes') }}';
        locales['lbl_switch_no'] = '{{ lang('lbl_switch_no') }}';
        locales['lbl_switch_required'] = '{{ lang('lbl_switch_required') }}';
        locales['lbl_switch_optional'] = '{{ lang('lbl_switch_optional') }}';
        locales['lbl_option_values_button_help'] = '{{ lang('lbl_option_values_button_help') }}';

        function ngDoCheck(){
            var x = $(document).find('.modal.show').length;
            if(!x) {$('body').removeClass('modal-open')} else {return};
        }

        jQuery(function () {
            var imageManagerButton = function (context) {
                var ui = $.summernote.ui;

                // create button
                var button = ui.button({
                    contents: '<i class="note-icon-picture"/>',
                    tooltip: '{{ lang('text_image') }}',
                    click: function (e) {
                        // invoke insertText method with 'hello' on editor module.
                        //context.invoke('editor.insertText', 'hello');
                        var textareael = $(this).closest('.form-group').find('textarea.summernote-fixed-height').attr('name');
                        $.startImageManager(textareael, null, "summernoteImageManagerCallback", 'callerName');
                        $('body').removeClass('modal-open');
                    }
                });

                return button.render();   // return button as jquery object
            }


            // Default initialization
            jQuery('.summernote-fixed-height').summernote({
                height: 200,
                callbacks: {
                    onChange: function(contents, $editable) {
                        console.log('onChange:', contents, $editable);
                        $($editable).find("p").find("img").css("max-width", "100%")
                        $($editable).find(".block-tabs").find("iframe").css("height", "100%")
                    }
                },

                {% if base.lang == 'ar' %}
                lang: "ar-AR",
                {% endif %}

                toolbar: [
                    ['style', ['style']],
                    ['font', ['bold', 'underline', 'clear']],
                    ['fontname', ['fontname']],
                    ['fontsize', ['fontsize']],
                    ['color', ['color']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['table', ['table']],
                    // ['insert', ['link', 'imagemanager', 'video']],
                    ['insert',['ltr','rtl']],
                    ['insert', ['link', 'imagemanager', 'videoAttributes','emoji','codeview']],
                    ['view', ['fullscreen']],
                    //['mybutton', ['myVideo']]
                    //['insert', ['emoji']],
                    //['tool', ['undo', 'redo']]
                ],
                buttons: {
                    imagemanager: imageManagerButton
                    //myVideo: youtuvevideo
                },
                popover: {
                    image: [

                        ['imagesize', ['imageSize100', 'imageSize50', 'imageSize25']],
                        ['float', ['floatLeft', 'floatRight', 'floatNone']],
                        ['remove', ['removeMedia']],
                        ['custom', ['imageAttributes']],
                    ],
                },
                imageAttributes:{
                    icon:'<i class="note-icon-pencil"/>',
                    removeEmpty:true, // true = remove attributes | false = leave empty if present
                    disableUpload: true, // true = don't display Upload Options | Display Upload Options
                    disableAttributes: true,
                    disableLink: false,
                    disableImage: false,
                }
            });

            $(".touchspin-quantity-control").TouchSpin({
                min: 0,
                max: Infinity,
                initval: 1
            });


            $(".touchspin-minus-control").TouchSpin({
                min: -Infinity,
                max: Infinity,
                initval: 0
            });

            $(".touchspin-money-minus").TouchSpin({
                'postfix': defaultCurrency,
                min: -Infinity,
                max: Infinity,
                initval: 0,
                decimals: 2,
                step: 0.01
            });

            $('#barcode').change(function () {

                var $barcode = $(this).val();

                $.ajax({
                    url: '{{ link('catalog/product/barcode') }}',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {barcode: $barcode},
                    success: function (response) {
                        if (response['status'] == 'success') {
                            if (!response['barcode']) {
                                $('#barcode_image').hide();
                            } else {
                                $('#barcode_image').show();
                                $('#barcode_image').attr('src', 'data:image/png;base64,' + response['barcode']);
                            }
                        }
                    }
                });
            });
        });



    </script>



    <script src="view/javascript/pages/catalog/product/form.js?bn={{ BuildNumber }}"></script>

    {% if advanced_product_attributes_status == true %}
        <script src="view/javascript/pages/catalog/product/advanced_product_attributes.js?bn={{ BuildNumber }}"></script>
    {% endif %}

    <script>
        function changeStatus(checkbox) {
            var self = $(checkbox);
            var switch_status = self.siblings('.switchery-status');

            if (self.is(':checked')) {
                switch_status.html("{{ lang('text_enabled') }}");
            }
            else {
                switch_status.html("{{ lang('text_disabled') }}");
            }
        }

        function changeStatusYesNo(checkbox) {
            var self = $(checkbox);
            var switch_status = self.siblings('.switchery-status');

            if (self.is(':checked')) {
                switch_status.html("{{ lang('lbl_switch_yes') }}");
            }
            else {
                switch_status.html("{{ lang('lbl_switch_no') }}");
            }
        }

        function changeStatusRequired(checkbox) {
            var self = $(checkbox);
            var switch_status = self.siblings('.switchery-status');

            if (self.is(':checked')) {
                switch_status.html("{{ lang('lbl_switch_required') }}");
            }
            else {
                switch_status.html("{{ lang('lbl_switch_optional') }}");
            }
        }
    </script>



    <script src="view/javascript/pages/catalog/product/options.js?bn={{ BuildNumber }}"></script>
    <script src="view/javascript/pages/catalog/product/images.js?bn={{ BuildNumber }}"></script>
    <script src="view/javascript/pages/catalog/product/rotate360.js?bn={{ BuildNumber }}"></script>

{% endblock %}

