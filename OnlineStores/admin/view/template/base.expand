{% set DIRECTION = "LTR" %}
{% if base.direction == "rtl" %}
    {% set DIRECTION = "RTL" %}
{% endif %}

{% set isMenuCollapsed = (route in ['catalog/product', 'catalog/product/insert', 'catalog/product/update', 'marketplace/home']) %}

<!DOCTYPE html>
<html lang="{{lang('code')}}" {% if DIRECTION=="RTL" %}dir="rtl"{% endif %} {% if DIRECTION=="LTR" %}dir="ltr"{% endif %}>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ base.title }}</title>
    <base href="{{ base.base }}"/>
    {% if base.description %}
        <meta name="description" content="{{ base.description }}"/>
    {% endif %}
    {% if base.keywords %}
        <meta name="keywords" content="{{ keywords }}"/>
    {% endif %}

	<!--<scriptholder id="ckeditorplaceholder"></scriptholder>-->
	<link rel="shortcut icon" type="image/x-icon" href="https://cdn.expandcart.com/wp-content/uploads/2015/12/favicon.png">
	<link rel="apple-touch-icon" href="https://cdn.expandcart.com/wp-content/uploads/2015/12/favicon.png">

	<!-- Global stylesheets -->
	<link href="https://fonts.googleapis.com/css?family=Cairo:200,300,400,600,700,900|Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&amp;subset=arabic" rel="stylesheet">

	 <!-- Tour Modal -->
     <script src="view/assets/js/plugins/intro/intro.min.js"></script>

     <link rel="stylesheet" href="view/assets/css/{{ DIRECTION }}/introjs.min.css"/>
	<link rel="stylesheet" href="view/assets/css/shipping_methods_form.css">

	 <!-- Tour Modal -->

	<link href="view/assets/css/{{ DIRECTION }}/icons/icomoon/styles.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">
	<link href="view/assets/css/{{ DIRECTION }}/icons/fontawesome5/css/fontawesome-all.min.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">
	<link href="view/assets/css/{{ DIRECTION }}/bootstrap.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">
	<link href="view/assets/css/{{ DIRECTION }}/core.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">
	<link href="view/assets/css/{{ DIRECTION }}/components.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">
	<link href="view/assets/css/{{ DIRECTION }}/colors.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">
	<link href="view/assets/css/{{ DIRECTION }}/product_category.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">
	<link href="view/assets/css/{{ DIRECTION }}/extras/animate.min.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">
	<link href="view/assets/css/{{ DIRECTION }}/anytime.min.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="view/build/css/intlTelInput.css?bn={{ BuildNumber }}">
	<link href="view/assets/css/style.css?bn={{ BuildNumber }}" rel="stylesheet" type="text/css">

	<!--include fontawesome-->
    <link rel="stylesheet" href="view/assets/js/plugins/editors/summernote/summernote-emoji/tam-emoji/css/emoji.css">
	<script src="https://use.fontawesome.com/52e183519a.js"></script>
	
	<!-- /global stylesheets -->
	
	<!-- Core JS files -->
	<script type="text/javascript" src="view/assets/js/plugins/loaders/pace.min.js"></script>
	<script type="text/javascript" src="view/assets/js/core/libraries/jquery.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/loaders/blockui.min.js"></script>
	<!-- /core JS files -->
    <!-- Theme JS files -->
	<script type="text/javascript" src="view/assets/js/plugins/visualization/d3/d3.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/visualization/c3/c3.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/visualization/d3/d3_tooltip.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/forms/selects/bootstrap_multiselect.js"></script>
    <script type="text/javascript" src="view/assets/js/plugins/forms/inputs/typeahead/typeahead.bundle.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/editors/summernote-0.8.16/summernote.min.js"></script>
    {% if base.lang == 'ar' %}
	<script type="text/javascript" src="view/assets/js/plugins/editors/summernote/lang/summernote-ar-AR.js"></script>
	{% endif %}
	<script type="text/javascript" src="view/assets/js/plugins/editors/summernote/summernote-image-attributes.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/editors/summernote/summernote-ext-rtl.js"></script>

	<script type="text/javascript" src="view/assets/js/plugins/forms/styling/uniform.min.js"></script>
    <script type="text/javascript" src="view/assets/js/plugins/forms/styling/switchery.min.js"></script>
    <script type="text/javascript" src="view/assets/js/plugins/forms/styling/switch.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/forms/inputs/touchspin.min.js"></script>
	<script type="text/javascript" src="view/assets/js/pages/form_input_groups.js"></script>
    <script type="text/javascript" src="view/assets/js/plugins/forms/tags/tagsinput.min.js"></script>
    <script type="text/javascript" src="view/assets/js/plugins/forms/tags/tokenfield.min.js"></script>
	<script type="text/javascript" src="view/build/js/intlTelInput.js?bn={{ BuildNumber }}"></script>
	<!-- Theme JS files -->
	<script type="text/javascript" src="view/assets/js/plugins/velocity/velocity.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/velocity/velocity.ui.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/buttons/spin.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/buttons/ladda.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/notifications/pnotify.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/ui/prism.min.js"></script>
	<script type="text/javascript" src="view/assets/js/pages/form_multiselect.js"></script>
	{# <script type="text/javascript" src="view/assets/js/plugins/uploaders/dropzone.min.js"></script> #}
	<script type="text/javascript" src="view/javascript/cube/dropzone.js"></script>
	<script type="text/javascript">
        Dropzone.autoDiscover = false;
	</script>


    <!-- Datatables dependencies -->
    <script type="text/javascript" src="view/assets/js/plugins/tables/datatables/datatables.min.js"></script>

	<script type="text/javascript" src="view/assets/js/core/libraries/jquery_ui/interactions.min.js"></script>
	<script type="text/javascript" src="view/assets/js/core/libraries/jquery_ui/widgets.min.js"></script>
	<script type="text/javascript" src="view/assets/js/core/libraries/jquery_ui/effects.min.js"></script>   
	<script type="text/javascript" src="view/assets/js/plugins/forms/selects/select2.min.js"></script>
	
 	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/jszip/jszip.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/pdfmake/pdfmake.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/pdfmake/vfs_fonts.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/buttons.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/select.min.js"></script>

	<script type="text/javascript" src="view/assets/js/core/libraries/bootstrap.min.js"></script>

	
	<!-- form Wizard Dependencies -->
	<script type="text/javascript" src="view/assets/js/plugins/forms/wizards/steps.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/forms/wizards/stepy.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/forms/validation/validate.min.js"></script>

	<script type="text/javascript" src="view/assets/js/plugins/notifications/jgrowl.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/ui/moment/moment.min.js"></script>
    {% if base.lang == 'ar' %}
		<script type="text/javascript" src="view/assets/js/plugins/ui/moment/ar.js"></script>
    {% endif %}
	<script type="text/javascript" src="view/assets/js/plugins/pickers/daterangepicker.js"></script>
    <script type="text/javascript" src="view/assets/js/plugins/pickers/anytime.min.js"></script>
	{# // <script type="text/javascript" src="view/assets/js/plugins/pickers/anytime.5.2.0.min.js"></script> #}
	<script type="text/javascript" src="view/assets/js/plugins/pickers/pickadate/picker.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/pickers/pickadate/picker.date.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/pickers/pickadate/picker.time.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/pickers/pickadate/legacy.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/pickers/color/spectrum.js"></script>
    <script type="text/javascript" src="view/assets/js/pages/form_checkboxes_radios.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/ui/nicescroll.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/notifications/sweet_alert.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/clipboard/clipboard.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/select.min.js"></script>

	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/jszip/jszip.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/pdfmake/pdfmake.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/pdfmake/vfs_fonts.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/tables/datatables/extensions/buttons.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/uploaders/fileinput/plugins/purify.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/uploaders/fileinput/plugins/sortable.min.js"></script>
	<script type="text/javascript" src="view/assets/js/plugins/uploaders/fileinput/fileinput.min.js"></script>
    {% include 'locales.expand' %}
	<script type="text/javascript" src="view/assets/js/core/app.js?bn={{ BuildNumber }}"></script>
	<script type="text/javascript" src="view/assets/js/pages/form_select2.js"></script>
	<script type="text/javascript" src="view/assets/js/pages/layout_fixed_custom.js"></script>
	<script type="text/javascript" src="view/assets/js/pages/form_layouts.js"></script>
	<script type="text/javascript" src="view/assets/js/pages/ecommerce_orders_history.js"></script>
	{#<script type="text/javascript" src="view/assets/js/plugins/dirtyforms/jquery.dirtyforms.min.js"></script>#}
	{#<script type="text/javascript" src="view/assets/js/plugins/dirtyforms/plugins/jquery.dirtyforms.dialogs.bootstrap.min.js"></script>#}
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.7.14/js/bootstrap-datetimepicker.min.js" integrity="sha512-PDFb+YK2iaqtG4XelS5upP1/tFSmLUVJ/BVL8ToREQjsuXC5tyqEfAQV7Ca7s8b7RLHptOmTJak9jxlA2H9xQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-infinitescroll/3.0.4/infinite-scroll.pkgd.min.js"></script>

	<script>
		// hold all global and defaults variables & settings, usually will hold the config variables

		var config = {};

        config.pageLength = 25;

        $(document).ready(function () {
            $.extend($.fn.dataTable.defaults, {
                pageLength: config.pageLength,
            });
        });
	</script>

    {% if dualMenuEnabled %}
        <script type="text/javascript" src="view/assets/js/pages/sidebar_dual.js"></script>
    {% endif %}

    <script>
        jQuery.loadScript = function( url, options ) {

            // Allow user to set any option except for dataType, cache, and url
            options = $.extend( options || {}, {
                dataType: "script",
                cache: true,
                url: url
            });

            // Use $.ajax() since it is more flexible than $.getScript
            // Return the jqXHR object so we can chain callbacks
            return jQuery.ajax( options );
        };

        // Usage
        //$.loadScript( "ajax/test.js" ).done(function( script, textStatus ) {
        //    console.log( textStatus );
        //});

    </script>
	<script src="view/javascript/pages/catalog/product/summernote-video-plugin/summernote-video-plugin.js"></script>
	<script>
		function summernoteImageManagerCallback(targetel, thumbel, href, path, thumb) {
            $('[name="'+targetel+'"]').summernote('insertImage', href, path);
		}
		jQuery(function() {
            var imageManagerButton = function (context) {
                var ui = $.summernote.ui;

                // create button
                var button = ui.button({
                    contents: '<i class="note-icon-picture"/>',
                    tooltip: '{{ lang('text_image') }}',
                    click: function (e) {
                        // invoke insertText method with 'hello' on editor module.
                        //context.invoke('editor.insertText', 'hello');
						var textareael = $(this).closest('.form-group').find('textarea.summernote').attr('name');
                        $.startImageManager(textareael, null, "summernoteImageManagerCallback", 'callerName');
                    }
                });

                return button.render();   // return button as jquery object
            };
			// Default initialization
			document.emojiSource = '/admin/view/assets/js/plugins/editors/summernote/summernote-emoji/tam-emoji/img';
			jQuery('.summernote').summernote({
				callbacks: {
					onChange: function(contents, $editable) {
						$($editable).find("p").find("img").css("max-width", "100%")
					}
				},
			{% if base.lang == 'ar' %}
				lang: "ar-AR",
			{% endif %}

				{% if arabic_fonts and base.lang == 'ar' %}
				'fontNames': [
					{%  for font in arabic_fonts %}
					'{{ font.Value }}',
					{% endfor %}
				],
				'fontNamesIgnoreCheck': [
					{%  for font in arabic_fonts %}
					'{{ font.Value }}',
					{% endfor %}
				],
				{% endif %}
				{% if english_fonts and base.lang == 'en' %}
				'fontNames': [
					{%  for font in english_fonts %}
					'{{ font.Value }}',
					{% endfor %}
				],
				'fontNamesIgnoreCheck': [
					{%  for font in english_fonts %}
					'{{ font.Value }}',
					{% endfor %}
				],
				{% endif %}
                toolbar: [
                    ['style', ['style']],
                    ['font', ['bold', 'underline', 'clear']],
                    ['fontname', ['fontname']],
                    ['fontsize', ['fontsize']],
                    ['color', ['color']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['table', ['table']],
                    ['insert', ['link', 'imagemanager', 'video','emoji']],
										['insert',['ltr','rtl']],
                    ['view', ['fullscreen', 'codeview', 'help']]
					//['insert', ['emoji']],
                	//['tool', ['undo', 'redo', 'codeview']]
                ],
                buttons: {
                    imagemanager: imageManagerButton
                },
                popover: {
                    image: [

                        ['imagesize', ['imageSize100', 'imageSize50', 'imageSize25']],
                        ['float', ['floatLeft', 'floatRight', 'floatNone']],
                        ['remove', ['removeMedia']],
                        ['custom', ['imageAttributes']],
                    ],
                },
                imageAttributes:{
                    icon:'<i class="note-icon-pencil"/>',
                    removeEmpty:true, // true = remove attributes | false = leave empty if present
                    disableUpload: true, // true = don't display Upload Options | Display Upload Options
                    disableAttributes: true,
                    disableLink: false,
                    disableImage: false,
                }
            });
		});

        $.startImageManager = function(field, thumb, editorFunc, callerName) {
            if (typeof editorFunc == 'undefined') {
                editorFunc = "null";
            }

            if (typeof callerName == 'undefined') {
                callerName = "null";
            }

            $('#modal-image').remove();

            $.ajax({
                url: '{{ link('common/filemanager') }}?target=' + field + '&thumb=' + thumb + '&editorFunc=' + editorFunc + '&callerName=' + callerName,
                dataType: 'html',
                success: function (html) {
                    $('body').append('<div id="modal-image" class="modal">' + html + '</div>');

                    $('#modal-image').modal('show');
                }
            });
        };
	</script>
	<style type="text/css" media="print">
		@page {
			size: auto;   /* auto is the initial value */
			margin: 0;  /* this affects the margin in the printer settings */
		}
	</style>
	<!-- Hack for datatables checkbos fix, should be removed and fixed properly -->
	<style>
	.dt-buttons .disabled:not(.plan-lock-btn)::after {content: "{{lang('text_select_first')}}"}
	td.select-checkbox {
		color: white;
		max-width: 1px;
		overflow: hidden;
	}

	input.datepicker {
    	min-width: 92px;
	}

	.bootstrap-touchspin input {
    	min-width: 60px;
	}

	.modal-open {
		overflow: auto !important;
	}

	a.dz-draggable.pull-right.text-default.dz-custom-icon {
    	display: none;
	}

	@media (max-width: 768px){
		.dataTables_length{
			float: {{ base.direction == "rtl" ? 'right' : 'left' }} !important;
		}
		.dataTables_paginate{
			float: {{ base.direction == "rtl" ? 'left' : 'right' }} !important;
		}
		.dataTables_info{
			display: none;
		}
	}

	{% if base.PARTNER_CODE != '' %}
	@media (min-width: 769px) {
		.sidebar-xs .header-highlight .navbar-header .navbar-brand {
			padding-left: 0;
			padding-right: 0;
			background: url(/admin/view/assets/images/partners/{{ base.PARTNER_CODE }}/minilogo-backend.png) no-repeat center center;
			background-size: auto 28px;
			float: none;
			display: block;
		}
	}
	{% endif %}
	</style>

	<!-- /theme JS files -->
    {% block styles %}
    {% for style in base.styles %}
		<link rel="{{ style['rel'] }}" type="text/css" href="{{ style['href'] }}" media="{{ style['media'] }}" />
    {% endfor %}
	{% endblock styles %}

	{% block scripts %}
    {% for script in base.scripts %}
        {% if script != "view/javascript/CustomEmailTemplates/summernote/summernote.js" %}
		    <script type="text/javascript" src="{{ script }}"></script>
		{% endif %}
    {% endfor %}
	{% endblock scripts %}

    {% if
		user.hasPermission('access', 'billingaccount/plans') and
		user.getId() != 999999999 and base.ENABLE_MARKETING == '1' and
		(not isFrameless) and
		base.currentplan != 3
	%}
    <!-- Start of expandcart Zendesk Widget script -->
    <script id="ze-snippet" src="https://static.zdassets.com/ekr/snippet.js?key=0ee8ec0a-4509-434b-852f-22de30213716"> </script>
    <!-- End of expandcart Zendesk Widget script -->
	<script>
        zE(function() {
            zE.setLocale('{{ base.lang == "ar" ? "ar" : "en-US" }}');
        });
	</script>
	<script>
        zE(function() {
            zE.identify({
                name: '{{ base.billingDetails['name'] }}',
                email: '{{ base.billingDetails['email'] }}'
            });
        });
	</script>
	<script type="text/JavaScript">
        window.zESettings = {
            webWidget: {
                offset: { horizontal: '0px', vertical: '{{ base.currentplan == 3 ? "-9px" : "0px" }}' },
                position: {
                    horizontal: '{{ base.lang == "ar" ? "left" : "right" }}',
                    vertical: 'bottom'
                }
            }
        };
	</script>
	{% elseif base.currentplan == 3 and route!="sale/order/invoice" and route!="sale/order/printShippingLable" %}
	
	<script src="https://widebot-webchat.s3.amazonaws.com/shared/widebot.js?botConfigs=iOiYnblJyeiwiIFZVSMJjOiQWS09mYvJmIskTOxgiclRWYlhEduFGc4VkI6ICLiQ3bi1CZtFmTyV2c1JXZzVnI6ISZOR3biJCLiIXRiojIl1WYvJWLk5WYwh2QzlmIsICduFGTldmbhhXdTV2ZhV3ZiQWZ0J3bwBCLlNHbhZmOiV2V39GazJXZzVFdhh2YmpjItJ3bGJ2ciwSZzxWYlNWavZ1dvhXaud2bjVmUhZmOi42bpR3biJCLlNHb6Iiblt2bURmWz8UMadnIsdTOvA3c1pWRtZTVH5mT39SbT52TyskcX5EdYZ3VspmaoJlUvxlaOd3ZxoGbhp1SzQnUwhGVop2c40kSr5WWi1GcuFXakJCLi0TSl5WaMR3YlJHaiojIMJVV39yL6MHc0RnL0FGajJWZuQ3biVGZpdSawF2L0VmblJXak9yM29iIl5WasR3YhZXQ09mYiwHaiojIyFGd39yL6MHc0R3c09mYlRWai5SZnFmcvRmcvNmLi9Gb39GZul2duUGcvQXZu5ych1mcvZGdhxWZth2YhRHdzgjN28yc05mN10iZlNTNtYmZ0QTLwIWOy0iN1cjYyQWOyYDO3MiIn5GcuMTOu9Gd0VnYiwmcTV2Zh1WSwRHdoJiOiMGZpd3Lvozcy9GdzR3biV2bsJmLldWY35SZy92YuImLzd3bk5Wa0FGbw9Cdl5Gd0FWby9mZzRnbl1GajFmZzAjMxYzLtUmNhdTLhJDN40yNlBDN3IGM0gTL4ESZldTOyYDMtJCLicmbw53bs92QulWYhNDMjIiOiIGaiwiI0YWONJXZ0F2VzFWYmpjIrJXYzN3YiwSZzxHaiojIMJVV39yL6MHc0RXL09mYlRWauQXYoNmYldmeh1WYuMzcvNmLzdXYu9WZyFGaz9Sbhh2Y09mYvQCLiM3cj5CdwlmcjN1cqJmI6ICTSVFdv8iOzBHd0hCdvJWZkl2d0FGajJWZ31XYtFmLzMnLj5yc3Fmbvpmchh2cv02boNGdvJ2LkVCLiMnauQXY1dWam52bjJycu9Wa0Fmc=0HbsVnb6I"></script>	
	<script>  
		//window._widebot_.setUserName('{{base.widebot_username}}' );  
		window._widebot_.setUserNameAndEmail('{{base.widebot_username}}' ,'{{ config("config_email") }}');  
	</script>

	{% if base.lang == "ar" %}
		<Script>
		window.addEventListener('load', function () {
			// setTimeout(function () {
				//custom code to float left at arabic direction 
				$('img#kaec-chat-button').css({left:"-9px",right:"auto"});
				$('div#widebot-chat-container').css({left:"50px",right:"auto"});
			//	},3000);
		})
		</script>
		{% endif %}	
	
	{% endif %}
	

	
		
		
	{#<script type="text/javascript">(function(o){var b="https://api.autopilothq.com/anywhere/",t="736f5a318ce548afa099c6bbc801bd7e85cd0bd82b474512b245dbd7b56466d4",a=window.AutopilotAnywhere={_runQueue:[],run:function(){this._runQueue.push(arguments);}},c=encodeURIComponent,s="SCRIPT",d=document,l=d.getElementsByTagName(s)[0],p="t="+c(d.title||"")+"&u="+c(d.location.href||"")+"&r="+c(d.referrer||""),j="text/javascript",z,y;if(!window.Autopilot) window.Autopilot=a;if(o.app) p="devmode=true&"+p;z=function(src,asy){var e=d.createElement(s);e.src=src;e.type=j;e.async=asy;l.parentNode.insertBefore(e,l);};y=function(){z(b+t+'?'+p,true);};if(window.attachEvent){window.attachEvent("onload",y);}else{window.addEventListener("load",y,false);}})({"app":true});</script>
	<script type="text/javascript">
        Autopilot.run("associate", {
            _simpleAssociate: true,
            Email: "{{ base.billingDetails['email'] }}"
        });
	</script>#}

	<!-- Hotjar Tracking Code for www.expandcart.com -->
	<script>
		(function(h,o,t,j,a,r){
			h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
			h._hjSettings={hjid:1840797,hjsv:6};
			a=o.getElementsByTagName('head')[0];
			r=o.createElement('script');r.async=1;
			r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
			a.appendChild(r);
		})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
	</script>

	{% if user.getUserGroup() == 1 and base.currentplan != 3 %}
	<!-- Start of HubSpot Embed Code -->
	<script type="text/javascript" id="hs-script-loader" async defer src="//js-eu1.hs-scripts.com/25199511.js"></script>
	<script>
       var _hsq = window._hsq = window._hsq || [];
		_hsq.push(["identify",{
			email: '{{ base.billingDetails["email"] }}',
			id: '{{ base.billingDetails["email"] }}'
		}]);
	</script>
	<!-- End of HubSpot Embed Code -->
	{% if base.lang != "ar" %}
	<script>
		$(window).ready(function(){
			var isHubSpotLoaded = setInterval(function() {
				let hubspotDiv = $("#hubspot-messages-iframe-container");
				if(hubspotDiv.length > 0){
					hubspotDiv.removeClass("widget-align-left");
					hubspotDiv.addClass("widget-align-right");
					clearInterval(isHubSpotLoaded);
				}
			}, 500);
		});
	</script>
	{% endif %}
	{% endif %}
	{% if print_lang == 'en' %}
	<script>
		window.addEventListener('DOMContentLoaded', function () {
			$('.product td').attr('align', 'left');
		});
	</script>
	{% endif %}

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script defer rel="preconnect" src="https://www.googletagmanager.com/gtag/js?id=UA-58949626-2"></script>
	<script defer>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-58949626-2', {
			'optimize_id': 'GTM-M4TV3NC'
		});
	</script>

</head>
{% if not isFrameless %}

<body class="navbar-top {% if hideLayout %} hide-layout {% endif %} {% if dualMenuEnabled or isMenuCollapsed %}sidebar-xs{% endif %} {{ bodyClasses ?: '' }}  {{navbarForm ? 'light-form-body' : ''}} {{base.store_credit ? 'store-credit-banner-body'}}">
	{% if base.signupGuide['QUESTIONER'] != '1' and base.currentplan == '3' %}
		{% include 'guide/' ~ base.lang ~ '/questioner.expand' %}
	{% endif %}


	{% if not hideLayout %}

		<!-- Main navbar -->
		<div class="navbar navbar-default header-highlight navbar-fixed-top theme-header {{navbarForm ? 'light-form-navbar' : ''}}">
			<div class="navbar-header">
				{% if base.PARTNER_CODE != '' %}
					<a class="navbar-brand" href="{{ link('') }}"><img src="view/assets/images/logo-colored.svg" alt=""></a>
				{% else %}
					<a class="navbar-brand" href="{{ link('') }}"><img src="view/assets/images/logo-colored.svg" alt=""></a>
				{% endif %}

				<ul class="nav navbar-nav visible-xs-block">
					<li><a data-toggle="collapse" data-target="#navbar-mobile"><i class="icon-tree5"></i></a></li>
					<li><a class="sidebar-mobile-main-toggle"><i class="icon-paragraph-justify3"></i></a></li>
				</ul>
			</div>
			<div class="w-100">
				{# store credit banner #}
				{% if base.store_credit %}
					{% include "base_components/store_credit.expand" %}
				{% endif %}
				{% if navbarForm %}
				<div class="w-100 position-relative outer {{inner_small_head ? 'inner-small-head'}}">
					<div class="info-side {{inner_small_head ? 'inner-small-head'}}">
						<ul class="nav navbar-nav">
							<li><a class="sidebar-control sidebar-main-toggle hidden-xs"><i class="icon-paragraph-justify3"></i></a></li>
						</ul>
						<h5 class="page-head-title">
							<i class="fa fa-arrow-left" onclick="window.history.back(); return false;"></i>
							{% block headTitle %}{% endblock headTitle %}
						</h5>
						{% block headForm %}{% endblock headForm %}
					</div>
				</div>
				{% endif %}
				{% if not navbarForm %}
				<div class="navbar-collapse collapse in" id="navbar-mobile">
					<ul class="nav navbar-nav">
						<li><a class="sidebar-control sidebar-main-toggle hidden-xs"><i class="icon-paragraph-justify3"></i></a></li>
					</ul>

					<div class="navbar-right">
						{# assistant #}
						{% include "base_components/assistant.expand" %}
						
						<button id="notify_btn" class="side-modal-btn side-guide-btn"
								data-target="#side_notify_modal" >
							<i class="far fa-bell"></i>
						</button>

						<a class="side-guide-btn" href="{{ link('account/referral') }}">
							<i class="fas fa-gift"></i>
						</a>
						<!--<button class="side-modal-btn side-guide-btn" data-target="#refer_friend_modal">
							<i class="fas fa-gift"></i>
						</button>-->

						<button class="side-modal-btn side-guide-btn" data-target="#side_guide_modal">
							<i class="far fa-question-circle"></i>
						</button>
						{#***************** Start ExpandCartTracking #347692  ****************#}

						<a href='{{ base.store }}' target="_blank" class="theme-btn dark-white-empty m-bold view-store-btn"  onclick="trackUrl('View Store Front')">
							<span>{{ base.text_front }}</span>
							<i class="fas fa-eye reverce"></i>
						</a>
						{#***************** End ExpandCartTracking #347692  ****************#}


						{% if base.currentplan != 8 %}
							<a href='{{ link('account/charge') }}' class="theme-btn gold-btn">
								{{lang("text_upgrade")}} <i class="fas fa-star reverce"></i>
							</a>
						{% endif %}
						
						<div class="dropdown dropdown-user">
							<span class="dropdown-toggle" data-toggle="dropdown">
								{% if user.getImage() %}
									<img src="{{ user.getImage() ?: user.getRandomImage() }}" alt="">
								{% else %}
									<span class="user-letter"></span>
								{% endif %}
								
								{# <span>{{ user.getUserName() }}</span>
								<i class="caret"></i> #}
							</span>

							<ul class="dropdown-menu dropdown-menu-right">
								{% if base.billingAccess == 1 %}
								<li><a href="{{ base.url_billingaccount }}" target="_blank"><i class="icon-coins"></i> {{ base.text_billingaccount }}</a></li>
								{% if user.getUserGroup() == 1 and base.currentplan != 3 %}
								<li><a href="{{ base.url_supportticket }}" target="_blank"><i class="icon-comment-discussion"></i> {{ base.text_supportticket }}</a></li>
								{% endif %}
								<li><a href="{{ base.url_knowledgebase }}" target="_blank"><i class="fa fa-archive"></i> {{ base.text_knowledgebase }}</a></li>
									{#<li><a href="#"><span class="badge bg-blue pull-right">58</span> <i class="icon-comment-discussion"></i> Messages</a></li>#}
								<li class="divider"></li>
								{% endif %}
								<li><a href="{{ base.loggedUserProfile }}"><i class="icon-user-plus"></i> {{ base.text_profile }}</a></li>
								<li>
									<a class="switch-lang">
										<i class="fas fa-globe-americas"></i>
										{{lang("lang_text")}}
									</a>
								</li>
								<li><a href="{{ link('marketplace/home', 'installed=1') }}"><i class="icon-puzzle4"></i> {{ lang('my_apps') }}</a></li>
								<li><a href="{{ base.logout }}"><i class="icon-switch2"></i> {{ base.text_logout }}</a></li>
							</ul>
						</div>

					</div>
				</div>
				{% endif %}
			</div>
		</div>
		<!-- /main navbar -->
	{% endif %}

	<!-- side-notifications -->
	<section class="side-modal side-notifications" id="side_notify_modal">
		<div class="head">
			<p class="title">
				{{lang("notify_title")}}
				<i class="far fa-bell"></i>
			</p>
			<i class="icon-cross icon"></i>
		</div>
		<div class="notify-body">
		</div>
	</section>
	<!-- /side-notifications -->

	<!-- side-guide -->
	<section class="side-modal side-guide" id="side_guide_modal">
		<div class="head">
			<p class="title">{{lang("guide_title")}}</p>
			<i class="icon-cross icon"></i>
		</div>
		<a href="{{lang("guide_link_help")}}" class="link" target="_blank">
			<div class="img">
				<img src="view/assets/images/homepage/help.png" alt="">
			</div>
			<div class="info">
				<p class="title">{{lang("guide_title_help")}}</p>
				<p class="info-content">{{lang("guide_content_help")}}</p>
			</div>
		</a>
		<a href="{{lang("guide_link_wibnars")}}" class="link" target="_blank">
			<div class="img">
				<img src="view/assets/images/homepage/wibnars.png" alt="">
			</div>
			<div class="info">
				<p class="title">{{lang("guide_title_wibnars")}}</p>
				<p class="info-content">{{lang("guide_content_wibnars")}}</p>
			</div>
		</a>
		<a href="{{lang("guide_link_suggest")}}" class="link" target="_blank">
			<div class="img">
				<img src="view/assets/images/homepage/suggest.png" alt="">
			</div>
			<div class="info">
				<p class="title">{{lang("guide_title_suggest")}}</p>
				<p class="info-content">{{lang("guide_content_suggest")}}</p>
			</div>
		</a>
		{% if user.getUserGroup() == 1 and base.currentplan != 3 %}
		<a href="{{ link('account/support') }}" class="link" target="_blank">
			<div class="img">
				<img src="view/assets/images/homepage/report.png" alt="">
			</div>
			<div class="info">
				<p class="title">{{lang("guide_title_report")}}</p>
				<p class="info-content">{{lang("guide_content_report")}}</p>
			</div>
		</a>
		{% endif %}
	</section>
	<!-- /side-guide -->


	<!-- refer_friend -->
	<section class="side-modal refer-friend-modal" id="refer_friend_modal">
		<div class="head">
			<p class="title">{{lang("refer_title")}}</p>
			<i class="icon-cross icon"></i>
		</div>
		<img src="view/assets/images/homepage/refer-friends.jpg" alt="" class="w-100">
		<div class="modal-body">
			<p class="font-15 s-bold font-color-dark mb-20">
				{{lang("refer_desc")}}
			</p>
			<p class="font-15 s-bold font-color-dark mb-20">
				{{lang("refer_subdesc")}}
			</p>
			<div class="copy-box">
				<p class="left">
					REFER15OFF
				</p>
				<button class="copy">
					{{lang("refer_copy")}}
					<span class="copied">{{lang("refer_copied")}}</span>
				</button>
			</div>
			<p class="font-15 s-bold font-color-dark mb-20">
				{{lang("refer_able_discount")}}
			</p>
			<div class="external-link">
				<a href="{{lang("refer_link")}}" class="left" target="_blank">
					{{lang("refer_link")}}
				</a>
				<a href="{{lang("refer_link")}}" class="icon" target="_blank">
					<i class="fas fa-external-link-alt"></i>
				</a>
			</div>
		</div>
	</section>
	<!-- /refer_friend -->


	<!-- Page container -->
	<div class="page-container">

		<!-- Page content -->
		<div class="page-content">

			{% if not hideLayout %}
				<!-- Main sidebar -->
				<div class="sidebar sidebar-main sidebar-default sidebar-fixed {{navbarForm ? 'light-form-side' : ''}}">
					<div class="sidebar-content">
						<!-- Main navigation -->
						<div class="sidebar-category sidebar-category-visible">
							<div class="category-content no-padding">
								<ul class="navigation navigation-main navigation-accordion" style="padding: 0 0 60px 0;">
									{% for index, menu in base.navbar %}
										{% if not (menu.sales) and not (menu.marketplace) %}
											{% if menu.sub is not empty %}
												<li class="{{ base.active_icon == menu.icon ? "active" : "" }} {% if menu.disabled %} disabled {% endif %}inc-event-{{ menu.key }}">
													<a href='{{ menu.sub[0].route }}' class='has-ul'>
														<i class="{{ menu.icon }}"></i>
														<span>
															{{ menu.name }}
															{% if (base.plan_trial_id == 3 and menu.freeplan == 1) %}
																<i class="fas fa-lock gray-lock"></i>
															{% endif %}
															<span class="{{ menu.sticker }}">{{ menu.stickerText }}</span>
														</span>
													</a>
													{% if not menu.disabled %}
														<ul class="hidden-ul" style="">
															{% for index2, subMenu in menu.sub %}
															<li class="{{ base.active_menu_item_name == subMenu.name ? "active-color " : "" }}inc-event-{{ subMenu.key }}">
																<a href="{{ subMenu.route }}" class="{% if (base.plan_trial_id == 3 and subMenu.freeplan == 1) %} plan-lock-btn {% endif %}">
																	{{ subMenu.name }}
																	{% if (base.plan_trial_id == 3 and subMenu.freeplan == 1) %}
																		<i class="fas fa-lock gray-lock"></i>
																	{% endif %}
																</a>
															</li>
															{% endfor %}
														</ul>
													{% endif %}
												</li>
											{% else %}
												<li class="{{ base.active_icon == menu.icon ? "active-color" : "" }} {{menu.last_tab ? 'last-tab ' : ''}}inc-event-{{ menu.key }}">
													<a href='{{ menu.route }}' class="{% if (base.plan_trial_id == 3 and menu.freeplan == 1) %} plan-lock-btn {% endif %}">
														<i class="{{ menu.icon }}"></i>
														<span>
															{{ menu.name }}
															{% if (base.plan_trial_id == 3 and menu.freeplan == 1) %}
																<i class="fas fa-lock gray-lock"></i>
															{% endif %}
															<span class="{{ menu.sticker }}">{{ menu.stickerText }}</span>
														</span>
													</a>
												</li>
											{% endif %}
										{% endif %}
									{% endfor %}

									<li class="title">
										{% if base.navbar %}
										{{lang('side_marketplace')}}
										{% endif %}
									</li>

									{% for index, menu in base.navbar %}
										{% if menu.marketplace %}
											{% if menu.sub is not empty %}
												<li class="{{ base.active_icon == menu.icon ? "active" : "" }} {% if menu.disabled %} disabled {% endif %} inc-event-{{ menu.key }}">
													<a href='{{ menu.sub[0].route }}' class='has-ul'><i class="{{ menu.icon }}"></i> <span>{{ menu.name }} <span class="{{ menu.sticker }}">{{ menu.stickerText }}</span></span></a>
													{% if not menu.disabled %}
														<ul class="hidden-ul" style="">
															{% for index2, subMenu in menu.sub %}
																<li class="{{ base.active_menu_item_name == subMenu.name ? "active-color " : "" }}inc-event-{{ subMenu.key }}">
																<a href="{{ subMenu.route }}" class="{% if (base.plan_trial_id == 3 and subMenu.freeplan == 1) %} plan-lock-btn {% endif %}">
																	{{ subMenu.name }}
																	{% if (base.plan_trial_id == 3 and subMenu.freeplan == 1) %}
																		<i class="fas fa-lock gray-lock"></i>
																	{% endif %}
																</a>
															</li>
															{% endfor %}
														</ul>
													{% endif %}
												</li>
											{% else %}
												<li class="{{ base.active_icon == menu.icon ? "active-color " : "" }} inc-event-{{ menu.key }}">
													<a href='{{ menu.route }}'><i class="{{ menu.icon }}"></i>
														<span>
															{{ menu.name }}
															{% if (base.plan_trial_id == 3 and menu.freeplan == 1) %}
																<i class="fas fa-lock gray-lock"></i>
															{% endif %}
															<span class="{{ menu.sticker }}">{{ menu.stickerText }}</span>
														</span>
													</a>
												</li>
											{% endif %}
										{% endif %}
									{% endfor %}

									<li class="title">
										{% if base.navbar %}
										{{lang('side_sales_chan')}}
										{% endif %}
									</li>

									{% for index, menu in base.navbar %}
										{% if menu.sales %}
											{% if menu.sub is not empty %}
												<li class="{{ base.active_icon == menu.icon ? "active" : "" }} {% if menu.disabled %} disabled {% endif %} inc-event-{{ menu.key }}">
													<a href='{{ menu.sub[0].route }}' class='has-ul'><i class="{{ menu.icon }}"></i> <span>{{ menu.name }} <span class="{{ menu.sticker }}">{{ menu.stickerText }}</span></span></a>
													{% if not menu.disabled %}
														<ul class="hidden-ul" style="">
															{% for index2, subMenu in menu.sub %}
																<li class="{{ base.active_menu_item_name == subMenu.name ? "active-color " : "" }}inc-event-{{ subMenu.key }}">
																<a href="{{ subMenu.route }}" class="{% if (base.plan_trial_id == 3 and subMenu.freeplan == 1) %} plan-lock-btn {% endif %}">
																	{{ subMenu.name }}
																	{% if (base.plan_trial_id == 3 and subMenu.freeplan == 1) %}
																		<i class="fas fa-lock gray-lock"></i>
																	{% endif %}
																</a>
															</li>
															{% endfor %}
														</ul>
													{% endif %}
												</li>
											{% else %}
												<li class="{{ base.active_icon == menu.icon ? "active-color " : "" }} inc-event-{{ menu.key }}">
													<a href='{{ menu.route }}'><i class="{{ menu.icon }}"></i>
														<span>
															{{ menu.name }}
															{% if (base.plan_trial_id == 3 and menu.freeplan == 1) %}
																<i class="fas fa-lock gray-lock"></i>
															{% endif %}
															<span class="{{ menu.sticker }}">{{ menu.stickerText }}</span>
														</span>
													</a>
												</li>
											{% endif %}
										{% endif %}
									{% endfor %}
								</ul>
							</div>
						</div>
						<!-- /main navigation -->
					</div>
				</div>
				<!-- /main sidebar -->
			{% endif %}

			{% if dualMenuEnabled %}
			<!-- Secondary sidebar -->
			<div class="sidebar sidebar-secondary sidebar-default">
				<div class="sidebar-content">
					{% block secondarymenu %}
                    {% endblock secondarymenu %}
				</div>
			</div>
			<!-- /secondary sidebar -->
			{% endif %}

			<!-- Main content -->
			<div class="content-wrapper">

				<!-- Below page title with spacing -->
					{% if not hideHeader %}
					<div class="page-header page-header-default page-header-sm">
						<div class="page-header-content">
						
							<div class="page-title">
								{% block pagetitle %}
								<h5><a href="#" onclick="window.history.back(); return false;"><i class="icon-arrow-{{ base.lang == 'ar' ? 'right6' : 'left52' }} position-left text-default"></i></a> <span class="text-semibold">{% block title %}{{ base.title }}{% endblock title %}</span></h5>

								{% if not disableBreadcrumb %}
                                {% block breadcrumb %}
									<ul class="breadcrumb position-right breadcrumb-caret">
										<li><a href="{{ link("common/home") }}">Home</a></li>
										<li class="active">Dashboard</li>
									</ul>
                                {% endblock breadcrumb %}
								{% endif %}
								{% endblock pagetitle %}
							</div>

							<div class="heading-elements not-collapsible">
								{% block headelements %}
								{#<form class="heading-form" action="#">
									<div class="form-group">
										<div class="has-feedback">
											<input type="search" class="form-control" placeholder="Search">
											<div class="form-control-feedback">
												<i class="icon-search4 text-size-small text-muted"></i>
											</div>
										</div>
									</div>
								</form>#}
								{% endblock headelements %}
							</div>
						</div>
						{% if babyHeader == True %}
							{# Baby header (excuse the name. it's made by Michael after all :D ) #}
							{#  :v: Peace #}
							<div class="breadcrumb-line">
                                {% block babyHeaderContent %}
                                {% endblock %}
							</div>

							{# /Baby Header #}
						{% endif %}
					</div>
					{% endif %}


				{#<!-- Page header -->
				<div class="page-header">
					<div class="page-header-content">
						<div class="page-title">
							<h4><i class="icon-arrow-left52 position-left"></i> <span class="text-semibold">{% block title %}Title{% endblock title %}</span></h4>
						</div>

						<div class="heading-elements">
							<div class="heading-btn-group">
								<a href="#" class="btn btn-link btn-float has-text"><i class="icon-bars-alt text-primary"></i><span>Statistics</span></a>
								<a href="#" class="btn btn-link btn-float has-text"><i class="icon-calculator text-primary"></i> <span>Invoices</span></a>
								<a href="#" class="btn btn-link btn-float has-text"><i class="icon-calendar5 text-primary"></i> <span>Schedule</span></a>
							</div>
						</div>
					</div>

					<div class="breadcrumb-line breadcrumb-line-component">
                        {% block breadcrumb %}
							<ul class="breadcrumb">
								<li><a href="{{ link("common/home") }}"><i class="icon-home2 position-left"></i> Home</a></li>
								<li class="active">Dashboard</li>
							</ul>
                        {% endblock breadcrumb %}

						<ul class="breadcrumb-elements">
							<li><a href="#"><i class="icon-comment-discussion position-left"></i> Support</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">
									<i class="icon-gear position-left"></i>
									Settings
									<span class="caret"></span>
								</a>

								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="#"><i class="icon-user-lock"></i> Account security</a></li>
									<li><a href="#"><i class="icon-statistics"></i> Analytics</a></li>
									<li><a href="#"><i class="icon-accessibility"></i> Accessibility</a></li>
									<li class="divider"></li>
									<li><a href="#"><i class="icon-gear"></i> All settings</a></li>
								</ul>
							</li>
						</ul>
					</div>
				</div>#}
				<!-- /page header -->
					{% block secondHeader %}

                    {% endblock secondHeader %}
				<!-- Content area -->
				<div class="content">
					<div class="row">
{#						{% if base.count_limit_reached %}#}
						<div class="col-md-12" id="">
{#                            <div class="alert alert-danger alert-styled-left alert-bordered">#}
{#								#}{#<button type="button" class="close" data-dismiss="alert"><span>&times;</span><span class="sr-only">Close</span></button>#}
{#								{{ lang_printf('error_maximum_product_number',base.products_limit) }} <a href="{{ link('account/charge') }}">{{ lang('error_maximum_product_number_upgrade') }}</a>#}
{#                            </div>#}
						</div>
{#						{% endif %}#}
						<div class="col-md-12" id="error-area">
							{#<div class="alert alert-danger alert-styled-left alert-bordered">#}
								{#<button type="button" class="close" data-dismiss="alert"><span>&times;</span><span class="sr-only">Close</span></button>#}
								{#<span class="text-semibold">Oh snap!</span> Change a few things up and <a href="#" class="alert-link">try submitting again</a>.#}
							{#</div>#}
						</div>
					</div>
                    {% block content %}

                    {% endblock content %}
				</div>
				<!-- /content area -->

			</div>
			<!-- /main content -->

		</div>
		<!-- /page content -->

	</div>
	<!-- /page container -->
	{# switch-lang #}
	<script>
		// side guide toggle show
		$('.side-modal-btn').click(function() {
			$('.side-modal-btn').removeClass('show')
			$($(this).data('target')).addClass('show')
		});
		$('.side-modal .head .icon').click(function() {
			$('.side-modal').removeClass('show');
			$('#notify_btn').removeClass('active');
		});
		function copyToClipboard(element) {
			var $temp = $("<input>");
			$("body").append($temp);
			$temp.val($(element).text()).select();
			document.execCommand("copy");
			$temp.remove();
		};
		$(document).on('click','.copy-box .copy', function() {
			copyToClipboard($(this).siblings('.left'));
			$(this).find('.copied').addClass('show');
			setTimeout(() => {
				$(this).find('.copied').removeClass('show');
			}, 500);
		})
		$(document).on('click','.notify-box .link.copy', function(e) {
			e.preventDefault()
			copyToClipboard($(this).siblings('.copy-content'));
			$(this).find('.copied').addClass('show');
			setTimeout(() => {
				$(this).find('.copied').removeClass('show');
			}, 500);
		})

		// markAsRead
		$(document).on('click','#notify_btn', function() {
			$(this).removeClass('notify-btn');
            $.ajax({
                url: "{{ link('user/notifications/markAsRead') }}",
                type: 'post',
            });
		})
		$('#notify_btn').on('click', function() {
			$(this).addClass('active');
		})

		// set user icon key when user image not found
		let userKey = "{{user.getUserName()}}"
		if($(".user-letter").length > 0) {
			$(".user-letter").html(userKey.charAt(0))
		}
		// language switcher
        $('.switch-lang').click(function(e) {
			e.preventDefault()
            $.ajax({
                url: '{{ link('common/installation/language') }}',
                type: 'post',
                data: 'config_admin_language={{DIRECTION == 'LTR' ? "ar" : "en"}}',
                success: function (resp) {
                    location.reload();
                },
                error: function(err) {
                    alert('error')
                }
            });
        })
	</script>
	{# switch-lang #}
	{% if base.currentplan == 3 and not base.client_suspended %}
	<!-- Footer -->
	{# <div class="navbar navbar-default bg-green-800 navbar-fixed-bottom" style="border-top: 0px; border-bottom: 0px;">
		<div class="text-center">
			<div class="navbar-text pt-10 pb-10" style="float:none; color:#fcfcfc;">
				<h5 class="pr-20" style="display: inline; vertical-align: middle;">{{ lang_printf('text_selectplanMain_intro', base.trialDaysLeft) }}</h5>
				<a href="{{ link('billingaccount/plans') }}" class="btn btn-default btn-xs">
					<h6 style="margin-top: 0; margin-bottom: 0;">{{ lang('text_selectplan') }}</h6>
				</a>
			</div>
		</div>
	</div> #}
	<!-- /footer -->
	{% endif %}

	<scriptholder id="footerScriptsContent"></scriptholder>

    {% if user.hasPermission('access', 'billingaccount/plans') and user.getId() != 999999999 and base.ENABLE_MARKETING == '1' %}
        <script>
            window.intercomSettings = {
                app_id: "uvmgsp7k",
                user_id: "{{ base.STORECODE }}",
                language_override: "{{ base.lang }}",
		name: '{{ base.billingDetails['name'] }}',
		email: '{{ base.billingDetails['email'] }}'
            };
        </script>
        <script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/uvmgsp7k';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>
        <script>
            var eventName = '{{ route }}';
            eventName = eventName.replace(/\//g, "-");
            Intercom('trackEvent', eventName);
        </script>
    {% endif %}
    
	<script src="view/assets/js/plugins/editors/summernote/summernote-emoji/tam-emoji/js/config.js"></script>
  	<script src="view/assets/js/plugins/editors/summernote/summernote-emoji/tam-emoji/js/tam-emoji.min.js"></script>

	<script src="view/assets/js/plugins/mixpanel/mixpanel.js"></script>
	<script src="view/assets/js/plugins/amplitude/amplitude.js"></script>
	
	{% if isExtenionInstalled('order_notification') and config('order_notification_app_status') == 1 %}
		<script defer>

			function showNotification(type, id, config) {
				var notification_title = '';
				var notification_body = '';
				var notification_url = '';

				if (type == 'orders_new') {
					notification_title = config.text_new_order_title + ` #${id}`;
					notification_body = config.text_new_order_body;
					notification_url = config.order_url + id;
				} else if (type == 'return_new') {
					notification_title = config.text_new_return_title + ` #${id}`;
					notification_body = config.text_new_return_body;
					notification_url = config.return_url + id;
				} else {
					return;
				}

				var notification = new Notification(notification_title, {
					body: notification_body,
					icon: config.expand_logo
				});
				
				notification.onclick = function (e) {
					window.open(notification_url, "_blank");
				}
			}

			setInterval(function () {
				$.ajax({
					url: '{{ link('module/order_notification/getOrdersNotifications') }}',
					type: 'get',
					success: function (res) {
						if (!res) {
							return;
						}
						res = JSON.parse(res);
						if (res.order_notifications) {
							for (no of res.order_notifications) {
								if (Notification.permission === 'granted') {
									showNotification(no.notification_module_code, no.notification_module_id, res.config);
								} else {
									Notification.requestPermission().then(function (permission) {
										if (Notification.permission === 'granted') {
											showNotification(no.notification_module_code, no.notification_module_id, res.config);
										}
									});
								}
							}
						}
					},
					error: function(err) {
						alert('error')
					}
				});
			}, 10000);


		</script>
	{% endif %}
	{#***************** Start ExpandCartTracking #347718  ****************#}
	<script>

		//get previous and current page url path name
		var previousUrlPathName = new URL(document.referrer).pathname.replace('/admin/',''),
			currentUrlPathName 	= window.location.pathname.replace('/admin/',''),
			extra 				= {'Current Route':currentUrlPathName, 'Previous Route':previousUrlPathName};

		// init mixpanel config
		mixpanel.init("{{ constant('MIXPANEL_TOKEN') }}", {batch_requests: true})
		amplitude.getInstance().init("{{ constant('AMPLITUDE_TOKEN') }}");
		var userId = "{{ constant('STORECODE') }}";


		try {
			mixpanel.identify(userId.toUpperCase());
			mixpanel.track("Visit Route",extra);

			// init amplitude config
			amplitude.setUserId(userId.toUpperCase());
			amplitude.getInstance().logEvent("Visit Route" ,extra);
		} catch (error) {
			console.warn(error);
		}


		//track events using js
		function trackUrl(event, data={}){
            try {
                // Fix mixpanel.track is not a function error
                mixpanel.track(event,data);
                amplitude.getInstance().logEvent(event,data);
            } catch (error) {
                console.warn(error);
            }
		}


	</script>
	{#***************** End ExpandCartTracking #347718  ****************#}


	{# script end block use to put ur js at the end of base body #}
	{{ block("endScripts") }}
	<script>
		$(document).ready(function() {
			$(document).on('click', '.plan-lock-btn', function(e) {
				e.preventDefault()
				e.stopPropagation()
				$("#upgrade_plan_modal").modal({
					show: 'true'
				});
			})

			// remove notification from the list
			$(document).on('click', '.side-notifications .remove', function(e) {
				id = $(this).data("id");
				$.ajax({
					url: '{{ link('user/notifications/removeNotification') }}',
					type: "POST",
					data: {
						'id' : id,
					},
					dataType: 'json',
					success: function (json) {
						if(json.success == 1){
							$('.id-'+ id).remove();
							if($('.notify-box').length == 0) {
								$('.notify-body').append(emptyNotifications);
							}
						}
					}
				});
			});

			let emptyNotifications = `
				<img src="view/assets/images/empty-notifications.svg" alt="">
				<p class="title">
					{{lang('notify_title_empty')}}
				</p>
				<p class="desc">
					{{lang('notify_desc_empty')}}
				</p>
			`

			$.ajax({
				url: 'user/notifications',
				type: 'get',
				dataType: 'json',
				success: function (json) {
					if (json.success == 1) {
						if(json.unread != 0){
							$("#notify_btn").addClass('notify-btn');
							if(json.unread < 9){
								$('#notify_btn').attr("data-count",json.unread); //setter
							}else {
								$('#notify_btn').attr("data-count","+9"); //setter
							}
						}

						if (!json.notifications) {
							$('.notify-body').append(emptyNotifications);
						} else {
							$.each(json.notifications, function (i, notify) {
								let notification_item_html = "";
								notification_item_html  = `
								<div class="notify-box id-${notify.id}">`;
								if(notify.notification_module == 'orders')notification_item_html  +=  '<i class="fas fa-shopping-cart orders"></i>';
								if(notify.notification_module =='returns')notification_item_html  += '<i class="fas fa-shopping-cart orders"></i>';
								if(notify.notification_module =='customers') notification_item_html  +='<i class="fas fa-user-plus customers"></i>';
								if(notify.notification_module =='facebook_business') notification_item_html  +='<i class="fab fa-facebook-square"></i>';
								if(notify.notification_module =='paypal') notification_item_html  +='<i class="fab fa-paypal"></i>';

								notification_item_html +=`
								<div class="info">
								<p class="title">`;
								notification_item_html +=`	${notify.notification_module_code_text}`;

								notification_item_html +=`
										</p>
										<p class="date">
											${notify.created_at}
										</p>`;

								if( notify.notification_module_code == "return_new" )
									notification_item_html +=`<a href="${notify.return_url}"
								 class="link">{{lang('text_view_returns')}}</a>`;


								if( notify.notification_module_code == "orders_five")
											notification_item_html +=`
											<a href="{{ base.store }}" class="link copy">
											${notify.notification_module_code_link}
											<span class="copied">{{lang("refer_copied")}}</span>
											</a>
										<div class="copy-content d-none">
											{{ base.store }}
										</div>`;
								else if ( notify.notification_module_code == "facebook_business_export_all_finished"){
								 <!-- currently no link here -->
								}
								else if ( notify.notification_module_code == "paypal_payment_before_onboarding"){
								 <!-- currently no link here -->
								} 
								else
									notification_item_html +=`<a href="${notify.url}" class="link">${notify.notification_module_code_link}</a>`;

										if (notify.notification_module_code == "customers_one" )
											notification_item_html +=`<a href="{{ base.store }}" class="link copy">
											{{lang('text_copy_store')}}
											<span class="copied">{{lang("refer_copied")}}</span>
										</a>
										<div class="copy-content d-none">
											{{ base.store }}
										</div>`;
										notification_item_html +=`
													<div class="dropdown">
														<a id="dLabel" data-target="#" href="http://example.com/" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
															<i class="fas fa-ellipsis-v"></i>
														</a>

														<ul class="dropdown-menu" aria-labelledby="dLabel">
															<li>
																<button class="remove" data-id="${notify.id}">
																	remove
																</button>
															</li>
														</ul>
													</div>
												</div>
											</div>
											`;

								$('.notify-body').append(notification_item_html)
								// $('#coupons_gift').show();
							})
						}
					} else {
						$('.notify-body').addClass('empty')
						$('.notify-body').append(emptyNotifications);
					}
				}
			});

		})
		let ltr = '{{base.lang}}' == 'en';
	</script>

	<!-- Upgrade Plan Modal -->
	<div class="modal fade upgrade-plan-modal base-plan-modal center-modal" id="upgrade_plan_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<span class="close-modal">
					<span data-dismiss="modal" aria-label="Close"></span>
				</span>
				<p class="title">
					{{lang('upgrade_modal_title')}}
				</p>
				<img src="view/assets/images/icons/diamound.svg" alt="" class="img">
				<p class="info-content">
					{{lang('upgrade_modal_content')}}
				</p>
				<p class="info-content">
					{{lang('upgrade_modal_price')}}
				</p>
				<a href='{{ link('account/charge') }}' class="theme-btn gold-btn">
					{{lang("upgrade_modal_btn")}} <i class="fas fa-star reverce"></i>
				</a>
			</div>
		</div>
	</div>

	<!-- end custom global scripts -->
	<script type="text/javascript" src="view/javascript/pages/common/end_scripts.js"></script>

	<!-- Start of Survicate (www.survicate.com) code -->
    
	<script type="text/javascript">
  		(function(opts) {
      		opts.traits = {
				"email": "{{ base.billingDetails['email'] }}",
				"first_name":"{{ base.billingDetails['name'] }}",
				"last_name": "{{ base.billingDetails['name'] }}",
				"phone": "{{ store_merchant_phone }}",
				"country": "{{ store_merchant_country }}",
				"city": "{{ store_merchant_city }}",
				"store_code": "{{ storecode }}",
				"plan_id": +"{{ PackageId }}",
				"template": "{{ config('config_template') }}",
				"language": "{{ config('config_admin_language') }}",
				"has_domain": +"{{ has_domain }}",
				"has_shipment": +"{{ has_shipping }}",
				"has_payment": +"{{ has_payment }}",
				"regestration_date": "{{ client_registered_at }}",
				"last_order_date": "{{ last_order_at }}",
				"number_of_products": parseInt('{{ products_count }}'),
				"number_of_orders": parseInt('{{ orders_count }}'),
				"soft_activated": +"{{ Soft_activated }}",
				"hard_activated": +"{{ Hard_activated }}",
       		};
  		})(window._sva = window._sva || {});
	</script>
	
    <script type='text/javascript'>
        (function(w) {
          var s = document.createElement('script');
          s.src = 'https://survey.survicate.com/workspaces/8473d51aceee439bb7fef13f5ab67c6d/web_surveys.js';
          s.async = true;
          var e = document.getElementsByTagName('script')[0];
          e.parentNode.insertBefore(s, e);
        })(window);
    </script>
	  
    <!-- End of Survicate code -->

</body>

{% else %}

<body>
	<!-- Page container -->
	<div class="page-container">

		<!-- Page content -->
		<div class="page-content">
			<!-- Main content -->
			<div class="content-wrapper">
				<!-- Content area -->
				<div class="content">
                    {% block framelessContent %}

                    {% endblock framelessContent %}
				</div>
				<!-- /content area -->

			</div>
			<!-- /main content -->

		</div>
		<!-- /page content -->

	</div>
	<!-- /page container -->
	<scriptholder id="footerScriptsContent"></scriptholder>
	<script src="view/assets/js/plugins/editors/summernote/summernote-emoji/tam-emoji/js/config.js"></script>
  	<script src="view/assets/js/plugins/editors/summernote/summernote-emoji/tam-emoji/js/tam-emoji.min.js"></script>
</body>
{% endif %}
</html>
