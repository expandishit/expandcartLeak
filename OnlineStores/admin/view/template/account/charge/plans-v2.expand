{% extends "base.expand" %}
{% set hideLayout = true %}
{% set hideHeader = true %}

{% block styles %}
    <link href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.datatables.net/fixedheader/3.1.7/css/fixedHeader.dataTables.min.css" rel="stylesheet" type="text/css">
    <style>
        .content {
            background: #ffff;
        }
        .page-header-default {
            background-color: transparent;
        }
        .page-header-content
        {
            padding-right: 60px;
            padding-left: 60px;
        }
        .page-header-content + .breadcrumb-line {
            border: 0
        }
        .page-title {
            max-width: 1200px;
            margin-right: auto;
            margin-left: auto;
            padding: 15px 0;
            border-bottom: 1px solid #E0DDEF;
        }
        .item-card .card-number-wrapper, .item-card .expiry-container, .item-card .cvc-container{
            direction: ltr;
        }
        @media (max-width: 768px) {
            .page-header-content
            {
                padding-right: 15px;
                padding-left: 15px;
            }
        }
    </style>
    {{ parent() }}
{% endblock styles %}

{# {% set bodyClasses = "sidebar-xs" %} #}
{% block content %}

    <div class="modal fade success-subscribe-modal center-modal" id="paypal_plan_modal" tabindex="-1">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="head">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        ×
                    </button>
                </div>
                <p class="title">
                    {{lang('success_subscribe_title')}}
                </p>
                <img src="view/assets/images/account/charge/fireworks.svg" alt="" class="img">
                <p class="desc">{{lang('success_subscribe_desc')}}</p>
                <p class="desc">{{lang('success_subscribe_sub_desc')}}</p>
                <a href="{{link('/')}}" class="theme-btn gold-btn">
                    {{lang('btn_go_dashboard')}}
                </a>
            </div>
        </div>
    </div>
    <div class="modal fade success-subscribe-modal center-modal" id="paypal_downgrade_modal" tabindex="-1">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="head">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        ×
                    </button>
                </div>
                <p class="title">
                    {{lang('success_downgrade_title')}}
                </p>
                <img src="view/assets/images/account/charge/verified.svg" alt="" class="img">
                <p class="desc">{{lang('success_downgrade_desc')}}</p>
                <p class="desc">{{lang('success_downgrade_sub_desc')}}</p>
                <a href="{{link('/')}}" class="theme-btn gold-btn">
                    {{lang('btn_go_dashboard')}}
                </a>
            </div>
        </div>
    </div>
    {# start plans #}
    <section class="plans-grid">
        <div class="list-wrapper">
            <div class="page-head">
                <button class="link" onclick="window.history.back();">
                    <i class="fas fa-arrow-left"></i>
                    {{lang('text_my_expand_account')}}
                </button>
{#                <div class="dropdown">#}
{#                    <button class="button" id="dLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">#}
{#                        {{lang('text_currency')}}#}
{#                    </button>#}
{#                    <ul class="dropdown-menu" aria-labelledby="dLabel">#}
{#                        <li>#}
{#                            <a href="">usd</a>#}
{#                        </li>#}
{#                        <li>#}
{#                            <a href="">egp</a>#}
{#                        </li>#}
{#                    </ul>#}
{#                </div>#}
            </div>
            <div class="content-inner">


                {% if base.currentplan == 3 and base.client_suspended %}
                <!-- upgrade plans -->
                <p class="first-ship-alert upgrade-plan-alert">
                    <i class="fa fa-exclamation" aria-hidden="true"></i>
                    <span class="w-100">
                        <b class="d-block">{{lang('update_plan_title')}}</b>
                        {{lang('update_plan')}}
                    </span>
                </p>
                <!-- upgrade plans -->
                {% endif %}
                <p class="title-page text-center top-title">{{lang("page_head")}}</p>
                {# yearly and monthly plan box tabs #}
                <ul class="plans-tabs" role="tablist">
                    <li role="presentation" class="{{ plan_type == 'monthly' or base.currentplan == 3 ? 'active' : '' }}">
                        <a href="#month" aria-controls="home" role="tab" data-toggle="tab">
                            {{lang("monthly")}}
                        </a>
                    </li>
                    <li role="presentation" class="{{ plan_type != 'monthly' and base.currentplan != 3 ? 'active' : '' }}">
                        <a href="#year" aria-controls="profile" role="tab" data-toggle="tab">
                            {{lang("yearly")}}
                        </a>
                    </li>
                </ul>
                {# <p class="section-hint">
                    {{lang("monthly_hint")}}
                </p> #}
                {% set planFeatures = ["faeure_1", "faeure_1", "faeure_2", "faeure_3", "faeure_5", "faeure_6", "faeure_7"] %}
                <!-- plans tabs -->
                <div class="tab-content">
                    {# monthly content #}
                    <div role="tabpanel" class="tab-pane {{ plan_type == 'monthly' or base.currentplan == 3 ? 'active' : '' }}" id="month">
                        <div class="grid">
                            {# free/m plan #}
                            <div class="plan-box active">
                                <p class="title">
                                    {{lang("free_title")}}
                                </p>
                                <p class="info-content sub-title">
                                    {{lang("free_subtitle")}}
                                </p>
                                <p class="price">
                                    0<span class="currency">/{{lang("hint_monthly")}}</span>
                                    <span class="ever">
                                        {{lang('text_for_ever')}}
                                    </span>
                                </p>

                                <p class="discount-percent"></p>

                                <p class="discount-percent mb-2 text-end trial-ended"></p>

                                {% if plans[3] < plans[base.currentplan] %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['3']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}"data-plan-amount="{{ pricingJSON['free']['monthly']['after'] }}" data-pid="3" data-transaction-type="free">
                                        {{lang("text_downgrade")}}
                                    </button>
                                {% endif %}

                                {% if plans[3] == plans[base.currentplan] %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                {% endif %}
                                


                                <ul class="plan-features">
                                    {% for feature in plan_features.Free %}
                                        <li>
                                            <i class="fa fa-check" aria-hidden="true"></i>
                                            {{lang('key_' ~ feature)}}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {# Professional/m plan #}
                            <div class="plan-box popular">
                                <span class="popular-label">
                                    {{lang("most_popular")}}
                                </span>
                                <p class="title">
                                    {{lang("professional_title")}}
                                </p>
                                <p class="info-content sub-title">
                                    {{lang("professional_subtitle")}}
                                </p>

                                <p class="price">
                                    {% if pricingJSON['professional']['monthly']['after']  %}
                                        {{ pricingJSON['professional']['monthly']['after'] - (store_credit[53]['monthly'] ?: 0) }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% else %}
                                        {{ pricingJSON['professional']['monthly']['before'] - (store_credit[53]['monthly'] ?: 0) }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% endif %}
                                    {% if (pricingJSON['professional']['monthly']['after'] and not store_credit[53]['monthly']) or ( not pricingJSON['professional']['monthly']['after'] and store_credit[53]['monthly'])%}
                                    <span class="before">
                                        {{ pricingJSON['professional']['monthly']['before'] }}{{ lang(pricingJSON['currency']) }}
                                    </span>
                                    {% elseif store_credit[53]['monthly'] and pricingJSON['professional']['monthly']['after'] %}
                                    <span class="before">
                                        {{ pricingJSON['professional']['monthly']['after'] }}{{ lang(pricingJSON['currency']) }}
                                    </span>
                                    {% endif %}
                                </p>

                                <p class="discount-percent">
                                    {% if pricingJSON['professional']['monthly']['percentage'] %}
                                    {{ pricingJSON['professional']['monthly']['percentage']}}% {{lang('text_discount_percent')}}
                                    {% endif %}
                                </p>

                                <p class="discount-percent mb-2 text-end trial-ended">
                                    {% if plans[53] > plans[base.currentplan] and (53 in trials) and (trial_plan_id != 53) %}
                                        {{lang('text_trial_ended')}}
                                    {% endif %}
                                </p>

                                <div class="btns">
                                    {% if plans[53] < plans[base.currentplan] %}
                                        <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['53']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['professional']['monthly']['after']?pricingJSON['professional']['monthly']['after']:pricingJSON['professional']['monthly']['before'] }}" data-pid="53" data-transaction-type="downgrade">
                                            {{lang("text_downgrade")}}
                                        </button>
                                    {% endif %}

                                    {% if plans[53] == plans[base.currentplan] %}
                                        {% if  plan_type == 'monthly' %}
                                        <button class="current-plan-btn">
                                            {{lang("text_current")}}
                                        </button>
                                        {% else %}
                                        <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['53']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['professional']['monthly']['after']?pricingJSON['professional']['monthly']['after']:pricingJSON['professional']['monthly']['before'] }}" data-pid="53" data-transaction-type="downgrade">
                                            {{lang("text_downgrade")}}
                                        </button>
                                        {% endif %}
                                    {% endif %}

                                    {% if plans[base.currentplan] < plans[53] %}
                                        <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['53']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['professional']['monthly']['after']?pricingJSON['professional']['monthly']['after'] - (store_credit[53]['monthly'] ?: 0):pricingJSON['professional']['monthly']['before'] - (store_credit[53]['monthly'] ?: 0)}}" data-pid="53">
                                            {{lang("text_upgrade")}}
                                        </button>
                                    {% endif %}
                                    
                                    {% if plans[53] != plans[base.currentplan] and plans[base.currentplan] < plans[53]%}
                                        {% if trial_plan_id == 53 %}
                                            <button class="end-trial" data-pid="53">
                                                {{lang("text_end_trial")}}
                                            </button>
                                        {% else %}
                                            {% if 53 not in trials %}
                                                <button class="try" data-pid="53">
                                                    {{lang("text_try")}}
                                                </button>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                </div>

                                <p class="features-title info-content">
                                    {{lang("professional_features_title")}}
                                </p>
                                <ul class="plan-features">
                                    {# <li><i class="fa fa-plus" aria-hidden="true"></i></li> #}
                                    {% for feature in plan_features.Professional %}
                                        <li>
                                            <i class="fa fa-check" aria-hidden="true"></i>
                                            {{lang('key_' ~ feature)}}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {# Ultimate/m plan #}
                            <div class="plan-box">
                                <p class="title">
                                    {{lang("ultimate_title")}}
                                </p>
                                <p class="info-content sub-title">
                                    {{lang("unlimited_subtitle")}}
                                </p>

                                <p class="price">
                                    {% if pricingJSON['ultimate']['monthly']['after']  %}
                                        {{ pricingJSON['ultimate']['monthly']['after'] - (store_credit[6]['monthly'] ?: 0) }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% else %}
                                        {{ pricingJSON['ultimate']['monthly']['before'] - (store_credit[6]['monthly'] ?: 0) }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% endif %}
                                    {% if (pricingJSON['ultimate']['monthly']['after'] and not store_credit[6]['monthly']) or ( not pricingJSON['ultimate']['monthly']['after'] and store_credit[6]['monthly'])%}
                                    <span class="before">
                                        {{ pricingJSON['ultimate']['monthly']['before'] }}{{ lang(pricingJSON['currency']) }}
                                    </span>
                                    {% elseif store_credit[6]['monthly'] and pricingJSON['ultimate']['monthly']['after'] %}
                                    <span class="before">
                                        {{ pricingJSON['ultimate']['monthly']['after'] }}{{ lang(pricingJSON['currency']) }}
                                    </span>
                                    {% endif %}
                                </p>

                                <p class="discount-percent">
                                    {% if pricingJSON['ultimate']['monthly']['percentage'] %}
                                    {{ pricingJSON['ultimate']['monthly']['percentage']}}% {{lang('text_discount_percent')}}
                                    {% endif %}
                                </p>


                                <p class="discount-percent mb-2 text-end trial-ended">
                                    {% if plans[6] > plans[base.currentplan] and (6 in trials) and (trial_plan_id != 6) %}
                                        {{lang('text_trial_ended')}}
                                    {% endif %}
                                </p>

                                <div class="btns">
                                    {% if plans[6] < plans[base.currentplan] %}
                                        <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['6']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['ultimate']['monthly']['after']?pricingJSON['ultimate']['monthly']['after']:pricingJSON['ultimate']['monthly']['before'] }}" data-pid="6" data-transaction-type="downgrade">
                                            {{lang("text_downgrade")}}
                                        </button>
                                    {% endif %}

                                    {% if plans[6] == plans[base.currentplan] %}
                                        {% if  plan_type == 'monthly' %}
                                        <button class="current-plan-btn">
                                            {{lang("text_current")}}
                                        </button>
                                        {% else %}
                                        <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['6']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['ultimate']['monthly']['after']?pricingJSON['ultimate']['monthly']['after']:pricingJSON['ultimate']['monthly']['before'] }}" data-pid="6" data-transaction-type="downgrade">
                                            {{lang("text_downgrade")}}
                                        </button>
                                        {% endif %}
                                    {% endif %}

                                    {% if plans[base.currentplan] < plans[6] %}
                                        <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['6']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['ultimate']['monthly']['after']?pricingJSON['ultimate']['monthly']['after'] - (store_credit[6]['monthly'] ?: 0):pricingJSON['ultimate']['monthly']['before'] - (store_credit[6]['monthly'] ?: 0)}}" data-pid="6">
                                            {{lang("text_upgrade")}}
                                        </button>
                                    {% endif %}
                                    
                                    {% if plans[6] != plans[base.currentplan] and plans[base.currentplan] < plans[6] %}
                                        {% if trial_plan_id == 6 %}
                                            <button class="end-trial" data-pid="6">
                                                {{lang("text_end_trial")}}
                                            </button>
                                        {% else %}
                                            {% if 6 not in trials %}
                                                <button class="try" data-pid="6">
                                                    {{lang("text_try")}}
                                                </button>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                </div>


                                <p class="features-title info-content">
                                    {{lang("unlimited_features_title")}}
                                </p>
                                <ul class="plan-features">
                                    {# <li><i class="fa fa-plus" aria-hidden="true"></i></li> #}
                                    {% for feature in plan_features.Ultimate %}
                                        <li>
                                            <i class="fa fa-check" aria-hidden="true"></i>
                                            {{lang('key_' ~ feature)}}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                    {# yearly content #}
                    <div role="tabpanel" class="tab-pane {{ plan_type != 'monthly' and base.currentplan != 3 ? 'active' : '' }}" id="year">
                        <div class="grid">
                            {# free/y plan #}
                            <div class="plan-box active">
                                <p class="title">
                                    {{lang("free_title")}}
                                </p>
                                <p class="info-content sub-title">
                                    {{lang("free_subtitle")}}
                                </p>

                                <p class="price">
                                    0<span class="currency">/{{lang("hint_monthly")}}</span>
                                    <span class="ever">
                                        {{lang('text_for_ever')}}
                                    </span>
                                </p>
                                
                                <p class="discount-percent"></p>

                                <p class="discount-percent mb-2 text-end trial-ended"></p>

                                {% if plans[3] < plans[base.currentplan] %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['3']}}"
                                            data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}"
                                            data-plan-amount="{{ pricingJSON['free']['yearly']['after'] }}" data-pid="3" data-transaction-type="free">
                                        {{lang("text_downgrade")}}
                                    </button>
                                {% endif %}

                                {% if plans[3] == plans[base.currentplan] %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                {% endif %}

                                <ul class="plan-features">
                                    {% for feature in plan_features.Free %}
                                        <li>
                                            <i class="fa fa-check" aria-hidden="true"></i>
                                            {{lang('key_' ~ feature)}}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {# Professional/y plan #}
                            <div class="plan-box popular">
                                <span class="popular-label">
                                    {{lang("most_popular")}}
                                </span>
                                <p class="title">
                                    {{lang("professional_title")}}
                                </p>
                                <p class="info-content sub-title">
                                    {{lang("professional_subtitle")}}
                                </p>

                                <p class="price">
                                    {% if pricingJSON['professional']['yearly']['after']  %}
                                        {{ pricingJSON['professional']['yearly']['after'] - (store_credit[53]['annually']/12 ?: 0) }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% else %}
                                        {{ pricingJSON['professional']['yearly']['before'] - (store_credit[53]['annually']/12 ?: 0) }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% endif %}
                                    {% if (pricingJSON['professional']['yearly']['after'] and not store_credit[53]['annually']) or ( not pricingJSON['professional']['yearly']['after'] and store_credit[53]['annually'])%}
                                    <span class="before">
                                        {{ pricingJSON['professional']['yearly']['before'] }}{{ lang(pricingJSON['currency']) }}
                                    </span>
                                    {% elseif store_credit[53]['annually'] and pricingJSON['professional']['yearly']['after'] %}
                                    <span class="before">
                                        {{ pricingJSON['professional']['yearly']['after'] }}{{ lang(pricingJSON['currency']) }}
                                    </span>
                                    {% endif %}
                                </p>

                                <p class="discount-percent">
                                    {{lang('text_yearly_month')}} 
                                    <span class="m-bold">
                                        {% if pricingJSON['professional']['yearly']['percentage'] %}
                                            - {{ pricingJSON['professional']['yearly']['percentage']}}% {{lang('text_discount_percent')}}
                                        {% endif %}
                                    </span>
                                </p>

                                <p class="discount-percent mb-2 text-end trial-ended">
                                    {% if plans[53] > plans[base.currentplan] and (53 in trials) and (trial_plan_id != 53) %}
                                        {{lang('text_trial_ended')}}
                                    {% endif %}
                                </p>

                                <div class="btns">
                                    {% if plans[53] < plans[base.currentplan] %}
                                        <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['53']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['professional']['yearly']['final'] }}" data-pid="53" data-transaction-type="{{ plan_type == 'annually' ? 'downgrade' : 'downgrade_and_pay' }}">
                                            {{lang("text_downgrade")}}
                                        </button>
                                    {% endif %}

                                    {% if plans[53] == plans[base.currentplan] %}
                                        {% if  plan_type == 'annually' %}
                                        <button class="current-plan-btn">
                                            {{lang("text_current")}}
                                        </button>
                                        {% else %}
                                        <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['53']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['professional']['yearly']['final'] - (store_credit[53]['annually'] ?: 0)}}" data-pid="53">
                                            {{lang("text_upgrade")}}
                                        </button>
                                        {% endif %}
                                    {% endif %}

                                    {% if plans[base.currentplan] < plans[53] %}
                                        <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['53']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['professional']['yearly']['final'] - (store_credit[53]['annually'] ?: 0)}}" data-pid="53">
                                            {{lang("text_upgrade")}}
                                        </button>
                                    {% endif %}
                                        
                                    {% if plans[53] != plans[base.currentplan] and plans[base.currentplan] < plans[53] %}
                                        {% if trial_plan_id == 53 %}
                                            <button class="end-trial" data-pid="53">
                                                {{lang("text_end_trial")}}
                                            </button>
                                        {% else %}
                                            {% if 53 not in trials %}
                                                <button class="try" data-pid="53">
                                                    {{lang("text_try")}}
                                                </button>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                </div>

                                <p class="features-title info-content">
                                    {{lang("professional_features_title")}}
                                </p>
                                <ul class="plan-features">
                                    {# <li><i class="fa fa-plus" aria-hidden="true"></i></li> #}
                                    {% for feature in plan_features.Professional %}
                                        <li>
                                            <i class="fa fa-check" aria-hidden="true"></i>
                                            {{lang('key_' ~ feature)}}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {# Ultimate/y plan #}
                            <div class="plan-box">
                                <p class="title">
                                    {{lang("ultimate_title")}}
                                </p>
                                <p class="info-content sub-title">
                                    {{lang("unlimited_subtitle")}}
                                </p>

                                <p class="price">
                                    {% if pricingJSON['ultimate']['yearly']['after']  %}
                                        {{ pricingJSON['ultimate']['yearly']['after'] - (store_credit[6]['annually']/12 ?: 0) }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% else %}
                                        {{ pricingJSON['ultimate']['yearly']['before'] - (store_credit[6]['annually']/12 ?: 0) }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% endif %}
                                    {% if (pricingJSON['ultimate']['yearly']['after'] and not store_credit[6]['annually']) or ( not pricingJSON['ultimate']['yearly']['after'] and store_credit[6]['annually'])%}
                                    <span class="before">
                                        {{ pricingJSON['ultimate']['yearly']['before'] }}{{ lang(pricingJSON['currency']) }}
                                    </span>
                                    {% elseif store_credit[6]['annually'] and pricingJSON['ultimate']['yearly']['after'] %}
                                    <span class="before">
                                        {{ pricingJSON['ultimate']['yearly']['after'] }}{{ lang(pricingJSON['currency']) }}
                                    </span>
                                    {% endif %}
                                </p>

                                <p class="discount-percent">
                                    {{lang('text_yearly_month')}} 
                                    <span class="m-bold">
                                        {% if pricingJSON['ultimate']['yearly']['percentage'] %}
                                            - {{ pricingJSON['ultimate']['yearly']['percentage']}}% {{lang('text_discount_percent')}}
                                        {% endif %}
                                    </span>
                                </p>

                                <p class="discount-percent mb-2 text-end trial-ended">
                                    {% if plans[6] > plans[base.currentplan] and (6 in trials) and (trial_plan_id != 6) %}
                                        {{lang('text_trial_ended')}}
                                    {% endif %}
                                </p>

                                <div class="btns">
                                    {% if plans[6] < plans[base.currentplan] %}
                                        <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6" data-transaction-type="{{ plan_type == 'annually' ? 'downgrade' : 'downgrade_and_pay' }}">
                                            {{lang("text_downgrade")}}
                                        </button>
                                    {% endif %}

                                    {% if plans[6] == plans[base.currentplan] %}
                                        {% if  plan_type == 'annually' %}
                                        <button class="current-plan-btn">
                                            {{lang("text_current")}}
                                        </button>
                                        {% else %}
                                        <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] - (store_credit[6]['annually'] ?: 0)}}" data-pid="6">
                                            {{lang("text_upgrade")}}
                                        </button>
                                        {% endif %}
                                    {% endif %}

                                    {% if plans[base.currentplan] < plans[6] %}
                                        <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}"
                                                data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] - (store_credit[6]['annually'] ?: 0)}}" data-pid="6">
                                            {{lang("text_upgrade")}}
                                        </button>
                                    {% endif %}
                                        
                                    {% if plans[6] != plans[base.currentplan] and plans[base.currentplan] < plans[6] %}
                                        {% if trial_plan_id == 6 %}
                                            <button class="end-trial" data-pid="6">
                                                {{lang("text_end_trial")}}
                                            </button>
                                        {% else %}
                                            {% if 6 not in trials %}
                                                <button class="try" data-pid="6">
                                                    {{lang("text_try")}}
                                                </button>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                </div>

                                <p class="features-title info-content">
                                    {{lang("unlimited_features_title")}}
                                </p>
                                <ul class="plan-features">
                                    {# <li><i class="fa fa-plus" aria-hidden="true"></i></li> #}
                                    {% for feature in plan_features.Ultimate %}
                                        <li>
                                            <i class="fa fa-check" aria-hidden="true"></i>
                                            {{lang('key_' ~ feature)}}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {# end plans #}

    <div class="col-sm-12" style="text-align: center; margin-top: 30px;">
        <a target="_blank" href="https://members.expandcart.com/cart.php?gid=1">
            <strong>
                {{lang('have_coupon')}}
            </strong>
        </a>
    </div>

    <!-- start plans features -->
    <section class="list-wrapper">
        <div class="content-inner">
            <div class="text-center">
                <button class="tog-plans-features">
                    {{lang("features_btn")}}
                    <i class="fas fa-chevron-down"></i>
                </button>
            </div>
        </div>
    </section>
    {# //hint// in table foot there's tow kind of price and buy button toggle based on plan period from js in down  #}
    <section class="list-wrapper features-table">
        <div class="content-inner">
            <!-- desktop -->
            <table id="example" class="display  plans-datatable desktop-datatable" style="width:100%">
                <thead>
                    <tr>
                        <th>{{lang("our_features")}}</th>
                        <th>{{lang("free_title")}}</th>
                        <th>{{lang("professional_title")}}</th>
                        <th>{{lang("ultimate_title")}}</th>
                        {# <th>{{lang("enterprise_title")}}</th> #}
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="tit">{{lang('sales_channels')}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        {# <td></td> #}
                    </tr>
                    {% for key, feature in sales_channels %} 
                        <tr>
                            <td>
                                <span>
                                    {{lang(key ~ '_feature')}}
                                </span>
                            </td>
                            {% for vall in feature %}
                                {% if vall == 1 %}
                                    <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                {% elseif vall == 0 and vall matches '/^\\d+$/' %}
                                <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                {# {% else %} #}
                                {% elseif vall|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                <td>{{vall}}</td>
                                {% else %}
                                    <td>
                                        {{lang('tval_' ~ vall)}}
                                    </td>
                                {% endif %}
                                
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    <tr>
                        <td class="tit">{{lang('main_features')}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        {# <td></td> #}
                    </tr>
                    {% for key, feature in main_features %} 
                        <tr>
                            <td>
                                <span>
                                    {{lang(key ~ '_feature')}}
                                </span>
                            </td>
                            {% for vall in feature %}
                                {% if vall == 1 %}
                                    <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                {% elseif vall == 0 and vall matches '/^\\d+$/' %}
                                <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                {# {% else %} #}
                                {% elseif vall|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                <td>{{vall}}</td>
                                {% else %}
                                    <td>
                                        {{lang('tval_' ~ vall)}}
                                    </td>
                                {% endif %}
                                
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    <tr>
                        <td class="tit">{{lang('advanced_features')}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        {# <td></td> #}
                    </tr>
                    {% for key, feature in advanced_features %} 
                        <tr>
                            <td>
                                <span>
                                    {{lang(key ~ '_feature')}}
                                </span>
                            </td>
                            {% for vall in feature %}
                                {% if vall == 1 %}
                                    <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                {% elseif vall == 0 and vall matches '/^\\d+$/' %}
                                <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                {# {% else %} #}
                                {% elseif vall|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                <td>{{vall}}</td>
                                {% else %}
                                    <td>
                                        {{lang('tval_' ~ vall)}}
                                    </td>
                                {% endif %}
                                
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    <tr>
                        <td class="tit">{{lang('marketing_tools')}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        {# <td></td> #}
                    </tr>
                    {% for key, feature in marketing_tools %}
                        <tr>
                            <td>
                                <span>
                                    {{lang(key ~ '_feature')}}
                                </span>
                            </td>
                            {% for vall in feature %}
                                {% if vall == 1 %}
                                    <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                {% elseif vall == 0 and vall matches '/^\\d+$/' %}
                                <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                {# {% else %} #}
                                {% elseif vall|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                <td>{{vall}}</td>
                                {% else %}
                                    <td>
                                        {{lang('tval_' ~ vall)}}
                                    </td>
                                {% endif %}
                                
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    <tr>
                        <td class="tit">{{lang('services')}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        {# <td></td> #}
                    </tr>
                    {% for key, feature in services %} 
                        <tr>
                            <td>
                                <span>
                                    {{lang(key ~ '_feature')}}
                                </span>
                            </td>
                            {% for vall in feature %}
                                {% if vall == 1 %}
                                    <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                {% elseif vall == 0 and vall matches '/^\\d+$/' %}
                                <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                {# {% else %} #}
                                {% elseif vall|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                <td>{{vall}}</td>
                                {% else %}
                                    <td>
                                        {{lang('tval_' ~ vall)}}
                                    </td>
                                {% endif %}
                                
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    <tr>
                        <td class="tit">{{lang('analytics')}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        {# <td></td> #}
                    </tr>
                    {% for key, feature in analytics %} 
                        <tr>
                            <td>
                                <span>
                                    {{lang(key ~ '_feature')}}
                                </span>
                            </td>
                            {% for vall in feature %}
                                {% if vall == 1 %}
                                    <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                {% elseif vall == 0 and vall matches '/^\\d+$/' %}
                                <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                {# {% else %} #}
                                {% elseif vall|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                <td>{{vall}}</td>
                                {% else %}
                                    <td>
                                        {{lang('tval_' ~ vall)}}
                                    </td>
                                {% endif %}
                                
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    <tr>
                        <td class="tit">{{lang('team')}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        {# <td></td> #}
                    </tr>
                    {% for key, feature in team %} 
                        <tr>
                            <td>
                                <span>
                                    {{lang(key ~ '_feature')}}
                                </span>
                            </td>
                            {% for vall in feature %}
                                {% if vall == 1 %}
                                    <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                {% elseif vall == 0 and vall matches '/^\\d+$/' %}
                                <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                {# {% else %} #}
                                {% elseif vall|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                <td>{{vall}}</td>
                                {% else %}
                                    <td>
                                        {{lang('tval_' ~ vall)}}
                                    </td>
                                {% endif %}
                                
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    <tr>
                        <td class="tit">{{lang('support')}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        {# <td></td> #}
                    </tr>
                    {% for key, feature in support %} 
                        <tr>
                            <td>
                                <span>
                                    {{lang(key ~ '_feature')}}
                                </span>
                            </td>
                            {% for vall in feature %}
                                {% if vall == 1 %}
                                    <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                {% elseif vall == 0 and vall matches '/^\\d+$/' %}
                                <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                {# {% else %} #}
                                {% elseif vall|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                <td>{{vall}}</td>
                                {% else %}
                                    <td>
                                        {{lang('tval_' ~ vall)}}
                                    </td>
                                {% endif %}
                                
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <th></th>
                        {# free #}
                        <th>
                            <span class="popular-label" {% if true %} style="opacity: 0; visibility: hidden;" {% endif %}>
                                {{lang("most_popular")}}
                            </span>
                            
                            <div class="monthly-foot">
                                <p class="price-offer {{ pricingJSON['free']['monthly']['before'] ? '' : 'empty' }}">
                                    {{ pricingJSON['free']['monthly']['before'] }} 
                                    {% if pricingJSON['free']['monthly']['before'] != "" %}
                                        {{ lang(pricingJSON['currency']) }}
                                    {% endif %}
                                </p>
                                <p class="price">
                                    0 {{ lang(pricingJSON['currency']) }}
                                </p>
                                <p class="period-hint">
                                    {{lang("monthly")}}
                                </p>
                                {% if plans[3] < plans[base.currentplan] %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['3']}}" data-plan-type="monthly"
                                            data-plan-type-val="{{lang('monthly')}}"data-plan-amount="{{ pricingJSON['free']['monthly']['after'] }}" data-pid="3"
                                            data-transaction-type="free">
                                        {{lang("text_downgrade")}}
                                    </button>
                                {% endif %}

                                {% if plans[3] == plans[base.currentplan] %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                {% endif %}
                            </div>
                            <div class="yearly-foot">
                                {# {% if pricingJSON['free']['yearly']['before'] != "" %} #}
                                <p class="price-offer  empty">
                                    <br>
                                </p>
                                {# {% endif %} #}
                                <p class="price">
                                    0 {{ lang(pricingJSON['currency']) }}
                                </p>
                                <p class="period-hint">
                                    {{lang("yearly")}}
                                </p>
                                {% if plans[3] < plans[base.currentplan] %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['3']}}"
                                            data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}"
                                            data-plan-amount="{{ pricingJSON['free']['yearly']['after'] }}" data-pid="3" data-transaction-type="free">
                                        {{lang("text_downgrade")}}
                                    </button>
                                {% endif %}

                                {% if plans[3] == plans[base.currentplan] %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                {% endif %}
                            </div>
                        </th>
                        {# prof #}
                        <th>
                            <span class="popular-label" {% if false %} style="opacity: 0; visibility: hidden;" {% endif %}>
                                {{lang("most_popular")}}
                            </span>
                            
                            <div class="monthly-foot">
                                <p class="price-offer {{ pricingJSON['professional']['monthly']['after'] ? '' : 'hide' }}">
                                    {{ pricingJSON['professional']['monthly']['before'] }} {{ lang(pricingJSON['currency']) }}
                                </p>
                                <p class="price">
                                    {% if pricingJSON['professional']['monthly']['after']  %}
                                        {{ pricingJSON['professional']['monthly']['after'] }} {{ lang(pricingJSON['currency']) }}
                                    {% else %}
                                       {{ pricingJSON['professional']['monthly']['before'] }} {{ lang(pricingJSON['currency']) }}
                                    {% endif %}
                                </p>

                                <p class="period-hint">
                                    {{lang("monthly")}}
                                </p>
                                {% if plans[53] < plans[base.currentplan] %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['53']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['professional']['monthly']['after']?pricingJSON['professional']['monthly']['after']:pricingJSON['professional']['monthly']['before'] }}" data-pid="53" data-transaction-type="downgrade">
                                        {{lang("text_downgrade")}}
                                    </button>
                                {% endif %}
                                {% if plans[53] == plans[base.currentplan] %}
                                    {% if  plan_type == 'monthly' %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                    {% else %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['53']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['professional']['monthly']['after']?pricingJSON['professional']['monthly']['after']:pricingJSON['professional']['monthly']['before'] }}" data-pid="53" data-transaction-type="downgrade">
                                        {{lang("text_downgrade")}}
                                    </button>
                                    {% endif %}
                                {% endif %}

                                {% if plans[base.currentplan] < plans[53] %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['53']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}"
                                            data-plan-amount="{{ pricingJSON['professional']['monthly']['after']?pricingJSON['professional']['monthly']['after']:pricingJSON['professional']['monthly']['before'] }}"
                                            data-pid="53">
                                        {{lang("text_upgrade")}}
                                    </button>
                                {% endif %}
                            </div>
                            <div class="yearly-foot">
                                <p class="price-offer {{ pricingJSON['professional']['yearly']['after'] ? '' : 'empty' }}">
                                    {% if pricingJSON['professional']['yearly']['after'] %}
                                        {{ pricingJSON['professional']['yearly']['before'] }}
                                        {{ lang(pricingJSON['currency']) }}
                                    {% endif %}
                                </p>
                                <p class="price">
                                    {% if pricingJSON['professional']['yearly']['after']  %}
                                        {{ pricingJSON['professional']['yearly']['after'] }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% else %}
                                        {{ pricingJSON['professional']['yearly']['before'] }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% endif %}
                                </p>
                                <p class="discount-percent">
                                    {{lang('text_yearly_month')}} - 
                                    <span class="m-bold">
                                        {% if pricingJSON['professional']['yearly']['percentage'] %}
                                            {{ pricingJSON['professional']['yearly']['percentage']}}% {{lang('text_discount_percent')}}
                                        {% endif %}
                                    </span>
                                </p>
                                {% if plans[53] < plans[base.currentplan] %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['53']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['professional']['yearly']['final'] }}" data-pid="53" data-transaction-type="downgrade">
                                        {{lang("text_downgrade")}}
                                    </button>
                                {% endif %}

                                {% if plans[53] == plans[base.currentplan] %}
                                    {% if  plan_type == 'annually' %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                    {% else %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['53']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['professional']['yearly']['final'] }}" data-pid="53">
                                        {{lang("text_upgrade")}}
                                    </button>
                                    {% endif %}
                                {% endif %}

                                {% if plans[base.currentplan] < plans[53] %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['53']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}"
                                            data-plan-amount="{{ pricingJSON['professional']['yearly']['final'] }}" data-pid="53">
                                        {{lang("text_upgrade")}}
                                    </button>
                                {% endif %}
                            </div>
                        </th>
                        {# ultimate #}
                        <th>
                            <span class="popular-label" {% if true %} style="opacity: 0; visibility: hidden;" {% endif %}>
                                {{lang("most_popular")}}
                            </span>
                            
                            <div class="monthly-foot">
                                <p class="price-offer {{ pricingJSON['ultimate']['monthly']['after'] ? '' : 'empty' }}">
                                    {% if pricingJSON['ultimate']['monthly']['after'] %}
                                        {{ pricingJSON['ultimate']['monthly']['before'] }}
                                        {{ lang(pricingJSON['currency']) }}
                                    {% endif %}
                                </p>
                                <p class="price">
                                    {% if pricingJSON['ultimate']['monthly']['after']  %}
                                        {{ pricingJSON['ultimate']['monthly']['after'] }} {{ lang(pricingJSON['currency']) }}
                                    {% else %}
                                        {{ pricingJSON['ultimate']['monthly']['before'] }} {{ lang(pricingJSON['currency']) }}
                                    {% endif %}
                                </p>
                                <p class="period-hint">
                                    {{lang("monthly")}}
                                </p>
                                {% if plans[6] < plans[base.currentplan] %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['6']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['ultimate']['monthly']['after']?pricingJSON['ultimate']['monthly']['after']:pricingJSON['ultimate']['monthly']['before'] }}" data-pid="6" data-transaction-type="downgrade">
                                        {{lang("text_downgrade")}}
                                    </button>
                                {% endif %}

                                {% if plans[6] == plans[base.currentplan] %}
                                    {% if  plan_type == 'monthly' %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                    {% else %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['6']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['ultimate']['monthly']['after']?pricingJSON['ultimate']['monthly']['after']:pricingJSON['ultimate']['monthly']['before'] }}" data-pid="6" data-transaction-type="downgrade">
                                        {{lang("text_downgrade")}}
                                    </button>
                                    {% endif %}
                                {% endif %}

                                {% if plans[base.currentplan] < plans[6] %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['6']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['ultimate']['monthly']['after']?pricingJSON['ultimate']['monthly']['after']:pricingJSON['ultimate']['monthly']['before'] }}" data-pid="6">
                                        {{lang("text_upgrade")}}
                                    </button>
                                {% endif %}
                            </div>
                            <div class="yearly-foot">
                                <p class="price-offer {{ pricingJSON['ultimate']['yearly']['after'] ? '' : 'empty' }}">
                                    {% if pricingJSON['ultimate']['yearly']['after'] %}
                                        {{ pricingJSON['ultimate']['yearly']['before'] }}
                                        {{ lang(pricingJSON['currency']) }}
                                    {% endif %}
                                </p>
                                <p class="price">
                                    {% if pricingJSON['ultimate']['yearly']['after']  %}
                                        {{ pricingJSON['ultimate']['yearly']['after'] }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% else %}
                                        {{ pricingJSON['ultimate']['yearly']['before'] }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                    {% endif %}
                                </p>
                                <p class="discount-percent">
                                    {{lang('text_yearly_month')}} - 
                                    <span class="m-bold">
                                        {% if pricingJSON['professional']['yearly']['percentage'] %}
                                            {{ pricingJSON['professional']['yearly']['percentage']}}% {{lang('text_discount_percent')}}
                                        {% endif %}
                                    </span>
                                </p>
                                {% if plans[6] < plans[base.currentplan] %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6" data-transaction-type="downgrade">
                                        {{lang("text_downgrade")}}
                                    </button>
                                {% endif %}

                                {% if plans[6] == plans[base.currentplan] %}
                                    {% if  plan_type == 'annually' %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                    {% else %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6">
                                        {{lang("text_upgrade")}}
                                    </button>
                                    {% endif %}
                                {% endif %}

                                {% if plans[base.currentplan] < plans[6] %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6">
                                        {{lang("text_upgrade")}}
                                    </button>
                                {% endif %}
                            </div>
                        </th>
                        {# enter #}
                        {# <th>
                            <span class="popular-label" {% if true %} style="opacity: 0; visibility: hidden;" {% endif %}>
                                {{lang("most_popular")}}
                            </span>
                            
                            <div class="monthly-foot">
                                <p class="price-offer {{ pricingJSON['enterprise']['monthly']['after'] ? '' : 'empty' }}">
                                    {% if pricingJSON['enterprise']['monthly']['after'] %}
                                        {{ pricingJSON['enterprise']['monthly']['before'] }}
                                        {{ lang(pricingJSON['currency']) }}
                                    {% endif %}
                                </p>
                                <p class="price">
                                    {% if pricingJSON['enterprise']['monthly']['after']  %}
                                        {{ pricingJSON['enterprise']['monthly']['after'] }} {{ lang(pricingJSON['currency']) }}
                                    {% else %}
                                        {{ pricingJSON['enterprise']['monthly']['before'] }} {{ lang(pricingJSON['currency']) }}
                                    {% endif %}
                                </p>

                                <p class="period-hint">
                                    {{lang("monthly")}}
                                </p>
                                {% if plans[8] == plans[base.currentplan] %}
                                    {% if  plan_type == 'monthly' %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                    {% else %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['8']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['enterprise']['monthly']['after']?pricingJSON['enterprise']['monthly']['after']:pricingJSON['enterprise']['monthly']['before'] }}" data-pid="8">
                                        {{lang("text_downgrade")}}
                                    </button>
                                    {% endif %}
                                {% endif %}

                                {% if plans[base.currentplan] < plans[8] %}
                                    <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['8']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['enterprise']['monthly']['after']?pricingJSON['enterprise']['monthly']['after']:pricingJSON['enterprise']['monthly']['before'] }}" data-pid="8">
                                        {{lang("text_upgrade")}}
                                    </button>
                                {% endif %}
                            </div>
                            <div class="yearly-foot">

                                <p class="price">
                                    {% if pricingJSON['enterprise']['yearly']['after']  %}
                                        {{ pricingJSON['enterprise']['yearly']['after'] }} {{ lang(pricingJSON['currency']) }}
                                    {% else %}
                                        {{ pricingJSON['enterprise']['yearly']['before'] }} {{ lang(pricingJSON['currency']) }}
                                    {% endif %}
                                </p>

                                <p class="period-hint">
                                    {{lang("yearly")}}
                                </p>
                                {% if plans[8] == plans[base.currentplan] %}
                                    {% if  plan_type == 'annually' %}
                                    <button class="current-plan-btn">
                                        {{lang("text_current")}}
                                    </button>
                                    {% else %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['8']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['enterprise']['yearly']['final'] }}" data-pid="8">
                                        {{lang("text_upgrade")}}
                                    </button>
                                    {% endif %}
                                {% endif %}

                                {% if plans[base.currentplan] < plans[8] %}
                                    <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['8']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['enterprise']['yearly']['final'] }}" data-pid="8">
                                        {{lang("text_upgrade")}}
                                    </button>
                                {% endif %}
                            </div>
                        </th> #}
                    </tr>
                </tfoot>
            </table>
            <!-- desktop -->

            <!-- responsive --> {# in this section plans sepereted to 3 tables and set in tabs #}
            <div class="plans-features-tabs">

                <!-- Nav tabs -->
                <ul class="plans-table-tabs" role="tablist">
                    <li role="presentation" class="active">
                        <a href="#sTable" aria-controls="sTable" role="tab" data-toggle="tab">{{lang("free_title")}}</a>
                    </li>
                    <li role="presentation">
                        <a href="#pTable" aria-controls="pTable" role="tab" data-toggle="tab">{{lang("professional_title")}}</a>
                    </li>
                    <li role="presentation">
                        <a href="#utable" aria-controls="utable" role="tab" data-toggle="tab">{{lang("ultimate_title")}}</a>
                    </li>
                    {# <li role="presentation">
                        <a href="#etable" aria-controls="etable" role="tab" data-toggle="tab">{{lang("enterprise_title")}}</a>
                    </li> #}
                </ul>

                <!-- Tab panes -->
                <div class="tab-content plans-table-content">
                    <div role="tabpanel" class="tab-pane active" id="sTable">
                        <table class="display plans-datatable" style="width:100%">
                            <thead>
                                <tr>
                                    <th>{{lang("our_features")}}</th>
                                    <th>{{lang("free_title")}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="tit">{{lang('sales_channels')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in sales_channels %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[0] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[0] == 0 and feature[0] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[0]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[0]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[0])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('main_features')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in main_features %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[0] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[0] == 0 and feature[0] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[0]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[0]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[0])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('advanced_features')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in advanced_features %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[0] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[0] == 0 and feature[0] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[0]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[0]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[0])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('marketing_tools')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in marketing_tools %}
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[0] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[0] == 0 and feature[0] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[0]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[0]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[0])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('services')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in services %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[0] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[0] == 0 and feature[0] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[0]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[0]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[0])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('analytics')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in analytics %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[0] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[0] == 0 and feature[0] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[0]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[0]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[0])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('team')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in team %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[0] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[0] == 0 and feature[0] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[0]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[0]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[0])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('support')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in support %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[0] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[0] == 0 and feature[0] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[0]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[0]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[0])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                            <tfoot>
                                {# free #}
                                <th>
                                    <div class="monthly-foot">
                                        <p class="price-offer {{ pricingJSON['free']['monthly']['before'] ? '' : 'empty' }}">
                                            {{ pricingJSON['free']['monthly']['before'] }} 
                                            {% if pricingJSON['free']['monthly']['before'] != "" %}
                                                {{ lang(pricingJSON['currency']) }}
                                            {% endif %}
                                        </p>
                                        <p class="price">
                                            0 {{ lang(pricingJSON['currency']) }}
                                        </p>
                                        <p class="period-hint">
                                            {{lang("monthly")}}
                                        </p>
                                        {% if plans[3] < plans[base.currentplan] %}
                                            <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['3']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}"
                                                    data-plan-amount="{{ pricingJSON['free']['monthly']['after'] }}" data-pid="3" data-transaction-type="free">
                                                {{lang("text_downgrade")}}
                                            </button>
                                        {% endif %}

                                        {% if plans[3] == plans[base.currentplan] %}
                                            <button class="current-plan-btn">
                                                {{lang("text_current")}}
                                            </button>
                                        {% endif %}
                                    </div>
                                    <div class="yearly-foot">
                                        {# {% if pricingJSON['free']['yearly']['before'] != "" %} #}
                                        <p class="price-offer empty">
                                            <br>
                                        </p>
                                        {# {% endif %} #}
                                        <p class="price">
                                            0 {{ lang(pricingJSON['currency']) }}
                                        </p>
                                        <p class="period-hint">
                                            {{lang("yearly")}}
                                        </p>
                                        {% if plans[3] < plans[base.currentplan] %}
                                            <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['3']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}"
                                                    data-plan-amount="{{ pricingJSON['free']['yearly']['after'] }}" data-pid="3" data-transaction-type="free">
                                                {{lang("text_downgrade")}}
                                            </button>
                                        {% endif %}

                                        {% if plans[3] == plans[base.currentplan] %}
                                            <button class="current-plan-btn">
                                                {{lang("text_current")}}
                                            </button>
                                        {% endif %}
                                    </div>
                                </th>
                            </tfoot>
                        </table>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="pTable">
                        <table class="display plans-datatable" style="width:100%">
                            <thead>
                                <tr>
                                    <th>{{lang("our_features")}}</th>
                                    <th>{{lang("professional_title")}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="tit">{{lang('sales_channels')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in sales_channels %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[1] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[1] == 0 and feature[1] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[1]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[1]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[1])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('main_features')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in main_features %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[1] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[1] == 0 and feature[1] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[1]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[1]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[1])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('advanced_features')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in advanced_features %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[1] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[1] == 0 and feature[1] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[1]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[1]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[1])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('marketing_tools')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in marketing_tools %}
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[1] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[1] == 0 and feature[1] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[1]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[1]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[1])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('services')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in services %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[1] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[1] == 0 and feature[1] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[1]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[1]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[1])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('analytics')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in analytics %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[1] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[1] == 0 and feature[1] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[1]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[1]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[1])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('team')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in team %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[1] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[1] == 0 and feature[1] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[1]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[1]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[1])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('support')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in support %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[1] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[1] == 0 and feature[1] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[1]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[1]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[1])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                            <tfoot>
                                {# prof #}
                                <th>
                                    <span class="popular-label" {% if false %} style="opacity: 0; visibility: hidden;" {% endif %}>
                                        {{lang("most_popular")}}
                                    </span>
                                    <div class="monthly-foot">
                                        <p class="price-offer {{ pricingJSON['professional']['monthly']['after'] ? '' : 'empty' }}">
                                            {% if pricingJSON['professional']['monthly']['after'] %}
                                                {{ pricingJSON['professional']['monthly']['before'] }}
                                                {{ lang(pricingJSON['currency']) }}
                                            {% endif %}
                                        </p>
                                        <p class="price">
                                            {% if pricingJSON['professional']['monthly']['after']  %}
                                                {{ pricingJSON['professional']['monthly']['after'] }} {{ lang(pricingJSON['currency']) }}
                                            {% else %}
                                                {{ pricingJSON['professional']['monthly']['before'] }} {{ lang(pricingJSON['currency']) }}
                                            {% endif %}
                                        </p>

                                        <p class="period-hint">
                                            {{lang("monthly")}}
                                        </p>
                                        {% if plans[53] < plans[base.currentplan] %}
                                            <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['53']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['professional']['monthly']['after']?pricingJSON['professional']['monthly']['after']:pricingJSON['professional']['monthly']['before'] }}" data-pid="53" data-transaction-type="downgrade">
                                                {{lang("text_downgrade")}}
                                            </button>
                                        {% endif %}

                                        {% if plans[53] == plans[base.currentplan] %}
                                            {% if  plan_type == 'monthly' %}
                                            <button class="current-plan-btn">
                                                {{lang("text_current")}}
                                            </button>
                                            {% else %}
                                            <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['53']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['professional']['monthly']['after']?pricingJSON['professional']['monthly']['after']:pricingJSON['professional']['monthly']['before'] }}" data-pid="53" data-transaction-type="downgrade">
                                                {{lang("text_downgrade")}}
                                            </button>
                                            {% endif %}
                                        {% endif %}

                                        {% if plans[base.currentplan] < plans[53] %}
                                            <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['53']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['professional']['monthly']['after']?pricingJSON['professional']['monthly']['after']:pricingJSON['professional']['monthly']['before'] }}" data-pid="53">
                                                {{lang("text_upgrade")}}
                                            </button>
                                        {% endif %}
                                    </div>
                                    <div class="yearly-foot">
                                        <p class="price-offer {{ pricingJSON['professional']['yearly']['after'] ? '' : 'empty' }}">
                                            {% if pricingJSON['professional']['yearly']['after'] %}
                                                {{ pricingJSON['professional']['yearly']['before'] }}
                                                {{ lang(pricingJSON['currency']) }}
                                            {% endif %}
                                        </p>
                                        <p class="price">
                                            {% if pricingJSON['professional']['yearly']['after']  %}
                                                {{ pricingJSON['professional']['yearly']['after'] }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                            {% else %}
                                                {{ pricingJSON['professional']['yearly']['before'] }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                            {% endif %}
                                        </p>

                                        <p class="discount-percent">
                                            {{lang('text_yearly_month')}} - 
                                            <span class="m-bold">
                                                {% if pricingJSON['professional']['yearly']['percentage'] %}
                                                    {{ pricingJSON['professional']['yearly']['percentage']}}% {{lang('text_discount_percent')}}
                                                {% endif %}
                                            </span>
                                        </p>
                                        {% if plans[53] < plans[base.currentplan] %}
                                            <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['53']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['professional']['yearly']['final'] }}" data-pid="53" data-transaction-type="downgrade">
                                                {{lang("text_downgrade")}}
                                            </button>
                                        {% endif %}

                                        {% if plans[53] == plans[base.currentplan] %}
                                            {% if  plan_type == 'annually' %}
                                            <button class="current-plan-btn">
                                                {{lang("text_current")}}
                                            </button>
                                            {% else %}
                                            <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['53']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['professional']['yearly']['final'] }}" data-pid="53">
                                                {{lang("text_upgrade")}}
                                            </button>
                                            {% endif %}
                                        {% endif %}

                                        {% if plans[base.currentplan] < plans[53] %}
                                            <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['53']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['professional']['yearly']['final'] }}" data-pid="53">
                                                {{lang("text_upgrade")}}
                                            </button>
                                        {% endif %}
                                    </div>
                                </th>
                            </tfoot>
                        </table>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="utable">
                        <table class="display plans-datatable" style="width:100%">
                            <thead>
                                <tr>
                                    <th>{{lang("our_features")}}</th>
                                    <th>{{lang("ultimate_title")}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="tit">{{lang('sales_channels')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in sales_channels %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[2] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[2] == 0 and feature[2] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[2]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[2]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[2])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('main_features')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in main_features %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[2] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[2] == 0 and feature[2] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[2]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[2]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[2])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('advanced_features')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in advanced_features %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[2] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[2] == 0 and feature[2] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[2]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[2]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[2])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('marketing_tools')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in marketing_tools %}
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[2] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[2] == 0 and feature[2] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[2]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[2]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[2])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('services')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in services %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[2] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[2] == 0 and feature[2] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[2]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[2]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[2])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('analytics')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in analytics %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[2] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[2] == 0 and feature[2] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[2]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[2]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[2])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('team')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in team %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[2] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[2] == 0 and feature[2] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[2]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[2]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[2])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('support')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in support %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[2] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[2] == 0 and feature[2] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {# {% else %} #}
                                        {% elseif feature[2]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[2]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[2])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                            <tfoot>
                                {# ultimate #}
                                <tr>
                                    <th>
                                        
                                        <div class="monthly-foot">
                                            <p class="price-offer {{ pricingJSON['ultimate']['monthly']['after'] ? '' : 'empty' }}">
                                                {% if pricingJSON['ultimate']['monthly']['after'] %}
                                                    {{ pricingJSON['ultimate']['monthly']['before'] }}
                                                    {{ lang(pricingJSON['currency']) }}
                                                {% endif %}
                                            </p>
                                            <p class="price">
                                                {% if pricingJSON['ultimate']['monthly']['after']  %}
                                                    {{ pricingJSON['ultimate']['monthly']['after'] }} {{ lang(pricingJSON['currency']) }}
                                                {% else %}
                                                    {{ pricingJSON['ultimate']['monthly']['before'] }} {{ lang(pricingJSON['currency']) }}
                                                {% endif %}
                                            </p>

                                            <p class="period-hint">
                                                {{lang("monthly")}}
                                            </p>
                                            {% if plans[6] < plans[base.currentplan] %}
                                                <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6" data-transaction-type="downgrade">
                                                    {{lang("text_downgrade")}}
                                                </button>
                                            {% endif %}

                                            {% if plans[6] == plans[base.currentplan] %}
                                                {% if  plan_type == 'annually' %}
                                                <button class="current-plan-btn">
                                                    {{lang("text_current")}}
                                                </button>
                                                {% else %}
                                                <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6">
                                                    {{lang("text_upgrade")}}
                                                </button>
                                                {% endif %}
                                            {% endif %}

                                            {% if plans[base.currentplan] < plans[6] %}
                                                <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6">
                                                    {{lang("text_upgrade")}}
                                                </button>
                                            {% endif %}
                                        </div>
                                        <div class="yearly-foot">
                                            <p class="price-offer {{ pricingJSON['ultimate']['yearly']['after'] ? '' : 'empty' }}">
                                                {% if pricingJSON['ultimate']['yearly']['after'] %}
                                                    {{ pricingJSON['ultimate']['yearly']['before'] }}
                                                    {{ lang(pricingJSON['currency']) }}
                                                {% endif %}
                                            </p>
                                            <p class="price">
                                                {% if pricingJSON['ultimate']['yearly']['after']  %}
                                                    {{ pricingJSON['ultimate']['yearly']['after'] }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                                {% else %}
                                                    {{ pricingJSON['ultimate']['yearly']['before'] }}<span class="currency">{{ lang(pricingJSON['currency']) }}/{{lang("hint_monthly")}}</span>
                                                {% endif %}
                                            </p>
                                            <p class="discount-percent">
                                                {{lang('text_yearly_month')}} - 
                                                <span class="m-bold">
                                                    {% if pricingJSON['professional']['yearly']['percentage'] %}
                                                        {{ pricingJSON['professional']['yearly']['percentage']}}% {{lang('text_discount_percent')}}
                                                    {% endif %}
                                                </span>
                                            </p>
                                            {% if plans[6] < plans[base.currentplan] %}
                                                <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6" data-transaction-type="downgrade">
                                                    {{lang("text_downgrade")}}
                                                </button>
                                            {% endif %}

                                            {% if plans[6] == plans[base.currentplan] %}
                                                {% if  plan_type == 'annually' %}
                                                <button class="current-plan-btn">
                                                    {{lang("text_current")}}
                                                </button>
                                                {% else %}
                                                <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6">
                                                    {{lang("text_upgrade")}}
                                                </button>
                                                {% endif %}
                                            {% endif %}

                                            {% if plans[base.currentplan] < plans[6] %}
                                                <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['6']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['ultimate']['yearly']['final'] }}" data-pid="6">
                                                    {{lang("text_upgrade")}}
                                                </button>
                                            {% endif %}
                                        </div>
                                    </th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    {# <div role="tabpanel" class="tab-pane" id="etable">
                        <table class="display plans-datatable" style="width:100%">
                            <thead>
                                <tr>
                                    <th>{{lang("our_features")}}</th>
                                    <th>{{lang("enterprise_title")}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="tit">{{lang('sales_channels')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in sales_channels %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[3] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[3] == 0 and feature[3] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {% elseif feature[3]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[3]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[3])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('main_features')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in main_features %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[3] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[3] == 0 and feature[3] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {% elseif feature[3]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[3]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[3])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('advanced_features')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in advanced_features %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[3] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[3] == 0 and feature[3] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {% elseif feature[3]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[3]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[3])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('marketing_tools')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in marketing_tools %}
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[3] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[3] == 0 and feature[3] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {% elseif feature[3]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[3]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[3])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('services')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in services %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[3] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[3] == 0 and feature[3] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {% elseif feature[3]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[3]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[3])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('analytics')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in analytics %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[3] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[3] == 0 and feature[3] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {% elseif feature[3]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[3]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[3])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('team')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in team %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[3] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[3] == 0 and feature[3] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {% elseif feature[3]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[3]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[3])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr>
                                    <td class="tit">{{lang('support')}}</td>
                                    <td></td>
                                </tr>
                                {% for key, feature in support %} 
                                    <tr>
                                        <td>
                                            <span>
                                                {{lang(key ~ '_feature')}}
                                            </span>
                                        </td>
                                        {% if feature[3] == 1 %}
                                            <td><i class="fa fa-check" aria-hidden="true"></i></td>
                                        {% elseif feature[3] == 0 and feature[3] matches '/^\\d+$/' %}
                                        <td><i class="fa fa-minus" aria-hidden="true"></i></td>
                                        {% elseif feature[3]|first matches '/^[-+]?[1-9]*\\.?[1-9]+$/' %}
                                        <td>{{feature[3]}}</td>
                                        {% else %}
                                            <td>
                                                {{lang('tval_' ~ feature[3])}}
                                            </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                            <tfoot>
                                <th>
                                    <div class="monthly-foot">
                                        <p class="price-offer {{ pricingJSON['enterprise']['monthly']['after'] ? '' : 'empty' }}">
                                            {% if pricingJSON['enterprise']['monthly']['after'] %}
                                                {{ pricingJSON['enterprise']['monthly']['before'] }}
                                                {{ lang(pricingJSON['currency']) }}
                                            {% endif %}
                                        </p>
                                        <p class="price">
                                            {% if pricingJSON['enterprise']['monthly']['after']  %}
                                                {{ pricingJSON['enterprise']['monthly']['after'] }} {{ lang(pricingJSON['currency']) }}
                                            {% else %}
                                                {{ pricingJSON['enterprise']['monthly']['before'] }} {{ lang(pricingJSON['currency']) }}
                                            {% endif %}
                                        </p>
                                        <p class="period-hint">
                                            {{lang("monthly")}}
                                        </p>
                                        {% if plans[8] == plans[base.currentplan] %}
                                            {% if  plan_type == 'monthly' %}
                                            <button class="current-plan-btn">
                                                {{lang("text_current")}}
                                            </button>
                                            {% else %}
                                            <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['8']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['enterprise']['monthly']['after']?pricingJSON['enterprise']['monthly']['after']:pricingJSON['enterprise']['monthly']['before'] }}" data-pid="8">
                                                {{lang("text_downgrade")}}
                                            </button>
                                            {% endif %}
                                        {% endif %}

                                        {% if plans[base.currentplan] < plans[8] %}
                                            <button class="plan-btn month" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.monthly['8']}}" data-plan-type="monthly" data-plan-type-val="{{lang('monthly')}}" data-plan-amount="{{ pricingJSON['enterprise']['monthly']['after']?pricingJSON['enterprise']['monthly']['after']:pricingJSON['enterprise']['monthly']['before'] }}" data-pid="8">
                                                {{lang("text_upgrade")}}
                                            </button>
                                        {% endif %}
                                    </div>
                                    <div class="yearly-foot">
                                        <p class="price-offer {{ pricingJSON['enterprise']['yearly']['after'] ? '' : 'empty' }}">
                                            {% if pricingJSON['enterprise']['yearly']['after'] %}
                                                {{ pricingJSON['enterprise']['yearly']['before'] }}
                                                {{ lang(pricingJSON['currency']) }}
                                            {% endif %}
                                        </p>
                                        <p class="price">
                                            {% if pricingJSON['enterprise']['yearly']['after']  %}
                                                {{ pricingJSON['enterprise']['yearly']['after'] }} {{ lang(pricingJSON['currency']) }}
                                            {% else %}
                                                {{ pricingJSON['enterprise']['yearly']['before'] }} {{ lang(pricingJSON['currency']) }}
                                            {% endif %}
                                        </p>

                                        <p class="period-hint">
                                            {{lang("yearly")}}
                                        </p>
                                        {% if plans[8] == plans[base.currentplan] %}
                                            {% if  plan_type == 'annually' %}
                                            <button class="current-plan-btn">
                                                {{lang("text_current")}}
                                            </button>
                                            {% else %}
                                            <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['8']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['enterprise']['yearly']['final'] }}" data-pid="8">
                                                {{lang("text_upgrade")}}
                                            </button>
                                            {% endif %}
                                        {% endif %}

                                        {% if plans[base.currentplan] < plans[8] %}
                                            <button class="plan-btn year" data-toggle="modal" data-paypal-plan-id="{{paypalPlanIds.annually['8']}}" data-plan-type="yearly" data-plan-type-val="{{lang('yearly')}}" data-plan-amount="{{ pricingJSON['enterprise']['yearly']['final'] }}" data-pid="8">
                                                {{lang("text_upgrade")}}
                                            </button>
                                        {% endif %}
                                    </div>
                                </th>
                            </tfoot>
                        </table>
                    </div> #}
                </div>

            </div>
            <!-- responsive -->

        </div>
    </section>
    <!-- end plans features -->

    <!-- start enterprice plan box -->

    <div class="list-wrapper">
        <div class="content-inner">
            <div class="enterprice-plan-box">
                <img src="view/assets/images/account/charge/enterprice-cover.png" alt="">
                <div class="info">
                    <p class="title">
                        {{lang('text_e_box_title')}}
                    </p>
                    <p class="desc">
                        {{lang('text_e_box_desc')}}
                    </p>
                    <a href="" class="link" data-toggle="modal" data-target="#plan_modal">
                        {{lang('text_contact_us')}}
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- end enterprice plan box -->

    {# start payment modal #}
     
    <div class="modal fade plans-payment-modal" tabindex="-1" role="dialog" id="paymentModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                {# success #}
                <div class="success-checkout">
                    <p class="tit">
                        {{lang("checkout_success_title")}}
                    </p>

                    <div class="success-animate">
                        <div class="w4rAnimated_checkmark">
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 130.2 130.2">
                                <circle class="path circle" fill="none" stroke="#36cf92" stroke-width="3" stroke-miterlimit="10" cx="65.1" cy="65.1" r="62.1"/>
                                <polyline class="path check" fill="none" stroke="#36cf92" stroke-width="6" stroke-linecap="round" stroke-miterlimit="10" points="86.2,50.2 51.5,81.8 41.8,67.5  "/>
                            </svg>
                        </div>
                    </div>

                    <p class="info-content">
                        {{lang("checkout_success_content")}}
                    </p>
                </div>
                {# success #}

                <div class="head">
                    <h4 class="modal-title">
                        {{lang("subscribe_title")}}
                        <span class="plan-name-title"></span>
                        {{lang("plan_title")}}
                        (<span class="plan-preiod-title"></span>)
                    </h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </button>
                </div>

                <!-- Tab panes -->
                <div class="tab-content">

                    <div class="period-row">
                        <p class="bill-period">
                            {{lang("bil_period")}} : <span class="month-period start"></span>&nbsp;{{lang("to")}}&nbsp;<span class="month-period end"></span>
                        </p>
                        {% if base.direction == "ltr" %}
                            <img src="view/assets/images/account/charge/pay-safe.png" alt="">
                        {% else %}
                            <img src="view/assets/images/account/charge/pay-safe-ar.png" alt="">
                        {% endif %}
                    </div>
                    <div id="spinner" style="display: none;">
                        <div class="fa-3x"><i class="fas fa-spinner fa-pulse"></i></div>
                    </div>
                    <form method="POST" id="charges-form">
                        <div class="payment-section">
                            <p class="methods-title">
                                {{lang("title_payment_methods")}}
                            </p>
                            <div class="inner-tabs-wrapper">
                                <ul class="check-inner-tabs">
                                    <li role="presentation" class="active">
                                        <a href="#stripe" class="visa-link tab_collapsable" data-toggle="tab" aria-controls="stripe" role="tab">
                                            <img src="view/assets/images/account/charge/master-card.png" alt="">
                                        </a>
                                    </li>
                                    <li role="presentation" class="">

                                        <a href="#paypal" class="paypal-link tab_collapsable" data-toggle="tab" aria-controls="paypal" role="tab">
                                            <img src="view/assets/images/account/charge/paypal.png" alt="">
                                        </a>

                                    </li>
                                </ul>
                            </div>
                            <div class="tab-content">
                                <div id="stripe" class="tab-pane in active">
                                    <p class="form-errors alert alert-danger" style="display: none"></p>
                                    <p class="form-success alert alert-success" style="display: none"></p>
                                    <div class="stripe-err-alert">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        {{lang('stripe_err_alert')}}
                                    </div>
                                    
                                    <div class="item-card">
                                                <span class="help-block"></span>
                                        <div class="card-js item-flex">
                                            <div class="form-group">
                                                <!-- Card number -->
                                                <input class="card-number form-control target-input" name="card_number" placeholder="{{ lang('cc_number') }}" autocomplete="off" required>
                                            </div>
                                            <div class="form-group">
                                                <!-- Card expiry (element that is displayed) -->
                                                <input class="expiry form-control target-input" autocomplete="off" required>

                                                <!-- Card expiry - Month (hidden) -->
                                                <input class="expiry-month form-control target-input" name="month" autocomplete="off">

                                                <!-- Card expiry - Year (hidden) -->
                                                <input class="expiry-year form-control target-input" name="year" autocomplete="off">

                                            </div>
                                            <div class="form-group">
                                                <!-- Card CVC -->
                                                <input class="cvc form-control target-input" placeholder="{{ lang('cc_number_ph') }}" name="cvc" autocomplete="off" required>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label>{{ lang('entry_discount_code') }}</label>
                                            <div class="apply-code">
                                                <input class="discount-code-input form-control target-input" placeholder="AbCdEfGh123" name="discount_code" autocomplete="off">
                                                <button type="button" class="btn btn-default apply_discount_code">{{ lang('apply') }}</button>
                                            </div>
                                        </div>

                                    </div>
                                    <!-- </div> -->
                                    <label class="custom-check mt-15">
                                        <input type="checkbox" class="hide terms-check" name="terms" value="1" id="stripe_terms" autocomplete="off">
                                        <i class="fa fa-check" aria-hidden="true"></i>
                                        <span>{{lang("read_terms")}} <a href="{{lang('terms_link')}}" target="_blank">{{lang("terms_of_services")}}</a></span>
                                    </label>
                                    <!-- /.item-pricing -->
                                    <div class="item-click text-end">
                                        <button id="input-button" type="button" class="pay submit-form" disabled data-disable="stripe_terms">
                                            <span class="load-spin">{{lang('text_processing')}}</span>
                                            {{ lang('pay') }}&nbsp;<span class="pay-amount"></span>&nbsp;{{ lang(pricingJSON['currency']) }}
                                        </button>
                                    </div>
                                    <!-- /.item-click -->

                                    <input type="hidden" id="amount-field" name="amount" value="" />
                                    <input type="hidden" id="customer-field" name="customer" value="{{ customer }}" />
                                    <input type="hidden" id="currency-field" name="currency" value="{{ pricingJSON['strings']['en']['currency'] }}" />
                                    <input type="hidden" id="plan-id-field" name="plan_id" value="" />
                                    <input type="hidden" id="paypal-plan-id-field" name="paypal_plan_id" value="" />
                                    <input type="hidden" id="plan-type-field" name="plan_type" value="" />
                                    <input type="hidden" name="method" value="stripe" />
                                </div>

                                <div id="paypal" class="tab-pane">
                                    <div class="item-card">
                                        <p class="bill-period mb-20">
                                            {{lang("paypal_checkout")}}
                                        </p>
                                    </div>

                                    <div class="form-group">
                                        <label>{{ lang('entry_discount_code') }}</label>
                                        <div class="row">
                                            <input class="discount-code-input col-md-10 form-control target-input" placeholder="AbCdEfGh123" name="discount_code" autocomplete="off">
                                            <button type="button" class="col-md-2 btn btn-default apply_discount_code">{{ lang('apply') }}</button>
                                        </div>
                                    </div>

                                    <label class="custom-check mt-15">
                                        <input type="checkbox" class="hide terms-check" name="terms" value="1" id="paypal_terms">
                                        <i class="fa fa-check" aria-hidden="true"></i>
                                        <span>{{lang("read_terms")}} <a href="">{{lang("terms_of_services")}}</a></span>
                                    </label>
                                    <!-- /.item-pricing -->
                                    <div class="item-click text-end div-button">
                                        <button id="input-button" type="button" class="pay submit-form" disabled data-disable="paypal_terms">
                                            <span class="load-spin">Proceeding...</span>
                                            {{ lang('pay') }}&nbsp;<span class="pay-amount"></span>&nbsp;{{ lang(lang(pricingJSON['currency'])) }}
                                        </button>
                                       <!-- <a id="input-button" href="https://www.google.com" target="_blank" type="button" class="pay" disabled data-disable="paypal_terms">
                                            <span class="load-spin">Proceeding...</span>
                                            {{ lang('pay') }}&nbsp;<span class="pay-amount"></span>&nbsp;{{ lang(pricingJSON['currency']) }}
                                        </a> -->
                                        <div class="continue-paypal">
                                            <div class="paypal-guide hide">
                                                Please Click here to continue
                                                <i class="fas fa-angle-right"></i>
                                            </div>
                                            <div class="btns-row"></div>
                                        </div>
                                    </div>
                                    <!-- /.item-click -->
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->

	<!-- downgrade Plan Modal -->
	<div class="modal fade upgrade-plan-modal downgrade-plan-confirm center-modal" id="downgrade_plan_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content text-start">
				<p class="title">
					{{lang('downgrade_modal_title')}}
				</p>
                <div class="stripe-err-alert">
                    <i class="fas fa-exclamation-triangle"></i>
                    {{lang('stripe_err_alert')}}
                </div>
				<p class="info-content">
					{{lang('downgrade_modal_content')}}
				</p>
                <div class="btns text-end">
                    <button class="theme-btn gray-white-empty"  data-dismiss="modal">
                        {{lang("button_cancel")}}
                    </button>
                    <button class="theme-btn danger-btn" data-dismiss="modal">
                        {{lang("downgrade_modal_btn")}}
                    </button>
                </div>
			</div>
		</div>
	</div>
    
	<!-- end trial Modal -->
	<div class="modal fade upgrade-plan-modal downgrade-plan-confirm center-modal" id="end_trial_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content text-start">
				<p class="title">
					{{lang('end_trial_modal_title')}}
				</p>
				<p class="info-content">
					{{lang('end_trial_modal_content')}}
				</p>
                <div class="btns text-end">
                    <button class="theme-btn gray-white-empty"  data-dismiss="modal">
                        {{lang("button_cancel")}}
                    </button>
                    <button class="theme-btn danger-btn action" data-dismiss="modal" data-pid="">
                        {{lang("end_trial_modal_btn")}}
                    </button>
                </div>
			</div>
		</div>
	</div>
    
	<!-- try trial Modal -->
	<div class="modal fade upgrade-plan-modal downgrade-plan-confirm center-modal" id="try_trial_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content text-start">
				<p class="title">
					{{lang('try_trial_modal_title')}}
				</p>
				<p class="info-content">
					{{lang('try_trial_modal_content')}}
				</p>
                <div class="btns text-end">
                    <button class="theme-btn gray-white-empty"  data-dismiss="modal">
                        {{lang("button_cancel")}}
                    </button>
                    <button class="theme-btn primary-btn action" data-dismiss="modal" data-pid="">
                        {{lang("try_trial_modal_btn")}}
                    </button>
                </div>
			</div>
		</div>
	</div>

    <!-- request-call -->
    <div class="modal fade request-call-modal" id="plan_modal" tabindex="-1">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </button>
                    <h4 class="sections-title">
                        {{ lang('text_schedule_sales_call') }}
                    </h4>
                </div>
                <form class="info" id="reqCallForm">
                    <label class="label-font mb-5">
                        {{ lang('text_request_cal_phone') }}
                    </label>
                    <div class="req-call-err">
                        <div class="custom-num-box req-call-err">
                            <input id="cphone" name="phone" type="tel" value="{{ admin_phone }}">
                        </div>
                        <span class="err-msg">
                            {{lang('req_Call_phone_err')}}
                        </span>
                    </div>
                    <div class="d-flex j-content-end mt-20">
                        <button class="button primary" id="reqCallBtn">
                            <span class="btn-content">
                                {{ lang('button_confirm') }}
                            </span>
                            <span class="load"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock content %}
{% block scripts %}
    {# {{ parent() }} #}
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/fixedheader/3.1.7/js/dataTables.fixedHeader.min.js"></script>

    <script>
        $(document).ready(function() {

            // datatable configs
            let datatableActivated = false;
            let dataTableActivator = function() {
                $('#example').DataTable({
                    fixedHeader: {
                        header: true,
                        headerOffset: 0,
                    },
                    "paging":   false,
                    "ordering": false,
                    "info":     false,
                    "searching": false
                });
            };
            // datatable features info tooltip
            $(function () {
                $('[data-toggle="tooltip"]').tooltip()
            });
            // datatable toggle show
            $('.tog-plans-features').click(function() {
                $('.features-table').slideToggle();
                $(this).toggleClass('active');
                if($(this).hasClass('active')) {
                    $('html').stop().animate({
                        scrollTop: ($('.features-table').offset().top - 0 )
                    }, 500, 'swing'); 
                    // run datatable in first collapse
                    !datatableActivated ? dataTableActivator() : null;
                    datatableActivated = true;
                } else {
                    $('html').stop().animate({
                        scrollTop: 0
                    }, 500, 'swing'); 
                }
            });
            // responsive plans boxs tabs
            $('.responsive-inner button').click(function() {
                $(this).parents('.responsive-inner').find('li').removeClass('active');
                $(this).parents('li').addClass('active');
                $(this).parents('.tab-pane').find('.plan-box').removeClass('active');
                $(this).parents('.tab-pane').find('.plan-box').eq($(this).parents('li').index()).addClass('active');
            })
        } );
    </script>
    {# test script #}
    <script type="text/javascript" src="view/assets/js/plugins/forms/styling/uniform.min.js"></script>
    <!-- Start Edit By Mina Kamil Add JS files-->
    <script type="text/javascript" src="view/javascript/pages/account/charge/js/card-js.min.js" defer></script>
    <script type="text/javascript" src="view/javascript/pages/account/charge/js/main.js"></script>
    <!-- End Edit By Mina Kamil Add JS files-->
    <script>
        $(document).ready(function() {
            $('input[name="cvc"]').attr('maxlength', '4');
            let monthly = '{{plan_type}}' == 'monthly';
            if(monthly) {
                $('.yearly-foot').fadeOut(0)
                $('.monthly-foot').fadeIn(0)
            } else {
                $('.monthly-foot').fadeOut(0)
                $('.yearly-foot').fadeIn(0)
            }
            // change features tables foot prices
            $('.plans-grid .plans-tabs a').click(function() {
                if($(this).parent().index() == 0) {
                    $('.yearly-foot').fadeOut(0)
                    $('.monthly-foot').fadeIn(0)
                } else {
                    $('.monthly-foot').fadeOut(0)
                    $('.yearly-foot').fadeIn(0)
                }
            });
            // enable and disable checkout button when user check terms
            $('.terms-check').change(function() {
                let targetSubmit = $(this).attr('id');
                if($(this).is(":checked")) {
                    $('button[data-disable="' + targetSubmit + '"]').attr('disabled', false)
                } else {
                    $('button[data-disable="' + targetSubmit + '"]').attr('disabled', true)
                }
            })
            //====================================
            let monthlyVal = "{{lang("monthly")}}";
            let yearlyVal = "{{lang("yearly")}}";
            let freeVal = "{{lang("free_title")}}";
            let profVal = "{{lang("professional_title")}}";
            let ultimateVal = "{{lang("ultimate_title")}}";
            let enterpriseVal = "{{lang("enterprise_title")}}";
            // set payment form values on opoen popup
            let checkoutDataSetter = function(el) {
                $('.form-errors').text('').hide();
                $('.form-success').text('').hide();
                $('input[name="discount_code"]').val('');
                $('#paymentModal').modal({
                    backdrop: 'static',
                    keyboard: false,
                    show: true
                });
            }
            $('.plan-btn').click(function() {
                $('.downgrade-plan-confirm .stripe-err-alert').removeClass('show')
                let plan = $(this).data();
                let planId = plan.pid;
                let planType = plan.planType;
                let planAmount = plan.planAmount;
                let paypalPlanId = plan.paypalPlanId;
                $('#plan-id-field').val(planId);
                $('#plan-type-field').val(planType);
                $('#amount-field').val(planAmount);
                $('#paypal-plan-id-field').val(paypalPlanId);
                $('.pay-amount').html(planAmount);
                if(planType == "monthly") {
                    $('.plan-preiod-title').html(monthlyVal)
                } else {
                    $('.plan-preiod-title').html(yearlyVal)
                }
                if(planId == 2) {
                    $('.plan-name-title').html(freeVal)
                } else if(planId == 53) {
                    $('.plan-name-title').html(profVal)
                } else if(planId == 6) {
                    $('.plan-name-title').html(ultimateVal)
                } else if(planId == 8) {
                    $('.plan-name-title').html(enterpriseVal)
                }

                if($(this).data('transaction-type')) {
                    if($(this).data('transaction-type') == 'downgrade_and_pay') {
                        $('#downgrade_plan_modal .danger-btn').attr('data-target', 'pay');
                    } else if($(this).data('transaction-type') == 'downgrade') {
                        $('#downgrade_plan_modal .danger-btn').attr('data-target', 'downgrade');
                    } else {
                        $('#downgrade_plan_modal .danger-btn').attr('data-target', 'downgrade_to_free');
                    }
                    $('#downgrade_plan_modal').modal({
                        backdrop: 'static',
                        keyboard: false,
                        show: true
                    });
                } else {
                    checkoutDataSetter();
                }
            });
            $('#downgrade_plan_modal .danger-btn').click(function() {
                if($(this).attr('data-target') == 'pay') {
                    checkoutDataSetter();
                } else if($(this).attr('data-target') == 'downgrade') {
                    downgrade($(this));
                } else {
                    downgradeToFree($(this))
                }
            });
            let downgradeToFree = function(el) {
                el.addClass('load-btn');
                $.ajax({
                    url: urls.freeplan,
                    method: 'POST',
                    dataType: 'JSON',
                    success: (r) => {
                        el.removeClass('load-btn');
                        if(r.status == 'downgrade') {
                            location.reload();
                        } else {
                            $('.downgrade-plan-confirm .stripe-err-alert').addClass('show')
                        }
                    }
                })
            }

            let downgrade = function(el) {
                el.addClass('load-btn');
                $.ajax({
                    url: urls.downgrade,
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        currency: $('#currency-field').val(),
                        amount: $('#amount-field').val(),
                        plan_id: $('#plan-id-field').val(),
                        plan_type: $('#plan-type-field').val()
                    },
                    success: (r) => {
                        el.removeClass('load-btn');
                        if(r.status == 'downgrade') {
                            location.reload();
                        } else {
                            $('.downgrade-plan-confirm .stripe-err-alert').addClass('show')
                        }
                    }
                })
            }

            // set date range in checkout popup
            var today = new Date();
            var dd = today.getDate();
            var mm = today.getMonth() + 1; //January is 0!
            var yyyy = today.getFullYear();
            $('.plan-btn.month').click(function() {
                $('.month-period.start').html(`${dd}<span class="slash">/</span>${mm}<span class="slash">/</span>${yyyy}`)
                $('.month-period.end').html(`${dd}<span class="slash">/</span>${mm == 12 ? 1 : mm + 1}<span class="slash">/</span>${mm == 12 ? yyyy + 1 : yyyy}`)
            })
            $('.plan-btn.year').click(function() {
                $('.month-period.start').html(`${dd}<span class="slash">/</span>${mm}<span class="slash">/</span>${yyyy}`)
                $('.month-period.end').html(`${dd}<span class="slash">/</span>${mm}<span class="slash">/</span>${yyyy + 1}`)
            })



            // trial actions
            $('.plan-box .end-trial').click(function() {
                $('#end_trial_modal').modal('show')
                $('#end_trial_modal .action').attr('data-pid', $(this).attr("data-pid"))
            })
            $('.plan-box .try').click(function() {
                $('#try_trial_modal').modal('show')
                $('#try_trial_modal .action').attr('data-pid', $(this).attr("data-pid"))
            })
            $('#try_trial_modal .action').click(function() {
                //todo
                let plan_id = $(this).attr("data-pid") // will return the string "123"
                $.ajax({
                    url: 'account/charge/tryPLan',
                    dataType: 'json',
                    type: 'post',
                    data: {
                        plan_id: plan_id
                    },
                    beforeSend: function () {
                        // $('#loader').css('display', 'block');
                    },
                    success: function (json) {
                        if (json['success']==1) {
                            notify("{{lang('text_succes')}}", 'success', "");
                            location.reload();
                        }else {
                            notify("{{lang('text_error')}}", 'error', '');
                        }

                    }
                });
            })

            $('#end_trial_modal .action').click(function() {
                //todo
                let plan_id = $(this).attr("data-pid") // will return the string "123"
                $.ajax({
                    url: 'account/charge/endTrial',
                    dataType: 'json',
                    type: 'post',
                    data: {
                        plan_id: plan_id
                    },
                    beforeSend: function () {
                        // $('#loader').css('display', 'block');
                    },
                    success: function (json) {
                        if (json['success']==1) {
                            notify("{{lang('text_succes')}}", 'success', "");
                            location.reload();
                        }else {
                            notify("{{lang('text_error')}}", 'error', '');
                        }

                    }
                });
            })
            //====================================

            $('.styled').uniform({
                radioClass: 'choice'
            });

            let urls = {
                'paypal': "{{ link('account/charge/paypal_button','','',withStoreCodeUrl) }}",
                'stripe': "{{ link('account/charge/stripeCharge','','',withStoreCodeUrl) }}",
                'downgrade': "{{ link('account/charge/downgrade','','',withStoreCodeUrl) }}",
                'freeplan': "{{ link('account/charge/freeplan','','',withStoreCodeUrl) }}",
                'apply_discount_code': "{{ link('account/charge/apply_discount_code','','',withStoreCodeUrl) }}",
            };

            $('#charges-form').attr('action', urls['stripe']);

            var submitForm = $('.submit-form');

            $('.payment-method :radio').change(function (e) {
                let v = $(this).val();

                if (v != 'stripe' && v != 'paypal') {
                submitForm.attr('disabled', true);

                return;
                }

                if (typeof urls[v] == 'undefined') {
                submitForm.attr('disabled', true);

                return;
                }

                if (v == 'stripe') {
                $('#paypal-container').hide(() => {
                    $('#stripe-container').show();
                });
                } else if (v == 'paypal') {
                $('#stripe-container').hide(() => {
                    $('#paypal-container').show();
                });
                }

                submitForm.attr('disabled', false);

                $('#charges-form').attr('action', urls[v]);
            });

            $('.payment-section').find('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                let pm = $(e.target).attr('aria-controls');
                $('[name="method"]').val(pm);
                $('#charges-form').attr('action', urls[pm]);

                if (pm != 'stripe' && pm != 'paypal') {
                submitForm.attr('disabled', true);

                return;
                }

                if (typeof urls[pm] == 'undefined') {
                submitForm.attr('disabled', true);

                return;
                }
            });

            submitForm.click(function () {
                submitForm.attr('disabled', true);

                switchSpinner();

                let pm = $('[name="method"]').val();

                if (pm != 'stripe' && pm != 'paypal') {
                return;
                }

                let action = $('#charges-form').attr('action');

                if (typeof urls[pm] == 'undefined' || urls[pm] != action) {
                return;
                }

                if (pm == 'stripe') {
                    let me = $('.form-errors');
                    me.html('');
                    {# $(".card-number-wrapper, .expiry-wrapper, .cvc-wrapper").removeClass('empty-err wrong-err') #}
                    $('#stripe .stripe-err-alert').removeClass('show');
                    $(".empty-err").removeClass('empty-err')
                    $(".wrong-err").removeClass('wrong-err')
                    $.ajax({
                        url: action,
                        method: 'POST',
                        dataType: 'JSON',
                        data: $('#charges-form').serialize(),
                        success: (r) => {
                            if (typeof r.status != 'undefined' && r.status == 'OK') {
                                $.ajax({
                                    type:'GET',
                                    url: r.location,
                                    success: function(data){
                                        if(data.status == "OK" || data.status == "downgrade") {
                                            switchSpinner();
                                            // success alert
                                            {# $('.plans-payment-modal .modal-content').addClass('success'); #}
                                            $('.plans-payment-modal .success-checkout').addClass('show');
                                            setTimeout(function() {
                                                location.reload();
                                            }, 1000);
                                        } else {
                                            
                                            // error popup
                                            $('#stripe .stripe-err-alert').addClass('show');
                                            switchSpinner();
                                        }
                                    }
                                });

                                {# if(r.type == "done") {
                                    switchSpinner();
                                    // success alert
                                    $('.plans-payment-modal .modal-content').addClass('success');
                                    setTimeout(function() {
                                        window.location = r.location;
                                    }, 3000);
                                } else {
                                    window.location = r.location;
                                } #}
                            } else if (r.status == 'redirect') {
                                window.location = r.location
                            } else {
                                {# $('#stripe .stripe-err-alert').addClass('show'); #}
                                for (i in r.errors) {
                                    {# let e = r.errors[i];
                                    me.append(`<div class="alert alert-danger">${e}</div>`); #}
                                    if(i == "card-number") {
                                        $(".card-number-wrapper").addClass(r.errors[i] + '-err')
                                        $(".card-number-wrapper").attr({
                                            "data-empty-err": "{{lang('error_field_cant_be_empty')}}",
                                            "data-wrong-err": "{{lang('checkout_number_wrong_err')}}"
                                        })
                                    } else if(i == "expiry") {
                                        $(".expiry-wrapper > div").addClass(r.errors[i] + '-err')
                                        $(".expiry-wrapper > div").attr({
                                            "data-empty-err": "{{lang('error_field_cant_be_empty')}}",
                                            "data-wrong-err": "{{lang('checkout_expiry_wrong_err')}}"
                                        })
                                    } else if(i == "cvc") {
                                        $(".cvc-wrapper").addClass(r.errors[i] + '-err')
                                        $(".cvc-wrapper").attr({
                                            "data-empty-err": "{{lang('error_field_cant_be_empty')}}",
                                            "data-wrong-err": "{{lang('checkout_cvc_wrong_err')}}"
                                        })
                                    } else {
                                        let e = r.errors[i];
                                        me.append(`<div class="alert alert-danger">${e}</div>`);
                                    }
                                }
                                switchSpinner();

                                submitForm.attr('disabled', false);
                            }
                        }
                    });
                } else if (pm == 'paypal') {
                    $.ajax({
                        url: action,
                        method: 'POST',
                        // dataType: 'JSON',
                        data: $('#charges-form').serialize(),
                        success: (r) => {
                            json = JSON.parse(JSON.stringify(r));
                            if (typeof json.status != 'undefined' && json.status == 'downgrade') {
                                window.location = json.location;
                            }else {
                                switchSpinner();
                                $( ".paypal-guide" ).removeClass('hide');
                                $( ".div-button .pay" ).fadeOut(0);
                                $( ".div-button .btns-row" ).empty();
                                $( ".div-button .btns-row" ).append(r);
                            }
                        }
                    });
                }
            });

            $('#paymentModal').on('hidden.bs.modal', function () {
                $( ".div-button .pay" ).fadeIn(0);
                $( ".div-button .btns-row" ).empty();
                $( ".terms-check" ).prop("checked",false);
                $( ".paypal-guide" ).addClass('hide');
            });

            function httpGet(theUrl)
            {

                let xmlhttp;

                if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp=new XMLHttpRequest();
                } else { // code for IE6, IE5
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }

                xmlhttp.onreadystatechange=function() {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                        return xmlhttp.responseText;
                    }
                }
                xmlhttp.open("GET", theUrl, false);
                xmlhttp.send();

                return xmlhttp.response;
            }
            function switchSpinner() {
                if ($('.submit-form').hasClass("load")) {
                    $('.submit-form').removeClass('load');
                } else {
                    $('.submit-form').addClass('load');
                }
            }
            
            setTimeout(function() {
                $(".expiry").val("");
            }, 300);


            $('.discount-code-input').on('keyup', function(){
                let code = $(this).val();
                $('.discount-code-input').val(code.trim());
            })

            $('.apply_discount_code').on('click', function(){
                let el = $(this);
                $('.form-errors').text('').hide();
                $('.form-success').text('').hide();
                let code = $(this).siblings('input[name="discount_code"]').val();
                if(code && code.length){
                    el.addClass('load-btn');
                    $.ajax({
                        url: urls.apply_discount_code,
                        method: 'POST',
                        dataType: 'JSON',
                        data: {
                            code: code,
                            currency: $('#currency-field').val(), 
                            product_id: $('#plan-id-field').val(),
                            period: $('#plan-type-field').val()
                        },
                        success: (r) => {
                            el.removeClass('load-btn');
                            if(r.success == true) {
                                $('.form-success').text(r.message).show();
                                $('.pay-amount').text(r.discount_price);
                            } else {
                                $('.form-errors').text(r.message).show();
                            }
                        }
                    })
                }
            })

        })
        {# $(document).click(function() {
            $('#paypal_downgrade_modal').modal('show');
        }) #}
    </script>
    {# test script #}
    {% if flash_message["status"]== "OK" %}
    <script>
        $(document).ready(function() {
            $('#paypal_plan_modal').modal('show');
        })
    </script>
    {% elseif flash_message["status"]== "downgrade"  %}
    <script>
        $(document).ready(function() {
            $('#paypal_downgrade_modal').modal('show');
        })
    </script>
    {% endif %}
{% endblock scripts %}

{% block endScripts %}
    <script>
        var telInput = jQuery("#cphone");
        // run input number flags function
        let iti = telInput.intlTelInput({
            initialCountry: "auto",
            nationalMode: true,
            preferredCountries: [],
            geoIpLookup: function(callback) {
                jQuery.get('https://ipinfo.io', function() {}, "jsonp").always(function(resp) {
                    var countryCode = (resp && resp.country) ? resp.country : "";
                    callback(countryCode);
                });
            },
            hiddenInput: "clientphone",
            utilsScript: "{{ link('view/build/js/utils.js') }}"
        });
        // empty phone val when change cuntry
        telInput.on('countrychange',function () {
            telInput.val('')
        });
        telInput.on('focusout',function () {
            if(telInput.intlTelInput("isValidNumber")) {
                $('.req-call-err').removeClass('has-err');
            }
        });

        // submit request call form
        $(document).on('submit', '#reqCallForm', function (e) {
            e.preventDefault();
            // success function
            let successFunc = function() {
                $('#plan_modal').modal('hide');
                $('.req-call-err').removeClass('has-err');
                new PNotify({
                    text: '{{lang('text_succes')}}',
                    addclass: 'bg-success stack-top-right',
                    stack: {"dir1": "down", "dir2": "right", "push": "top"}
                });
            }
            // input phone validation
            if(telInput.intlTelInput("isValidNumber")) {
                $('.request-call-modal .button').addClass('load');
                $.ajax({
                    url: '{{ link('common/base/requestEnterpriseDemo') }}',
                    type: 'post',
                    data: $(this).serialize(),
                    success: function (resp) {
                        $('.request-call-modal .button').removeClass('load');
                        let respObject = JSON.parse(resp);
                        if(respObject.success == 1) {
                            successFunc()
                            telInput.val('');

                            /***************** Start ExpandCartTracking #347738  ****************/
                            trackUrl('Request enterprise demo');
                            /***************** End ExpandCartTracking #347738  ****************/
                        } else {
                            $('.req-call-err').addClass('has-err');
                        }
                    },
                    error: function(err) {
                        $('.request-call-modal .button').removeClass('load');
                        $('.request-call-modal .err.general').slideDown();
                    }
                }); 
            } else {
                $('.req-call-err').addClass('has-err');
            }
        });
    </script>
{% endblock %}